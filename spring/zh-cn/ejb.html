<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;15&nbsp;&#31456;&nbsp;EJB&#30340;&#23384;&#21462;&#21644;&#23454;&#29616;</title><link rel="stylesheet" href="../styles/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Spring - Java/J2EE Application Framework"><link rel="up" href="index.html" title="Spring - Java/J2EE Application Framework"><link rel="previous" href="jms.html" title="&#31532;&nbsp;14&nbsp;&#31456;&nbsp;JMS&#25903;&#25345;"><link rel="next" href="remoting.html" title="&#31532;&nbsp;16&nbsp;&#31456;&nbsp;&#36890;&#36807;Spring&#20351;&#29992;&#36828;&#31243;&#35775;&#38382;&#21644;web&#26381;&#21153;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;15&nbsp;&#31456;&nbsp;EJB&#30340;&#23384;&#21462;&#21644;&#23454;&#29616;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="jms.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="remoting.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="ejb"></a>&#31532;&nbsp;15&nbsp;&#31456;&nbsp;EJB&#30340;&#23384;&#21462;&#21644;&#23454;&#29616;</h2></div></div><div></div></div><p>&#20316;&#20026;&#36731;&#37327;&#32423;&#30340;&#23481;&#22120;&#65292;Spring&#24120;&#24120;&#34987;&#35748;&#20026;&#26159;EJB&#30340;&#26367;&#20195;&#21697;&#12290;&#25105;&#20204;&#20063;&#30456;&#20449;&#65292;&#23545;&#20110;&#24456;&#22810;
  &#65288;&#19981;&#19968;&#23450;&#26159;&#32477;&#22823;&#22810;&#25968;&#65289;&#24212;&#29992;&#21644;&#29992;&#20363;&#65292;&#30456;&#23545;&#20110;&#36890;&#36807;EJB&#23481;&#22120;&#26469;&#23454;&#29616;&#30456;&#21516;&#30340;&#21151;&#33021;&#32780;&#35328;&#65292;
  Sping&#20316;&#20026;&#23481;&#22120;&#65292;&#21152;&#19978;&#23427;&#22312;&#20107;&#21153;&#65292;ORM&#21644;JDBC&#23384;&#21462;&#36825;&#20123;&#39046;&#22495;&#20013;&#20016;&#23500;&#30340;&#21151;&#33021;&#25903;&#25345;&#65292;
  Spring&#30340;&#30830;&#26159;&#26356;&#22909;&#30340;&#36873;&#25321;&#12290;</p><p>&#19981;&#36807;&#65292;&#38656;&#35201;&#29305;&#21035;&#27880;&#24847;&#30340;&#26159;&#65292;&#20351;&#29992;&#20102;Spring&#24182;&#19981;&#26159;&#35828;&#25105;&#20204;&#23601;&#19981;&#33021;&#29992;EJB&#20102;&#65292; 
  &#23454;&#38469;&#19978;&#65292;Spring&#22823;&#22823;&#31616;&#21270;&#20102;&#20174;&#20013;&#35775;&#38382;&#21644;&#23454;&#29616;EJB&#32452;&#20214;&#25110;&#21482;&#23454;&#29616;&#65288;EJB&#32452;&#20214;&#65289;&#20854;&#21151;&#33021;&#30340;&#22797;&#26434;&#24615;&#12290;
  &#21478;&#22806;&#65292;&#22914;&#26524;&#36890;&#36807;Spring&#26469;&#35775;&#38382;EJB&#32452;&#20214;&#26381;&#21153;&#65292;&#20197;&#21518;&#23601;&#21487;&#20197;&#22312;&#26412;&#22320;EJB&#32452;&#20214;&#65292;&#36828;&#31243;EJB&#32452;&#20214;&#65292;
  &#25110;&#32773;&#26159;POJO&#65288;&#31616;&#21333;Java&#23545;&#35937;&#65289;&#36825;&#20123;&#21464;&#20307;&#20043;&#38388;&#36879;&#26126;&#22320;&#20999;&#25442;&#26381;&#21153;&#30340;&#23454;&#29616;&#65292;&#32780;&#19981;&#38656;&#35201;&#20462;&#25913;
  &#23458;&#25143;&#31471;&#30340;&#20195;&#30721;&#12290;</p><p>&#26412;&#31456;&#65292;&#25105;&#20204;&#26469;&#30475;&#30475;Spring&#26159;&#22914;&#20309;&#24110;&#21161;&#25105;&#20204;&#35775;&#38382;&#21644;&#23454;&#29616;EJB&#32452;&#20214;&#30340;&#12290;&#23588;&#20854;&#26159;&#22312;&#35775;&#38382;
  &#26080;&#29366;&#24577;Session Bean&#65288;SLSBs&#65289;&#30340;&#26102;&#20505;&#65292;Spring&#29305;&#21035;&#26377;&#29992;&#65292;&#29616;&#22312;&#25105;&#20204;&#23601;&#30001;&#27492;&#24320;&#22987;&#35752;&#35770;&#12290;</p><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ejb-access"></a>15.1.&nbsp;&#35775;&#38382;EJB</h2></div></div><div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-concepts"></a>15.1.1.&nbsp;&#27010;&#24565;</h3></div></div><div></div></div><p>&#35201;&#35843;&#29992;&#26412;&#22320;&#25110;&#36828;&#31243;&#26080;&#29366;&#24577;Session Bean&#19978;&#30340;&#26041;&#27861;&#65292;&#36890;&#24120;&#23458;&#25143;&#31471;&#30340;&#20195;&#30721;&#24517;&#39035;
      &#36827;&#34892;JNDI&#26597;&#25214;&#65292;&#24471;&#21040;&#65288;&#26412;&#22320;&#25110;&#36828;&#31243;&#30340;&#65289;EJB Home&#23545;&#35937;&#65292;&#28982;&#21518;&#35843;&#29992;&#35813;&#23545;&#35937;&#30340;"create"
      &#26041;&#27861;&#65292;&#25165;&#33021;&#24471;&#21040;&#23454;&#38469;&#30340;&#65288;&#26412;&#22320;&#25110;&#36828;&#31243;&#30340;&#65289;EJB&#23545;&#35937;&#12290;&#21069;&#21518;&#35843;&#29992;&#20102;&#19981;&#27490;&#19968;&#20010;EJB&#32452;&#20214;
      &#19978;&#30340;&#26041;&#27861;&#12290;</p><p>&#20026;&#20102;&#36991;&#20813;&#37325;&#22797;&#30340;&#24213;&#23618;&#35843;&#29992;&#65292;&#24456;&#22810;EJB&#24212;&#29992;&#20351;&#29992;&#20102;&#26381;&#21153;&#23450;&#20301;&#22120;&#65288;Service Locator&#65289;
      &#21644;&#19994;&#21153;&#22996;&#25176;&#65288;Bussiness Delegate&#65289;&#27169;&#24335;&#65292;&#36825;&#26679;&#35201;&#27604;&#22312;&#23458;&#25143;&#31471;&#20195;&#30721;&#20013;&#21040;&#22788;&#36827;&#34892;JNDI
      &#26597;&#25214;&#26356;&#22909;&#20123;&#65292;&#19981;&#36807;&#23427;&#20204;&#30340;&#24120;&#35265;&#30340;&#23454;&#29616;&#37117;&#26377;&#26126;&#26174;&#30340;&#32570;&#38519;&#12290;&#20363;&#22914;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#36890;&#24120;&#65292;&#33509;&#26159;&#20381;&#36182;&#20110;&#26381;&#21153;&#23450;&#20301;&#22120;&#25110;&#19994;&#21153;&#20195;&#29702;&#21333;&#20214;&#26469;&#20351;&#29992;EJB&#65292;&#21017;&#24456;&#38590;&#23545;&#20195;&#30721;&#36827;
          &#34892;&#27979;&#35797;&#12290;</p></li><li><p>&#22312;&#20165;&#20351;&#29992;&#20102;&#26381;&#21153;&#23450;&#20301;&#22120;&#27169;&#24335;&#32780;&#19981;&#20351;&#29992;&#19994;&#21153;&#22996;&#25176;&#27169;&#24335;&#30340;&#24773;&#20917;&#19979;&#65292;&#24212;&#29992;&#31243;&#24207;
          &#20195;&#30721;&#20173;&#28982;&#38656;&#35201;&#35843;&#29992;EJB Home&#32452;&#20214;&#30340;create&#26041;&#27861;&#65292;&#36824;&#26159;&#35201;&#22788;&#29702;&#30001;&#27492;&#24341;&#20837;&#30340;&#24322;&#24120;&#12290;
          &#23548;&#33268;&#20195;&#30721;&#20173;&#28982;&#20445;&#30041;&#20102;&#19982;EJB API&#30340;&#32806;&#21512;&#24615;&#20197;&#21450;EJB&#32534;&#31243;&#27169;&#22411;&#30340;&#22797;&#26434;&#24615;&#12290;</p></li><li><p>&#23454;&#29616;&#19994;&#21153;&#22996;&#25176;&#27169;&#24335;&#36890;&#24120;&#20250;&#23548;&#33268;&#22823;&#37327;&#30340;&#20887;&#20313;&#20195;&#30721;&#65292;&#22240;&#20026;&#25105;&#20204;&#19981;&#24471;&#19981;&#32534;&#20889;
          &#24456;&#22810;&#26041;&#27861;&#65292;&#32780;&#23427;&#20204;&#25152;&#20570;&#30340;&#20165;&#20165;&#26159;&#35843;&#29992;EJB&#32452;&#20214;&#30340;&#21516;&#21517;&#26041;&#27861;&#12290;</p></li></ul></div><p>Spring&#37319;&#29992;&#30340;&#26041;&#27861;&#26159;&#20801;&#35768;&#21019;&#24314;&#24182;&#20351;&#29992;&#20195;&#29702;&#23545;&#35937;&#65292;&#19968;&#33324;&#26159;&#22312;Spring&#30340;
      ApplicationContext&#25110;BeanFactory&#37324;&#38754;&#36827;&#34892;&#37197;&#32622;&#65292;&#36825;&#26679;&#23601;&#21644;&#19994;&#21153;&#20195;&#29702;&#31867;&#20284;&#65292;&#21482;&#38656;&#35201;
      &#23569;&#37327;&#30340;&#20195;&#30721;&#12290;&#25105;&#20204;&#19981;&#20877;&#38656;&#35201;&#21478;&#22806;&#32534;&#20889;&#39069;&#22806;&#30340;&#26381;&#21153;&#23450;&#20301;&#22120;&#25110;JNDI&#26597;&#25214;&#30340;&#20195;&#30721;&#65292;&#25110;&#32773;&#26159;&#25163;&#20889;
      &#30340;&#19994;&#21153;&#22996;&#25176;&#23545;&#35937;&#37324;&#38754;&#20887;&#20313;&#30340;&#26041;&#27861;&#65292;&#38500;&#38750;&#23427;&#20204;&#21487;&#20197;&#24102;&#26469;&#23454;&#36136;&#24615;&#30340;&#22909;&#22788;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-local"></a>15.1.2.&nbsp;&#35775;&#38382;&#26412;&#22320;&#30340;&#26080;&#29366;&#24577;Session Bean&#65288;SLSB&#65289;</h3></div></div><div></div></div><p>&#20551;&#35774;&#26377;&#19968;&#20010;web&#25511;&#21046;&#22120;&#38656;&#35201;&#20351;&#29992;&#26412;&#22320;EJB&#32452;&#20214;&#12290;&#25105;&#20204;&#36981;&#24490;&#21069;&#20154;&#30340;&#23454;&#36341;&#32463;&#39564;&#65292;
      &#20110;&#26159;&#20351;&#29992;&#20102;EJB&#30340;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#65288;Business Methods Interface&#65289;&#27169;&#24335;&#65292;&#36825;&#26679;&#65292;
      &#36825;&#20010;EJB&#32452;&#20214;&#30340;&#26412;&#22320;&#25509;&#21475;&#23601;&#25193;&#23637;&#20102;&#38750;EJB&#29305;&#23450;&#30340;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#12290;&#35753;&#25105;&#20204;&#20551;&#23450;&#36825;&#20010;
      &#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#21483;MyComponent&#12290;</p><pre class="programlisting">public interface MyComponent {
    ...
}</pre><p>&#65288;&#20351;&#29992;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#27169;&#24335;&#30340;&#19968;&#20010;&#20027;&#35201;&#21407;&#22240;&#23601;&#26159;&#20026;&#20102;&#20445;&#35777;&#26412;&#22320;&#25509;&#21475;&#21644;bean&#30340;&#23454;&#29616;&#31867;
      &#20043;&#38388;&#26041;&#27861;&#31614;&#21517;&#30340;&#21516;&#27493;&#26159;&#33258;&#21160;&#30340;&#12290;&#21478;&#22806;&#19968;&#20010;&#21407;&#22240;&#26159;&#23427;&#20351;&#24471;&#31245;&#21518;&#25105;&#20204;&#25913;&#29992;&#22522;&#20110;POJO&#65288;&#31616;&#21333;Java&#23545;&#35937;&#65289;
      &#30340;&#26381;&#21153;&#23454;&#29616;&#26356;&#21152;&#23481;&#26131;&#65292;&#21482;&#35201;&#36825;&#26679;&#30340;&#25913;&#21464;&#26159;&#26377;&#21033;&#30340;&#12290;&#24403;&#28982;&#65292;&#25105;&#20204;&#20063;&#38656;&#35201;&#23454;&#29616;
      &#26412;&#22320;Home&#25509;&#21475;&#65292;&#24182;&#25552;&#20379;&#19968;&#20010;Bean&#23454;&#29616;&#31867;&#65292;&#20351;&#20854;&#23454;&#29616;&#25509;&#21475;SessionBean&#21644;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;
      MyComponent&#12290;&#29616;&#22312;&#20026;&#20102;&#25226;&#25105;&#20204;Web&#23618;&#30340;&#25511;&#21046;&#22120;&#21644;EJB&#30340;&#23454;&#29616;&#38142;&#25509;&#36215;&#26469;&#65292;&#25105;&#20204;&#21807;&#19968;&#35201;&#20889;
      &#30340;Java&#20195;&#30721;&#23601;&#26159;&#22312;&#25511;&#21046;&#22120;&#19978;&#20844;&#24067;&#19968;&#20010;&#24418;&#21442;&#20026;MyComponent&#30340;setter&#26041;&#27861;&#12290;&#36825;&#26679;&#23601;&#21487;&#20197;
      &#25226;&#36825;&#20010;&#24341;&#29992;&#20445;&#23384;&#22312;&#25511;&#21046;&#22120;&#30340;&#19968;&#20010;&#23454;&#20363;&#21464;&#37327;&#20013;&#12290;</p><pre class="programlisting">private MyComponent myComponent;

public void setMyComponent(MyComponent myComponent) {
    this.myComponent = myComponent;
}</pre><p>&#28982;&#21518;&#25105;&#20204;&#21487;&#20197;&#22312;&#25511;&#21046;&#22120;&#30340;&#20219;&#24847;&#19994;&#21153;&#26041;&#27861;&#37324;&#38754;&#20351;&#29992;&#36825;&#20010;&#23454;&#20363;&#21464;&#37327;&#12290;&#20551;&#35774;&#25105;&#20204;&#29616;&#22312;
      &#20174;Spring&#30340;ApplicationContext&#25110;BeanFactory&#33719;&#24471;&#35813;&#25511;&#21046;&#22120;&#23545;&#35937;&#65292;&#25105;&#20204;&#23601;&#21487;&#20197;&#22312;
      &#21516;&#19968;&#20010;&#19978;&#19979;&#25991;&#20013;&#37197;&#32622;&#19968;&#20010;<tt class="literal">LocalStatelessSessionProxyFactoryBean</tt>
      &#30340;&#23454;&#20363;&#65292;&#23427;&#23558;&#20316;&#20026;EJB&#32452;&#20214;&#30340;&#20195;&#29702;&#23545;&#35937;&#12290;&#36825;&#20010;&#20195;&#29702;&#23545;&#35937;&#30340;&#37197;&#32622;&#21644;&#25511;&#21046;&#22120;&#30340;&#23646;&#24615;
      <tt class="literal">myComponent</tt>&#30340;&#35774;&#32622;&#26159;&#20351;&#29992;&#19968;&#20010;&#37197;&#32622;&#39033;&#23436;&#25104;&#30340;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="myComponent"
      class="org.springframework.ejb.access.LocalStatelessSessionProxyFactoryBean"&gt;
    &lt;property name="jndiName"&gt;&lt;value&gt;myComponent&lt;/value&gt;&lt;/property&gt;
    &lt;property name="businessInterface"&gt;&lt;value&gt;com.mycom.MyComponent&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="myController" class = "com.mycom.myController"&gt;
    &lt;property name="myComponent"&gt;&lt;ref bean="myComponent"/&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>&#36825;&#20123;&#30475;&#20284;&#31616;&#21333;&#30340;&#20195;&#30721;&#32972;&#21518;&#38544;&#34255;&#20102;&#24456;&#22810;&#22797;&#26434;&#30340;&#22788;&#29702;&#65292;&#27604;&#22914;&#40664;&#40664;&#24037;&#20316;&#30340;Spring 
      AOP&#26694;&#26550;&#65292;&#25105;&#20204;&#29978;&#33267;&#19981;&#24517;&#30693;&#36947;&#36825;&#20123;&#27010;&#24565;&#65292;&#19968;&#26679;&#21487;&#20197;&#20139;&#29992;&#23427;&#30340;&#32467;&#26524;&#12290;Bean <tt class="literal">myComponent</tt>
      &#30340;&#23450;&#20041;&#20013;&#21019;&#24314;&#20102;&#19968;&#20010;&#35813;EJB&#32452;&#20214;&#30340;&#20195;&#29702;&#23545;&#35937;&#65292;&#23427;&#23454;&#29616;&#20102;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#12290;&#36825;&#20010;EJB&#32452;&#20214;&#30340;
      &#26412;&#22320;Home&#23545;&#35937;&#22312;&#21551;&#21160;&#30340;&#26102;&#20505;&#23601;&#34987;&#25918;&#21040;&#20102;&#32531;&#23384;&#20013;&#65292;&#25152;&#20197;&#21482;&#38656;&#35201;&#25191;&#34892;&#19968;&#27425;JNDI&#26597;&#25214;&#21363;&#21487;&#12290;
      &#27599;&#24403;EJB&#32452;&#20214;&#34987;&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;&#36825;&#20010;&#20195;&#29702;&#23545;&#35937;&#23601;&#35843;&#29992;&#26412;&#22320;EJB&#32452;&#20214;&#30340;create&#26041;&#27861;&#65292;&#24182;&#35843;&#29992;
      &#35813;EJB&#32452;&#20214;&#30340;&#30456;&#24212;&#30340;&#19994;&#21153;&#26041;&#27861;&#12290;</p><p>&#22312;Bean <tt class="literal">myController</tt>&#30340;&#23450;&#20041;&#20013;&#65292;&#25511;&#21046;&#22120;&#31867;&#30340;&#23646;&#24615;
      <tt class="literal">myController</tt>&#30340;&#20540;&#34987;&#35774;&#32622;&#20026;&#19978;&#38754;&#20195;&#29702;&#23545;&#35937;&#12290;</p><p>&#36825;&#26679;&#30340;EJB&#32452;&#20214;&#35775;&#38382;&#26041;&#24335;&#22823;&#22823;&#31616;&#21270;&#20102;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#65306;Web&#23618;&#65288;&#25110;&#20854;&#20182;EJB&#23458;&#25143;&#31471;&#65289;
      &#30340;&#20195;&#30721;&#19981;&#20877;&#20381;&#36182;&#20110;EJB&#32452;&#20214;&#30340;&#20351;&#29992;&#12290;&#22914;&#26524;&#25105;&#20204;&#24819;&#25226;&#36825;&#20010;EJB&#30340;&#24341;&#29992;&#26367;&#25442;&#20026;&#19968;&#20010;POJO&#65292;
      &#25110;&#32773;&#26159;&#27169;&#25311;&#29992;&#30340;&#23545;&#35937;&#25110;&#20854;&#20182;&#27979;&#35797;&#32452;&#20214;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#31616;&#21333;&#22320;&#20462;&#25913;Bean <tt class="literal">myComponent</tt>
      &#30340;&#23450;&#20041;&#20013;&#20165;&#20165;&#19968;&#34892;Java&#20195;&#30721;&#65292;&#27492;&#22806;&#65292;&#25105;&#20204;&#20063;&#19981;&#20877;&#38656;&#35201;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#32534;&#20889;&#20219;&#20309;JNDI&#26597;&#25214;
      &#25110;&#20854;&#23427;EJB&#30456;&#20851;&#30340;&#20195;&#30721;&#12290;</p><p>&#35780;&#27979;&#21644;&#23454;&#38469;&#24212;&#29992;&#20013;&#30340;&#32463;&#39564;&#34920;&#26126;&#65292;&#36825;&#31181;&#26041;&#24335;&#30340;&#24615;&#33021;&#36127;&#33655;&#26497;&#23567;&#65292;&#65288;&#23613;&#31649;&#20854;&#20013;
      &#20351;&#29992;&#20102;&#21453;&#23556;&#26041;&#24335;&#20197;&#35843;&#29992;&#30446;&#26631;EJB&#32452;&#20214;&#30340;&#26041;&#27861;&#65289;&#65292;&#36890;&#24120;&#30340;&#20351;&#29992;&#20013;&#25105;&#20204;&#20960;&#20046;&#35273;&#23519;&#19981;&#20986;&#12290;&#35831;&#35760;&#20303;
      &#25105;&#20204;&#24182;&#19981;&#24819;&#39057;&#32321;&#22320;&#35843;&#29992;EJB&#32452;&#20214;&#30340;&#24213;&#23618;&#26041;&#27861;&#65292;&#34429;&#28982;&#22914;&#27492;&#65292;&#26377;&#20123;&#24615;&#33021;&#20195;&#20215;&#26159;&#19982;&#24212;&#29992;&#26381;&#21153;&#22120;
      &#20013;EJB&#30340;&#22522;&#30784;&#26694;&#26550;&#30456;&#20851;&#30340;&#12290;</p><p>&#20851;&#20110;JNDI&#26597;&#25214;&#26377;&#19968;&#28857;&#38656;&#35201;&#27880;&#24847;&#12290;&#22312;Bean&#23481;&#22120;&#20013;&#65292;&#36825;&#20010;&#31867;&#36890;&#24120;&#26368;&#22909;&#29992;&#20316;&#21333;&#20214;
      &#65288;&#27809;&#29702;&#30001;&#20351;&#20043;&#25104;&#20026;&#21407;&#22411;&#65289;&#12290;&#19981;&#36807;&#65292;&#22914;&#26524;&#36825;&#20010;Bean&#23481;&#22120;&#20250;&#39044;&#20808;&#23454;&#20363;&#21270;&#21333;&#20214;&#65288;&#31867;&#20284;XML 
      ApplicationContext&#30340;&#21464;&#20307;&#30340;&#34892;&#20026;&#65289;&#65292;&#22914;&#26524;&#22312;EJB&#23481;&#22120;&#36733;&#20837;&#30446;&#26631;EJB&#21069;&#36733;&#20837;bean&#23481;&#22120;&#65292;
      &#25105;&#20204;&#23601;&#21487;&#33021;&#20250;&#36935;&#21040;&#38382;&#39064;&#12290;&#22240;&#20026;JNDI&#26597;&#25214;&#20250;&#22312;&#35813;&#31867;&#30340;init&#26041;&#27861;&#20013;&#34987;&#25191;&#34892;&#24182;&#19988;&#32531;&#23384;&#32467;&#26524;&#65292;
      &#36825;&#26679;&#23601;&#23548;&#33268;&#35813;EJB&#19981;&#33021;&#34987;&#32465;&#23450;&#21040;&#30446;&#26631;&#20301;&#32622;&#12290;&#35299;&#20915;&#26041;&#26696;&#23601;&#26159;&#19981;&#35201;&#39044;&#20808;&#23454;&#20363;&#21270;&#36825;&#20010;&#24037;&#21378;&#23545;&#35937;&#65292;
      &#32780;&#20801;&#35768;&#23427;&#22312;&#31532;&#19968;&#27425;&#29992;&#21040;&#30340;&#26102;&#20505;&#20877;&#21019;&#24314;&#65292;&#22312;XML&#23481;&#22120;&#20013;&#65292;&#36825;&#26159;&#36890;&#36807;&#23646;&#24615;
      <tt class="literal">lazy-init</tt>&#26469;&#25511;&#21046;&#30340;&#12290;</p><p>&#23613;&#31649;&#22823;&#37096;&#20998;Spring&#30340;&#29992;&#25143;&#19981;&#20250;&#23545;&#36825;&#20123;&#24863;&#20852;&#36259;&#65292;&#20294;&#37027;&#20123;&#23545;EJB&#36827;&#34892;AOP&#30340;&#20855;&#20307;&#24212;&#29992;
      &#30340;&#29992;&#25143;&#21017;&#20250;&#24819;&#30475;&#30475;<tt class="literal">LocalSlsbInvokerInterceptor</tt>&#12290;
      </p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="ejb-access-remote"></a>15.1.3.&nbsp;&#35775;&#38382;&#36828;&#31243;&#30340;&#26080;&#29366;&#24577;Session Bean&#65288;SLSB&#65289;</h3></div></div><div></div></div><p>&#22522;&#26412;&#19978;&#35775;&#38382;&#36828;&#31243;EJB&#19982;&#35775;&#38382;&#26412;&#22320;EJB&#24046;&#21035;&#19981;&#22823;&#65292;&#38500;&#20102;&#21069;&#32773;&#20351;&#29992;&#30340;&#26159;
      <tt class="literal">SimpleRemoteStatelessSessionProxyFactoryBean</tt>&#12290;&#24403;&#28982;&#65292;
      &#26080;&#35770;&#26159;&#21542;&#20351;&#29992;Spring&#65292;&#36828;&#31243;&#35843;&#29992;&#30340;&#35821;&#20041;&#37117;&#30456;&#21516;&#65292;&#19981;&#36807;&#65292;&#23545;&#20110;&#20351;&#29992;&#30340;&#22330;&#26223;&#21644;&#38169;&#35823;&#22788;&#29702;
      &#26469;&#35828;&#65292;&#35843;&#29992;&#21478;&#22806;&#19968;&#21488;&#35745;&#31639;&#26426;&#19978;&#19981;&#21516;&#34394;&#25311;&#26426;&#20013;&#30340;&#23545;&#35937;&#30340;&#26041;&#27861;&#20854;&#22788;&#29702;&#26377;&#25152;&#19981;&#21516;&#12290;</p><p>&#19982;&#19981;&#20351;&#29992;Spring&#26041;&#24335;&#30340;EJB&#23458;&#25143;&#31471;&#30456;&#27604;&#65292;Spring&#30340;EJB&#23458;&#25143;&#31471;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;
      &#22909;&#22788;&#12290;&#36890;&#24120;&#22914;&#26524;&#23458;&#25143;&#31471;&#20195;&#30721;&#38543;&#24847;&#22312;&#26412;&#22320;EJB&#21644;&#36828;&#31243;EJB&#30340;&#35843;&#29992;&#20043;&#38388;&#26469;&#22238;&#20999;&#25442;&#65292;&#23601;&#26377;
      &#19968;&#20010;&#38382;&#39064;&#12290;&#36825;&#26159;&#22240;&#20026;&#36828;&#31243;&#25509;&#21475;&#30340;&#26041;&#27861;&#38656;&#35201;&#22768;&#26126;&#20854;&#20250;&#25243;&#20986;<tt class="literal">RemoteException</tt>
      &#65292;&#28982;&#21518;&#23458;&#25143;&#31471;&#20195;&#30721;&#24517;&#39035;&#22788;&#29702;&#36825;&#31181;&#24322;&#24120;&#65292;&#20294;&#26159;&#26412;&#22320;&#25509;&#21475;&#30340;&#26041;&#27861;&#21364;&#19981;&#38656;&#35201;&#36825;&#26679;&#12290;
      &#22914;&#26524;&#35201;&#25226;&#38024;&#23545;&#26412;&#22320;EJB&#30340;&#20195;&#30721;&#25913;&#20026;&#35775;&#38382;&#36828;&#31243;EJB&#65292;&#23601;&#38656;&#35201;&#20462;&#25913;&#23458;&#25143;&#31471;&#20195;&#30721;&#65292;&#22686;&#21152;
      &#23545;<tt class="literal">RemoteException</tt>&#30340;&#22788;&#29702;&#65292;&#21453;&#20043;&#23601;&#38656;&#35201;&#21435;&#25481;&#36825;&#26679;&#30340;
      &#24322;&#24120;&#22788;&#29702;&#12290;&#20351;&#29992;Spring &#30340;&#36828;&#31243;EJB&#20195;&#29702;&#65292;&#25105;&#20204;&#23601;&#19981;&#20877;&#38656;&#35201;&#22312;&#19994;&#21153;&#26041;&#27861;&#25509;&#21475;&#21644;EJB&#30340;
      &#20195;&#30721;&#23454;&#29616;&#20013;&#22768;&#26126;&#20250;&#25243;&#20986;<tt class="literal">RemoteException</tt>&#65292;&#32780;&#26159;&#23450;&#20041;&#19968;&#20010;
      &#30456;&#20284;&#30340;&#36828;&#31243;&#25509;&#21475;&#65292;&#21807;&#19968;&#19981;&#21516;&#23601;&#26159;&#23427;&#25243;&#20986;&#30340;&#26159;<tt class="literal">RemoteAccessException</tt>&#65292;
      &#28982;&#21518;&#20132;&#32473;&#20195;&#29702;&#23545;&#35937;&#21435;&#21160;&#24577;&#30340;&#21327;&#35843;&#36825;&#20004;&#20010;&#25509;&#21475;&#12290;&#20063;&#23601;&#26159;&#35828;&#65292;&#23458;&#25143;&#31471;&#20195;&#30721;&#19981;&#20877;&#38656;&#35201;&#19982;
      <tt class="literal">RemoteException</tt>&#36825;&#20010;&#26174;&#24335;&#65288;checked&#65289;&#24322;&#24120;&#25171;&#20132;&#36947;&#65292;&#23454;&#38469;&#36816;&#34892;&#20013;
      &#25152;&#26377;&#25243;&#20986;&#30340;&#24322;&#24120;<tt class="literal">RemoteException</tt>&#37117;&#20250;&#34987;&#25429;&#33719;&#24182;&#36716;&#25442;&#25104;&#19968;&#20010;
      &#38544;&#24335;&#65288;non-checked&#65289;&#30340;<tt class="literal">RemoteAccessException</tt>&#65292;&#23427;&#26159;
      <tt class="literal">RuntimeException</tt>&#30340;&#19968;&#20010;&#23376;&#31867;&#12290;&#36825;&#26679;&#30446;&#26631;&#26381;&#21153;&#31471;&#23601;&#21487;&#20197;
      &#22312;&#26412;&#22320;EJB&#25110;&#36828;&#31243;EJB&#65288;&#29978;&#33267;POJO&#65289;&#20043;&#38388;&#38543;&#24847;&#22320;&#20999;&#25442;&#65292;&#23458;&#25143;&#31471;&#19981;&#20877;&#38656;&#35201;&#20851;&#24515;&#29978;&#33267;
      &#26681;&#26412;&#19981;&#20250;&#35273;&#23519;&#21040;&#36825;&#31181;&#20999;&#25442;&#12290;&#24403;&#28982;&#65292;&#36825;&#20123;&#37117;&#26159;&#21487;&#36873;&#30340;&#65292;&#25105;&#20204;&#24182;&#19981;&#38459;&#27490;&#22312;&#19994;&#21153;&#25509;&#21475;&#20013;&#22768;&#26126;
      &#24322;&#24120;<tt class="literal">RemoteExceptions</tt>&#12290;</p></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ejb-implementation"></a>15.2.&nbsp;&#20351;&#29992;Spring&#25552;&#20379;&#30340;&#36741;&#21161;&#31867;&#23454;&#29616;EJB&#32452;&#20214;</h2></div></div><div></div></div><p>Spring&#20063;&#25552;&#20379;&#20102;&#19968;&#20123;&#36741;&#21161;&#31867;&#26469;&#20026;EJB&#32452;&#20214;&#30340;&#23454;&#29616;&#25552;&#20379;&#20415;&#21033;&#12290;&#23427;&#20204;&#26159;&#20026;&#20102;&#20513;&#23548;&#19968;&#20123;
    &#22909;&#30340;&#23454;&#36341;&#32463;&#39564;&#65292;&#27604;&#22914;&#25226;&#19994;&#21153;&#36923;&#36753;&#25918;&#22312;&#22312;EJB&#23618;&#20043;&#21518;&#30340;POJO&#20013;&#23454;&#29616;&#65292;&#21482;&#25226;&#20107;&#21153;&#38548;&#31163;&#21644;
    &#36828;&#31243;&#35843;&#29992;&#36825;&#20123;&#32844;&#36131;&#30041;&#32473;EJB&#12290;</p><p>&#35201;&#23454;&#29616;&#19968;&#20010;&#26080;&#29366;&#24577;&#25110;&#26377;&#29366;&#24577;&#30340;Session Bean&#65292;&#25110;&#28040;&#24687;&#39537;&#21160;Bean&#65292;&#25105;&#20204;&#30340;&#23454;&#29616;
    &#21487;&#20197;&#32487;&#25215;&#20998;&#21035;&#32487;&#25215;<tt class="literal">AbstractStatelessSessionBean</tt>&#65292;
    <tt class="literal">AbstractStatefulSessionBean</tt>&#65292;&#21644;
    <tt class="literal">AbstractMessageDrivenBean</tt>/<tt class="literal">AbstractJmsMessageDrivenBean</tt>
    </p><p>&#32771;&#34385;&#36825;&#20010;&#20363;&#23376;&#65306;&#25105;&#20204;&#25226;&#26080;&#29366;&#24577;Session Bean&#30340;&#23454;&#29616;&#22996;&#25176;&#32473;&#26222;&#36890;&#30340;Java&#26381;&#21153;&#23545;&#35937;&#12290;
    &#19994;&#21153;&#25509;&#21475;&#30340;&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">public interface MyComponent {
    public void myMethod(...);
    ...
}</pre><p>&#36825;&#26159;&#31616;&#21333;Java&#23545;&#35937;&#23454;&#29616;&#26041;&#24335;&#30340;&#31867;&#65306;</p><pre class="programlisting">public class MyComponentImpl implements MyComponent {
    public String myMethod(...) {
        ...
    }
    ...
}</pre><p>&#26368;&#21518;&#26159;&#26080;&#29366;&#24577;Session Bean&#33258;&#36523;&#65306;</p><pre class="programlisting">public class MyComponentEJB implements extends AbstractStatelessSessionBean
        implements MyComponent {

    MyComponent _myComp;

    /**
     * Obtain our POJO service object from the BeanFactory/ApplicationContext
     * @see org.springframework.ejb.support.AbstractStatelessSessionBean#onEjbCreate()
     */
    protected void onEjbCreate() throws CreateException {
        _myComp = (MyComponent) getBeanFactory().getBean(
            ServicesConstants.CONTEXT_MYCOMP_ID);
    }

    // for business method, delegate to POJO service impl.
    public String myMethod(...) {
        return _myComp.myMethod(...);
    }
    ...
}</pre><p>Spring&#20026;&#25903;&#25345;EJB&#32780;&#25552;&#20379;&#30340;&#36825;&#20123;&#22522;&#31867;&#40664;&#35748;&#24773;&#20917;&#19979;&#20250;&#21019;&#24314;&#24182;&#36733;&#20837;&#19968;&#20010;BeanFactory
    &#65288;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#23427;&#26159;ApplicationContext&#30340;&#23376;&#31867;&#65289;&#65292;&#20316;&#20026;&#20854;&#29983;&#21629;&#21608;&#26399;&#30340;&#19968;&#37096;&#20998;&#65292;
    &#20379;EJB&#20351;&#29992;&#65288;&#27604;&#22914;&#20687;&#19978;&#38754;&#30340;&#20195;&#30721;&#37027;&#26679;&#29992;&#26469;&#33719;&#21462;POJO&#26381;&#21153;&#23545;&#35937;&#65289;&#12290;&#36733;&#20837;&#30340;&#24037;&#20316;&#26159;&#36890;&#36807;
    &#19968;&#20010;&#31574;&#30053;&#23545;&#35937;&#23436;&#25104;&#30340;&#65292;&#23427;&#26159;<tt class="literal">BeanFactoryLocator</tt>&#30340;&#23376;&#31867;&#12290;
    &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#23454;&#38469;&#20351;&#29992;&#30340;<tt class="literal">BeanFactoryLocator</tt>&#30340;&#23454;&#29616;&#31867;&#26159;
    <tt class="literal">ContextJndiBeanFactoryLocator</tt>&#65292;&#23427;&#26681;&#25454;&#19968;&#20010;JNDI&#29615;&#22659;&#21464;&#37327;
    &#26469;&#21019;&#24314;&#19968;&#20010;ApplicationContext&#23545;&#35937;&#65288;&#36825;&#37324;&#26159;EJB&#31867;&#65292;&#36335;&#24452;&#26159;
    <tt class="literal">java:comp/env/ejb/BeanFactoryPath</tt>&#65289;&#12290;&#22914;&#26524;&#38656;&#35201;&#25913;&#21464;
    BeanFactory&#25110;ApplicationContext&#30340;&#36733;&#20837;&#31574;&#30053;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;&#23376;&#31867;&#20013;&#37325;&#23450;&#20041;&#20102;&#30340;
    <tt class="literal">setSessionContext()</tt>&#26041;&#27861;&#25110;&#20855;&#20307;EJB&#23376;&#31867;&#30340;&#26500;&#36896;&#20989;&#25968;&#20013;&#35843;&#29992;
    <tt class="literal">setBeanFactoryLocator()</tt>&#26041;&#27861;&#26469;&#25913;&#21464;&#40664;&#35748;&#20351;&#29992;&#30340;
    <tt class="literal">BeanFactoryLocator</tt>&#23454;&#29616;&#31867;&#12290;&#20855;&#20307;&#32454;&#33410;&#35831;&#21442;&#32771;JavaDoc&#12290;</p><p>&#22914;JavaDoc&#20013;&#25152;&#36848;&#65292;&#26377;&#29366;&#24577;Session Bean&#22312;&#20854;&#29983;&#21629;&#21608;&#26399;&#20013;&#21487;&#33021;&#20250;&#34987;&#38045;&#21270;&#24182;&#37325;&#26032;&#28608;&#27963;&#65292;
    &#22914;&#26524;&#26159;&#19981;&#21487;&#24207;&#21015;&#21270;&#30340;BeanFactory&#25110;ApplicationContext&#65292;&#30001;&#20110;&#23427;&#20204;&#19981;&#20250;&#34987;EJB&#23481;&#22120;&#20445;&#23384;&#65292;
    &#25152;&#20197;&#36824;&#38656;&#35201;&#25163;&#21160;&#22312;<tt class="literal">ejbPassivate</tt>&#21644;<tt class="literal">ejbActivate</tt>
    &#36825;&#20004;&#20010;&#26041;&#27861;&#20013;&#20998;&#21035;&#35843;&#29992;<tt class="literal">unloadBeanFactory()</tt>&#21644;<tt class="literal">loadBeanFactory</tt>&#65292;
    &#25165;&#33021;&#22312;&#38045;&#21270;&#25110;&#28608;&#27963;&#30340;&#26102;&#20505;&#21368;&#36733;&#25110;&#36733;&#20837;&#12290;</p><p>&#26377;&#20123;&#24773;&#20917;&#19979;&#65292;&#35201;&#36733;&#20837;ApplicationContext&#20197;&#20351;&#29992;EJB&#32452;&#20214;&#65292;
    <tt class="literal">ContextJndiBeanFactoryLocator</tt>&#30340;&#40664;&#35748;&#23454;&#29616;&#22522;&#26412;&#19978;&#36275;&#22815;&#20102;&#65292;
    &#19981;&#36807;&#65292;&#24403;ApplicationContext&#38656;&#35201;&#36733;&#20837;&#22810;&#20010;bean&#65292;&#25110;&#36825;&#20123;bean&#21021;&#22987;&#21270;&#25152;&#38656;&#30340;&#26102;&#38388;&#25110;&#20869;&#23384;
    &#24456;&#22810;&#30340;&#26102;&#20505;&#65288;&#20363;&#22914;Hibernate&#30340;SessionFactory&#30340;&#21021;&#22987;&#21270;&#65289;&#65292;&#23601;&#26377;&#21487;&#33021;&#20986;&#38382;&#39064;&#65292;&#22240;&#20026;
    &#27599;&#20010;EJB&#32452;&#20214;&#37117;&#26377;&#33258;&#24049;&#30340;&#21103;&#26412;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#29992;&#25143;&#20250;&#24819;&#37325;&#36733;
    <tt class="literal">ContextJndiBeanFactoryLocator</tt>&#30340;&#40664;&#35748;&#23454;&#29616;&#65292;&#24182;&#20351;&#29992;&#20854;&#23427;
    <tt class="literal">BeanFactoryLocator</tt>&#30340;&#21464;&#20307;&#65292;&#20363;&#22914;<tt class="literal">ContextSingleton</tt>
    &#25110;&#32773;<tt class="literal">BeanFactoryLocator</tt>&#65292;&#20182;&#20204;&#21487;&#20197;&#36733;&#20837;&#24182;&#20849;&#20139;&#19968;&#20010;
    BeanFactory&#25110;ApplicationContext&#26469;&#20026;&#22810;&#20010;EJB&#32452;&#20214;&#25110;&#20854;&#23427;&#23458;&#25143;&#31471;&#25152;&#20844;&#29992;&#12290;&#36825;&#26679;&#20570;
    &#30456;&#24403;&#31616;&#21333;&#65292;&#21482;&#38656;&#35201;&#32473;EJB&#28155;&#21152;&#31867;&#20284;&#20110;&#22914;&#19979;&#30340;&#20195;&#30721;&#65306;</p><pre class="programlisting">   /**
    * Override default BeanFactoryLocator implementation
    * 
    * @see javax.ejb.SessionBean#setSessionContext(javax.ejb.SessionContext)
    */
   public void setSessionContext(SessionContext sessionContext) {
       super.setSessionContext(sessionContext);
       setBeanFactoryLocator(ContextSingletonBeanFactoryLocator.getInstance());
       setBeanFactoryLocatorKey(ServicesConstants.PRIMARY_CONTEXT_ID);
   }</pre><p>&#35831;&#21442;&#32771;&#30456;&#24212;&#30340;JavaDoc&#26469;&#33719;&#21462;&#20851;&#20110;<tt class="literal">BeanFactoryLocator</tt>&#65292;
    <tt class="literal">ContextSingleton</tt>&#20197;&#21450;<tt class="literal">BeanFactoryLocator</tt>
    &#30340;&#29992;&#27861;&#30340;&#35814;&#32454;&#20449;&#24687;&#12290;</p><p></p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="jms.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="remoting.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;14&nbsp;&#31456;&nbsp;JMS&#25903;&#25345;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;16&nbsp;&#31456;&nbsp;&#36890;&#36807;Spring&#20351;&#29992;&#36828;&#31243;&#35775;&#38382;&#21644;web&#26381;&#21153;</td></tr></table></div></body></html>