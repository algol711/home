<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>&#31532;&nbsp;5&nbsp;&#31456;&nbsp;Spring AOP: Spring&#20043;&#38754;&#21521;&#26041;&#38754;&#32534;&#31243;</title><link rel="stylesheet" href="../styles/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Spring - Java/J2EE Application Framework"><link rel="up" href="index.html" title="Spring - Java/J2EE Application Framework"><link rel="previous" href="validation.html" title="&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#23646;&#24615;&#32534;&#36753;&#22120;&#65292;&#25968;&#25454;&#32465;&#23450;&#65292;&#26657;&#39564;&#19982;BeanWeapper(Bean&#23553;&#35013;)"><link rel="next" href="aspectj.html" title="&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#38598;&#25104;AspectJ "></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;&nbsp;5&nbsp;&#31456;&nbsp;Spring AOP: Spring&#20043;&#38754;&#21521;&#26041;&#38754;&#32534;&#31243;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="validation.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="aspectj.html">&#19979;&#19968;&#39029;</a></td></tr></table><hr></div><div class="chapter" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title"><a name="aop"></a>&#31532;&nbsp;5&nbsp;&#31456;&nbsp;Spring AOP: Spring&#20043;&#38754;&#21521;&#26041;&#38754;&#32534;&#31243;</h2></div></div><div></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-introduction"></a>5.1.&nbsp;&#27010;&#24565;</h2></div></div><div></div></div><p><span class="emphasis"><em>&#38754;&#21521;&#26041;&#38754;&#32534;&#31243;</em></span>
    (<span class="emphasis"><em>AOP</em></span>) &#25552;&#20379;&#20174;&#21478;&#19968;&#20010;&#35282;&#24230;&#26469;&#32771;&#34385;&#31243;&#24207;&#32467;&#26500;&#20197;&#23436;&#21892;&#38754;&#21521;&#23545;&#35937;&#32534;&#31243;&#65288;OOP&#65289;&#12290; &#38754;&#21521;&#23545;&#35937;&#23558;&#24212;&#29992;&#31243;&#24207;&#20998;&#35299;&#25104;
	&#21508;&#20010;&#23618;&#27425;&#30340;&#23545;&#35937;&#65292;&#32780;AOP&#23558;&#31243;&#24207;&#20998;&#35299;&#25104;&#21508;&#20010;<span class="emphasis"><em>&#26041;&#38754;</em></span> &#25110;&#32773;&#35828; <span class="emphasis"><em>&#20851;&#27880;&#28857;
	</em></span>&#12290; &#36825;&#20351;&#24471;&#21487;&#20197;&#27169;&#22359;&#21270;&#35832;&#22914;&#20107;&#21153;&#31649;&#29702;&#31561;&#36825;&#20123;&#27178;&#20999;&#22810;&#20010;&#23545;&#35937;&#30340;&#20851;&#27880;&#28857;&#12290;(&#36825;&#20123;&#20851;&#27880;&#28857;&#26415;&#35821;&#31216;&#20316;
    <span class="emphasis"><em>&#27178;&#20999;</em></span>&#20851;&#27880;&#28857;&#12290;)</p><p>Spring&#30340;&#19968;&#20010;&#20851;&#38190;&#32452;&#20214;&#23601;&#26159;<span class="emphasis"><em>AOP&#26694;&#26550;</em></span>&#12290; Spring IoC&#23481;&#22120;(BeanFactory
	&#21644;ApplicationContext)&#24182;&#19981;&#20381;&#36182;&#20110;AOP, &#36825;&#24847;&#21619;&#30528;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#20351;&#29992;&#65292;AOP&#20320;&#21487;&#20197;&#19981;&#29992;&#65292;AOP&#23436;&#21892;&#20102;Spring IoC&#65292;&#20351;&#20043;&#25104;&#20026;&#19968;&#20010;&#26377;&#25928;&#30340;&#20013;&#38388;&#20214;&#35299;&#20915;&#26041;&#26696;&#65292;&#12290;</p><p>AOP&#22312;Spring&#20013;&#30340;&#20351;&#29992;:</p><div class="itemizedlist"><ul type="disc"><li><p>&#25552;&#20379;&#22768;&#26126;&#24335;&#20225;&#19994;&#26381;&#21153;&#65292;&#29305;&#21035;&#26159;&#20316;&#20026;EJB&#22768;&#26126;&#24335;&#26381;&#21153;&#30340;&#26367;&#20195;&#21697;&#12290;&#36825;&#20123;&#26381;&#21153;&#20013;&#26368;&#37325;&#35201;&#30340;&#26159;
		<span class="emphasis"><em>&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;</em></span>&#65292;&#36825;&#20010;&#26381;&#21153;&#24314;&#31435;&#22312;Spring&#30340;&#20107;&#21153;&#31649;&#29702;&#25277;&#35937;&#20043;&#19978;&#12290;</p></li><li><p>&#20801;&#35768;&#29992;&#25143;&#23454;&#29616;&#33258;&#23450;&#20041;&#30340;&#26041;&#38754;&#65292;&#29992;AOP&#23436;&#21892;&#20182;&#20204;&#30340;OOP&#30340;&#20351;&#29992;&#12290;</p></li></ul></div><p>&#36825;&#26679;&#20320;&#21487;&#20197;&#25226;Spring AOP&#30475;&#20316;&#26159;&#23545;Spring&#30340;&#34917;&#20805;&#65292;&#23427;&#20351;&#24471;Spring&#19981;&#38656;&#35201;EJB&#23601;&#33021;&#25552;&#20379;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#65307;&#25110;&#32773;
	&#20351;&#29992;Spring AOP&#26694;&#26550;&#30340;&#20840;&#37096;&#21151;&#33021;&#26469;&#23454;&#29616;&#33258;&#23450;&#20041;&#30340;&#26041;&#38754;&#12290;</p><i><span class="remark">&#22914;&#26524;&#20320;&#21482;&#20351;&#29992;&#36890;&#29992;&#30340;&#22768;&#26126;&#24335;&#26381;&#21153;&#25110;&#32773;&#39044;&#20808;&#25171;&#21253;&#30340;&#22768;&#26126;&#24335;&#20013;&#38388;&#20214;&#26381;&#21153;&#22914;pooling&#65292;&#20320;&#21487;&#20197;&#19981;&#30452;&#25509;&#20351;&#29992;
	Spring AOP&#65292;&#24182;&#19988;&#36339;&#36807;&#26412;&#31456;&#30340;&#22823;&#37096;&#20998;&#20869;&#23481;.</span></i><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-defn"></a>5.1.1.&nbsp;AOP&#27010;&#24565;</h3></div></div><div></div></div><p>&#35753;&#25105;&#20204;&#20174;&#23450;&#20041;&#19968;&#20123;&#37325;&#35201;&#30340;AOP&#27010;&#24565;&#24320;&#22987;&#12290;&#36825;&#20123;&#26415;&#35821;&#19981;&#26159;Spring&#29305;&#26377;&#30340;&#12290;&#19981;&#24184;&#30340;&#26159;&#65292;Spring&#30340;&#26415;&#35821;
	  &#19981;&#26159;&#29305;&#21035;&#22320;&#30452;&#35266;&#12290;&#32780;&#19988;&#65292;&#22914;&#26524;Spring&#20351;&#29992;&#33258;&#24049;&#30340;&#26415;&#35821;&#65292;&#36825;&#23558;&#20351;&#20154;&#26356;&#21152;&#36855;&#24785;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#26041;&#38754;&#65288;Aspect&#65289;</em></span>&#65306; &#19968;&#20010;&#20851;&#27880;&#28857;&#30340;&#27169;&#22359;&#21270;&#65292;&#36825;&#20010;&#20851;&#27880;&#28857;&#23454;&#29616;&#21487;&#33021;
		  &#21478;&#22806;&#27178;&#20999;&#22810;&#20010;&#23545;&#35937;&#12290;&#20107;&#21153;&#31649;&#29702;&#26159;J2EE&#24212;&#29992;&#20013;&#19968;&#20010;&#24456;&#22909;&#30340;&#27178;&#20999;&#20851;&#27880;&#28857;&#20363;&#23376;&#12290;&#26041;&#38754;&#29992;Spring&#30340;
		  Advisor&#25110;&#25318;&#25130;&#22120;&#23454;&#29616;&#12290;</p></li><li><p><span class="emphasis"><em>&#36830;&#25509;&#28857;&#65288;Joinpoint&#65289;</em></span>: &#31243;&#24207;&#25191;&#34892;&#36807;&#31243;&#20013;&#26126;&#30830;&#30340;&#28857;&#65292;&#22914;&#26041;&#27861;&#30340;&#35843;
		  &#29992;&#25110;&#29305;&#23450;&#30340;&#24322;&#24120;&#34987;&#25243;&#20986;&#12290;</p></li><li><p><span class="emphasis"><em>&#36890;&#30693;&#65288;Advice&#65289;</em></span>: &#22312;&#29305;&#23450;&#30340;&#36830;&#25509;&#28857;&#65292;AOP&#26694;&#26550;&#25191;&#34892;&#30340;&#21160;&#20316;&#12290;&#21508;&#31181;&#31867;
		  &#22411;&#30340;&#36890;&#30693;&#21253;&#25324;&#8220;around&#8221;&#12289;&#8220;before&#8221;&#21644;&#8220;throws&#8221;&#36890;&#30693;&#12290;&#36890;&#30693;&#31867;&#22411;&#23558;&#22312;&#19979;&#38754;&#35752;&#35770;&#12290;&#35768;&#22810;AOP&#26694;&#26550;
		  &#21253;&#25324;Spring&#37117;&#26159;&#20197;<span class="emphasis"><em>&#25318;&#25130;&#22120;</em></span>&#20570;&#36890;&#30693;&#27169;&#22411;&#65292;&#32500;&#25252;&#19968;&#20010;&#8220;&#22260;&#32469;&#8221;&#36830;&#25509;&#28857;&#30340;&#25318;&#25130;&#22120;
		  &#38142;&#12290;</p></li><li><p><span class="emphasis"><em>&#20999;&#20837;&#28857;&#65288;Pointcut&#65289;</em></span>: &#25351;&#23450;&#19968;&#20010;&#36890;&#30693;&#23558;&#34987;&#24341;&#21457;&#30340;&#19968;&#31995;&#21015;&#36830;&#25509;&#28857;
		  &#30340;&#38598;&#21512;&#12290;AOP&#26694;&#26550;&#24517;&#39035;&#20801;&#35768;&#24320;&#21457;&#32773;&#25351;&#23450;&#20999;&#20837;&#28857;&#65306;&#20363;&#22914;&#65292;&#20351;&#29992;&#27491;&#21017;&#34920;&#36798;&#24335;&#12290;</p></li><li><p><span class="emphasis"><em>&#24341;&#20837;&#65288;Introduction&#65289;</em></span>: &#28155;&#21152;&#26041;&#27861;&#25110;&#23383;&#27573;&#21040;&#34987;&#36890;&#30693;&#30340;&#31867;&#12290;
		  Spring&#20801;&#35768;&#24341;&#20837;&#26032;&#30340;&#25509;&#21475;&#21040;&#20219;&#20309;&#34987;&#36890;&#30693;&#30340;&#23545;&#35937;&#12290;&#20363;&#22914;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#24341;&#20837;&#20351;&#20219;&#20309;&#23545;&#35937;&#23454;&#29616;<tt class="literal">
		  IsModified</tt>&#25509;&#21475;&#65292;&#26469;&#31616;&#21270;&#32531;&#23384;&#12290;</p></li><li><p><span class="emphasis"><em>&#30446;&#26631;&#23545;&#35937;&#65288;Target Object&#65289;</em></span>: &#21253;&#21547;&#36830;&#25509;&#28857;&#30340;&#23545;&#35937;&#12290;&#20063;&#34987;&#31216;&#20316;
          <span class="emphasis"><em>&#34987;&#36890;&#30693;</em></span>&#25110;<span class="emphasis"><em>&#34987;&#20195;&#29702;</em></span>&#23545;&#35937;&#12290;</p></li><li><p><span class="emphasis"><em>AOP&#20195;&#29702;&#65288;AOP Proxy&#65289;</em></span>: AOP&#26694;&#26550;&#21019;&#24314;&#30340;&#23545;&#35937;&#65292;&#21253;&#21547;&#36890;&#30693;&#12290;
		  &#22312;Spring&#20013;&#65292;AOP&#20195;&#29702;&#21487;&#20197;&#26159;JDK&#21160;&#24577;&#20195;&#29702;&#25110;&#32773;CGLIB&#20195;&#29702;&#12290;</p></li><li><p><span class="emphasis"><em>&#32455;&#20837;&#65288;Weaving&#65289;</em></span>: &#32452;&#35013;&#26041;&#38754;&#26469;&#21019;&#24314;&#19968;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#12290;&#36825;&#21487;&#20197;&#22312;&#32534;&#35793;&#26102;
		  &#23436;&#25104;&#65288;&#20363;&#22914;&#20351;&#29992;AspectJ&#32534;&#35793;&#22120;&#65289;&#65292;&#20063;&#21487;&#20197;&#22312;&#36816;&#34892;&#26102;&#23436;&#25104;&#12290;Spring&#21644;&#20854;&#20182;&#32431;Java AOP&#26694;&#26550;&#19968;&#26679;&#65292;
		  &#22312;&#36816;&#34892;&#26102;&#23436;&#25104;&#32455;&#20837;&#12290;</p></li></ul></div><p>&#21508;&#31181;&#36890;&#30693;&#31867;&#22411;&#21253;&#25324;:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>Around&#36890;&#30693;</em></span>: &#21253;&#22260;&#19968;&#20010;&#36830;&#25509;&#28857;&#30340;&#36890;&#30693;&#65292;&#22914;&#26041;&#27861;&#35843;&#29992;&#12290;&#36825;&#26159;&#26368;
		  &#24378;&#22823;&#30340;&#36890;&#30693;&#12290;Aroud&#36890;&#30693;&#22312;&#26041;&#27861;&#35843;&#29992;&#21069;&#21518;&#23436;&#25104;&#33258;&#23450;&#20041;&#30340;&#34892;&#20026;&#12290;&#23427;&#20204;&#36127;&#36131;&#36873;&#25321;&#32487;&#32493;&#25191;&#34892;&#36830;&#25509;&#28857;&#25110;&#36890;&#36807;
		  &#36820;&#22238;&#23427;&#20204;&#33258;&#24049;&#30340;&#36820;&#22238;&#20540;&#25110;&#25243;&#20986;&#24322;&#24120;&#26469;&#30701;&#36335;&#25191;&#34892;&#12290;</p></li><li><p><span class="emphasis"><em>Before&#36890;&#30693;</em></span>: &#22312;&#19968;&#20010;&#36830;&#25509;&#28857;&#20043;&#21069;&#25191;&#34892;&#30340;&#36890;&#30693;&#65292;&#20294;&#36825;&#20010;&#36890;&#30693;
		  &#19981;&#33021;&#38459;&#27490;&#36830;&#25509;&#28857;&#21069;&#30340;&#25191;&#34892;&#65288;&#38500;&#38750;&#23427;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65289;&#12290;</p></li><li><p><span class="emphasis"><em>Throws&#36890;&#30693;</em></span>: &#22312;&#26041;&#27861;&#25243;&#20986;&#24322;&#24120;&#26102;&#25191;&#34892;&#30340;&#36890;&#30693;&#12290;Spring&#25552;&#20379;
		  &#24378;&#31867;&#22411;&#30340;Throws&#36890;&#30693;&#65292;&#22240;&#27492;&#20320;&#21487;&#20197;&#20070;&#20889;&#20195;&#30721;&#25429;&#33719;&#24863;&#20852;&#36259;&#30340;&#24322;&#24120;&#65288;&#21644;&#23427;&#30340;&#23376;&#31867;&#65289;&#65292;&#19981;&#38656;&#35201;&#20174;Throwable
		  &#25110;Exception&#24378;&#21046;&#31867;&#22411;&#36716;&#25442;&#12290;</p></li><li><p><span class="emphasis"><em>After returning&#36890;&#30693;</em></span>: &#22312;&#36830;&#25509;&#28857;&#27491;&#24120;&#23436;&#25104;&#21518;&#25191;&#34892;&#30340;&#36890;&#30693;&#65292;
		  &#20363;&#22914;&#65292;&#19968;&#20010;&#26041;&#27861;&#27491;&#24120;&#36820;&#22238;&#65292;&#27809;&#26377;&#25243;&#20986;&#24322;&#24120;&#12290;</p></li></ul></div><p>Around&#36890;&#30693;&#26159;&#26368;&#36890;&#29992;&#30340;&#36890;&#30693;&#31867;&#22411;&#12290;&#22823;&#37096;&#20998;&#22522;&#20110;&#25318;&#25130;&#30340;AOP&#26694;&#26550;&#65292;&#22914;Nanning&#21644;JBoss4&#65292;&#21482;&#25552;&#20379;
	  Around&#36890;&#30693;&#12290;</p><p>&#22914;&#21516;AspectJ&#65292;Spring&#25552;&#20379;&#25152;&#26377;&#31867;&#22411;&#30340;&#36890;&#30693;&#65292;&#25105;&#20204;&#25512;&#33616;&#20320;&#20351;&#29992;&#26368;&#20026;&#21512;&#36866;&#30340;&#36890;&#30693;&#31867;&#22411;&#26469;&#23454;&#29616;&#38656;
	  &#35201;&#30340;&#34892;&#20026;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#21482;&#26159;&#38656;&#35201;&#29992;&#19968;&#20010;&#26041;&#27861;&#30340;&#36820;&#22238;&#20540;&#26469;&#26356;&#26032;&#32531;&#23384;&#65292;&#20320;&#26368;&#22909;&#23454;&#29616;&#19968;&#20010;after returning
	  &#36890;&#30693;&#32780;&#19981;&#26159;around&#36890;&#30693;&#65292;&#34429;&#28982;around&#36890;&#30693;&#20063;&#33021;&#23436;&#25104;&#21516;&#26679;&#30340;&#20107;&#24773;&#12290;&#20351;&#29992;&#26368;&#21512;&#36866;&#30340;&#36890;&#30693;&#31867;&#22411;&#20351;&#32534;&#31243;&#27169;&#22411;&#21464;
	  &#24471;&#31616;&#21333;&#65292;&#24182;&#33021;&#20943;&#23569;&#28508;&#22312;&#38169;&#35823;&#12290;&#20363;&#22914;&#20320;&#19981;&#38656;&#35201;&#35843;&#29992;&#22312;around&#36890;&#30693;&#20013;&#25152;&#38656;&#20351;&#29992;&#30340;&#30340;MethodInvocation&#30340;
	  <tt class="literal">proceed()</tt>&#26041;&#27861;&#65292;&#22240;&#27492;&#23601;&#35843;&#29992;&#22833;&#36133;&#12290;</p><p>&#20999;&#20837;&#28857;&#30340;&#27010;&#24565;&#26159;AOP&#30340;&#20851;&#38190;&#65292;&#20351;AOP&#21306;&#21035;&#20110;&#20854;&#23427;&#20351;&#29992;&#25318;&#25130;&#30340;&#25216;&#26415;&#12290;&#20999;&#20837;&#28857;&#20351;&#36890;&#30693;&#29420;&#31435;&#20110;OO&#30340;
	  &#23618;&#27425;&#36873;&#23450;&#30446;&#26631;&#12290;&#20363;&#22914;&#65292;&#25552;&#20379;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#30340;around&#36890;&#30693;&#21487;&#20197;&#34987;&#24212;&#29992;&#21040;&#36328;&#36234;&#22810;&#20010;&#23545;&#35937;&#30340;&#19968;&#32452;&#26041;&#27861;&#19978;&#12290;
	  &#22240;&#27492;&#20999;&#20837;&#28857;&#26500;&#25104;&#20102;AOP&#30340;&#32467;&#26500;&#35201;&#32032;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-spring-defn"></a>5.1.2.&nbsp;Spring AOP&#30340;&#21151;&#33021;</h3></div></div><div></div></div><p>Spring AOP&#29992;&#32431;Java&#23454;&#29616;&#12290;&#23427;&#19981;&#38656;&#35201;&#29305;&#21035;&#30340;&#32534;&#35793;&#36807;&#31243;&#12290;Spring AOP&#19981;&#38656;&#35201;&#25511;&#21046;&#31867;&#35013;&#36733;&#22120;&#23618;&#27425;&#65292;
	  &#22240;&#27492;&#36866;&#29992;&#20110;J2EE web&#23481;&#22120;&#25110;&#24212;&#29992;&#26381;&#21153;&#22120;&#12290;</p><p>Spring&#30446;&#21069;&#25903;&#25345;&#25318;&#25130;&#26041;&#27861;&#35843;&#29992;&#12290;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#22120;&#27809;&#26377;&#23454;&#29616;&#65292;&#34429;&#28982;&#21152;&#20837;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#22120;&#25903;&#25345;&#24182;&#19981;&#30772;&#22351;
	  Spring AOP&#26680;&#24515;API&#12290;</p><i><span class="remark">&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#22120;&#22312;&#36829;&#21453;OO&#23553;&#35013;&#21407;&#21017;&#26041;&#38754;&#23384;&#22312;&#20105;&#35770;&#12290;&#25105;&#20204;&#19981;&#35748;&#20026;&#36825;&#22312;&#24212;&#29992;&#31243;&#24207;&#24320;&#21457;&#20013;&#26159;&#26126;&#26234;&#30340;&#12290;&#22914;
	  &#26524;&#20320;&#38656;&#35201;&#20351;&#29992;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#22120;&#65292;&#32771;&#34385;&#20351;&#29992;AspectJ&#12290;</span></i><p>Spring&#25552;&#20379;&#20195;&#34920;&#20999;&#20837;&#28857;&#25110;&#21508;&#31181;&#36890;&#30693;&#31867;&#22411;&#30340;&#31867;&#12290;Spring&#20351;&#29992;&#26415;&#35821;<span class="emphasis"><em>advisor</em></span>&#26469;
      &#34920;&#31034;&#20195;&#34920;&#26041;&#38754;&#30340;&#23545;&#35937;&#65292;&#23427;&#21253;&#21547;&#19968;&#20010;&#36890;&#30693;&#21644;&#19968;&#20010;&#25351;&#23450;&#29305;&#23450;&#36830;&#25509;&#28857;&#30340;&#20999;&#20837;&#28857;&#12290;
	  </p><p>&#21508;&#31181;&#36890;&#30693;&#31867;&#22411;&#26377;<tt class="literal">MethodInterceptor</tt>
      (&#26469;&#33258;AOP&#32852;&#30431;&#30340;&#25318;&#25130;&#22120;API)&#21644;&#23450;&#20041;&#22312;<tt class="literal">org.springframework.aop</tt>&#21253;&#20013;&#30340;
	  &#36890;&#30693;&#25509;&#21475;&#12290;&#25152;&#26377;&#36890;&#30693;&#24517;&#39035;&#23454;&#29616;<tt class="literal">org.aopalliance.aop.Advice</tt>&#26631;&#31614;&#25509;&#21475;&#12290;
      &#21462;&#20986;&#23601;&#21487;&#20351;&#29992;&#30340;&#36890;&#30693;&#26377;
      <tt class="literal">MethodInterceptor</tt>&#12289; <tt class="literal">ThrowsAdvice</tt>&#12289;
      <tt class="literal">BeforeAdvice</tt>&#21644; 
      <tt class="literal">AfterReturningAdvice</tt>&#12290;&#25105;&#20204;&#23558;&#22312;&#19979;&#38754;&#35814;&#32454;&#35752;&#35770;&#36825;&#20123;&#36890;&#30693;&#31867;&#22411;&#12290;</p><p>Spring&#23454;&#29616;&#20102;<span class="emphasis"><em>AOP&#32852;&#30431;</em></span>&#30340;&#25318;&#25130;&#22120;&#25509;&#21475;(<a href="">
	  http://www.sourceforge.net/projects/aopalliance</a>).
      Around&#36890;&#30693;&#24517;&#39035;&#23454;&#29616;AOP&#32852;&#30431;&#30340;<tt class="literal">org.aopalliance.intercept.MethodInterceptor</tt>
      &#25509;&#21475;&#12290;&#36825;&#20010;&#25509;&#21475;&#30340;&#23454;&#29616;&#21487;&#20197;&#36816;&#34892;&#22312;Spring&#25110;&#20854;&#20182;AOP&#32852;&#30431;&#20860;&#23481;&#30340;&#23454;&#29616;&#20013;&#12290;&#30446;&#21069;JAC&#23454;&#29616;&#20102;AOP&#32852;&#30431;&#30340;&#25509;
	  &#21475;&#65292;Nanning&#21644;Dynaop&#21487;&#33021;&#22312;2004&#24180;&#26089;&#26399;&#23454;&#29616;&#12290;</p><i><span class="remark">Spring&#23454;&#29616;AOP&#30340;&#36884;&#24452;&#19981;&#21516;&#20110;&#20854;&#20182;&#22823;&#37096;&#20998;AOP&#26694;&#26550;&#12290;&#23427;&#30340;&#30446;&#26631;&#19981;&#26159;&#25552;&#20379;&#21450;&#20854;&#23436;&#21892;&#30340;AOP&#23454;&#29616;&#65288;
	  &#34429;&#28982;Spring AOP&#38750;&#24120;&#24378;&#22823;&#65289;&#65307;&#32780;&#26159;&#25552;&#20379;&#19968;&#20010;&#21644;Spring IoC&#32039;&#23494;&#25972;&#21512;&#30340;AOP&#23454;&#29616;&#65292;&#24110;&#21161;&#35299;&#20915;&#20225;&#19994;&#24212;&#29992;
	  &#20013;&#30340;&#24120;&#35265;&#38382;&#39064;&#12290;</span></i><i><span class="remark">&#22240;&#27492;&#65292;&#20363;&#22914;Spring AOP&#30340;&#21151;&#33021;&#36890;&#24120;&#26159;&#21644;Spring IoC&#23481;&#22120;&#32852;&#21512;&#20351;&#29992;&#30340;&#12290;AOP&#36890;&#30693;&#26159;&#29992;&#26222;&#36890;
	  &#30340;bean&#23450;&#20041;&#35821;&#27861;&#26469;&#23450;&#20041;&#30340;&#65288;&#34429;&#28982;&#21487;&#20197;&#20351;&#29992;"autoproxying"&#21151;&#33021;&#65289;&#65307;&#36890;&#30693;&#21644;&#20999;&#20837;&#28857;&#26412;&#36523;&#30001;Spring IoC
	  &#31649;&#29702;&#65306;&#36825;&#26159;&#19968;&#20010;&#37325;&#35201;&#30340;&#20854;&#20182;AOP&#23454;&#29616;&#30340;&#21306;&#21035;&#12290;&#26377;&#20123;&#20107;&#20351;&#29992;Spring AOP&#26159;&#26080;&#27861;&#23481;&#26131;&#25110;&#39640;&#25928;&#22320;&#23454;&#29616;&#65292;&#27604;&#22914;&#36890;&#30693;
	  &#38750;&#24120;&#32454;&#31890;&#24230;&#30340;&#23545;&#35937;&#12290;&#36825;&#31181;&#24773;&#20917;AspectJ&#21487;&#33021;&#26159;&#26368;&#21512;&#36866;&#30340;&#36873;&#25321;&#12290;&#20294;&#26159;&#65292;&#25105;&#20204;&#30340;&#32463;&#39564;&#26159;Spring&#38024;&#23545;J2EE&#24212;
	  &#29992;&#20013;&#22823;&#37096;&#20998;&#33021;&#29992;AOP&#35299;&#20915;&#30340;&#38382;&#39064;&#25552;&#20379;&#20102;&#19968;&#20010;&#20248;&#31168;&#30340;&#35299;&#20915;&#26041;&#26696;&#12290;</span></i></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-proxies"></a>5.1.3.&nbsp;Spring&#20013;AOP&#20195;&#29702;</h3></div></div><div></div></div><p>Spring&#40664;&#35748;&#20351;&#29992;JDK<span class="emphasis"><em>&#21160;&#24577;&#20195;&#29702;</em></span>&#23454;&#29616;AOP&#20195;&#29702;&#12290;&#36825;&#20351;&#24471;&#20219;&#20309;&#25509;&#21475;&#25110;
	  &#25509;&#21475;&#30340;&#38598;&#21512;&#33021;&#22815;&#34987;&#20195;&#29702;&#12290;</p><p>Spring&#20063;&#21487;&#20197;&#26159;CGLIB&#20195;&#29702;&#12290;&#36825;&#21487;&#20197;&#20195;&#29702;&#31867;&#65292;&#32780;&#19981;&#26159;&#25509;&#21475;&#12290;&#22914;&#26524;&#19994;&#21153;&#23545;&#35937;&#27809;&#26377;&#23454;&#29616;&#19968;&#20010;&#25509;&#21475;&#65292;
      CGLIB&#34987;&#40664;&#35748;&#20351;&#29992;&#12290;&#20294;&#26159;&#20316;&#20026;&#19968;<span class="emphasis"><em>&#38024;&#23545;&#25509;&#21475;&#32534;&#31243;&#32780;&#19981;&#26159;&#31867;&#32534;&#31243;</em></span>&#33391;&#22909;&#23454;&#36341;&#65292;&#19994;&#21153;&#23545;&#35937;
	  &#36890;&#24120;&#23454;&#29616;&#19968;&#20010;&#25110;&#22810;&#20010;&#19994;&#21153;&#25509;&#21475;&#12290;</p><p>&#20063;&#21487;&#20197;&#24378;&#21046;&#20351;&#29992;CGLIB&#65306;&#25105;&#20204;&#23558;&#22312;&#19979;&#38754;&#35752;&#35770;&#65292;&#24182;&#19988;&#20250;&#35299;&#37322;&#20026;&#20160;&#20040;&#20320;&#20250;&#35201;&#36825;&#20040;&#20570;&#12290;</p><i><span class="remark">Spring 1.0&#21518;&#65292;Spring&#21487;&#33021;&#25552;&#20379;&#39069;&#22806;&#30340;AOP&#20195;&#29702;&#30340;&#31867;&#22411;&#65292;&#21253;&#25324;&#23436;&#20840;&#29983;&#25104;&#30340;&#31867;&#12290;&#36825;&#23558;&#19981;&#20250;&#24433;&#21709;
	  &#32534;&#31243;&#27169;&#22411;&#12290;</span></i></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-introduction-pointcuts"></a>5.2.&nbsp;Spring&#30340;&#20999;&#20837;&#28857;</h2></div></div><div></div></div><p>&#35753;&#25105;&#20204;&#30475;&#30475;Spring&#22914;&#20309;&#22788;&#29702;&#20999;&#20837;&#28857;&#36825;&#20010;&#37325;&#35201;&#30340;&#27010;&#24565;&#12290;</p><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2600"></a>5.2.1.&nbsp;&#27010;&#24565;</h3></div></div><div></div></div><p>Spring&#30340;&#20999;&#20837;&#28857;&#27169;&#22411;&#33021;&#22815;&#20351;&#20999;&#20837;&#28857;&#29420;&#31435;&#20110;&#36890;&#30693;&#31867;&#22411;&#34987;&#37325;&#29992;&#12290; &#21516;&#26679;&#30340;&#20999;&#20837;&#28857;&#26377;&#21487;&#33021;&#25509;&#21463;&#19981;&#21516;&#30340;
	  &#36890;&#30693;&#12290;</p><p><tt class="literal">org.springframework.aop.Pointcut</tt> &#25509;&#21475;&#26159;&#37325;&#35201;&#30340;&#25509;&#21475;&#65292;
	  &#29992;&#26469;&#25351;&#23450;&#36890;&#30693;&#21040;&#29305;&#23450;&#30340;&#31867;&#21644;&#26041;&#27861;&#30446;&#26631;&#12290;&#23436;&#25972;&#30340;&#25509;&#21475;&#23450;&#20041;&#22914;&#19979;:</p><pre class="programlisting">public interface Pointcut {

    ClassFilter getClassFilter();

    MethodMatcher getMethodMatcher();

}</pre><p>&#23558;<tt class="literal">Pointcut</tt>&#25509;&#21475;&#20998;&#25104;&#20004;&#20010;&#37096;&#20998;&#26377;&#21033;&#20110;&#37325;&#29992;&#31867;&#21644;&#26041;&#27861;&#30340;&#21305;&#37197;&#37096;&#20998;&#65292;&#24182;&#19988;&#32452;&#21512;&#32454;&#31890;&#24230;&#30340;
	  &#25805;&#20316;&#65288;&#22914;&#21644;&#21478;&#19968;&#20010;&#26041;&#27861;&#21305;&#37197;&#22120;&#25191;&#34892;&#19968;&#20010;&#8221;&#24182;&#8220;&#30340;&#25805;&#20316;&#65289;&#12290;</p><p><tt class="literal">ClassFilter</tt>&#25509;&#21475;&#34987;&#29992;&#26469;&#23558;&#20999;&#20837;&#28857;&#38480;&#21046;&#21040;&#19968;&#20010;&#32473;&#23450;&#30340;&#30446;&#26631;&#31867;&#30340;&#38598;&#21512;&#12290;
	  &#22914;&#26524;<tt class="literal">matches()</tt>&#27704;&#36828;&#36820;&#22238;true&#65292;&#25152;&#26377;&#30340;&#30446;&#26631;&#31867;&#37117;&#23558;&#34987;&#21305;&#37197;&#12290;</p><pre class="programlisting">public interface ClassFilter {

    boolean matches(Class clazz);
}</pre><p><tt class="literal">MethodMatcher</tt>&#25509;&#21475;&#36890;&#24120;&#26356;&#21152;&#37325;&#35201;&#12290;&#23436;&#25972;&#30340;&#25509;&#21475;&#22914;&#19979;&#65306;</p><pre class="programlisting">public interface MethodMatcher {

    boolean matches(Method m, Class targetClass);

    boolean isRuntime();

    boolean matches(Method m, Class targetClass, Object[] args);
}</pre><p><tt class="literal">matches(Method, Class) </tt>&#26041;&#27861;&#34987;&#29992;&#26469;&#27979;&#35797;&#36825;&#20010;&#20999;&#20837;&#28857;&#26159;&#21542;&#21305;
	  &#37197;&#30446;&#26631;&#31867;&#30340;&#32473;&#23450;&#26041;&#27861;&#12290;&#36825;&#20010;&#27979;&#35797;&#21487;&#20197;&#22312;AOP&#20195;&#29702;&#21019;&#24314;&#30340;&#26102;&#20505;&#25191;&#34892;&#65292;&#36991;&#20813;&#22312;&#25152;&#26377;&#26041;&#27861;&#35843;&#29992;&#26102;&#37117;&#38656;&#35201;&#36827;&#34892;
	  &#27979;&#35797;&#12290;&#22914;&#26524;2&#20010;&#21442;&#25968;&#30340;&#21305;&#37197;&#26041;&#27861;&#23545;&#26576;&#20010;&#26041;&#27861;&#36820;&#22238;true&#65292;&#24182;&#19988;MethodMatcher&#30340;<tt class="literal">
	  isRuntime()</tt>&#20063;&#36820;&#22238;true&#65292;&#37027;&#20040;3&#20010;&#21442;&#25968;&#30340;&#21305;&#37197;&#26041;&#27861;&#23558;&#22312;&#27599;&#27425;&#26041;&#27861;&#35843;&#29992;&#30340;&#26102;&#20505;&#34987;&#35843;&#29992;&#12290;&#36825;&#20351;
	  &#20999;&#20837;&#28857;&#33021;&#22815;&#22312;&#30446;&#26631;&#36890;&#30693;&#34987;&#25191;&#34892;&#20043;&#21069;&#31435;&#21363;&#26597;&#30475;&#20256;&#36882;&#32473;&#26041;&#27861;&#35843;&#29992;&#30340;&#21442;&#25968;&#12290;</p><p>&#22823;&#37096;&#20998;MethodMatcher&#37117;&#26159;&#38745;&#24577;&#30340;&#65292;&#24847;&#21619;&#30528;<tt class="literal">isRuntime()</tt>&#26041;&#27861;
	  &#36820;&#22238;false&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;3&#20010;&#21442;&#25968;&#30340;&#21305;&#37197;&#26041;&#27861;&#27704;&#36828;&#19981;&#20250;&#34987;&#35843;&#29992;&#12290;</p><i><span class="remark">&#22914;&#26524;&#21487;&#33021;&#65292;&#23613;&#37327;&#20351;&#20999;&#20837;&#28857;&#26159;&#38745;&#24577;&#30340;&#65292;&#20351;&#24403;AOP&#20195;&#29702;&#34987;&#21019;&#24314;&#26102;&#65292;AOP&#26694;&#26550;&#33021;&#22815;&#32531;&#23384;&#20999;&#20837;&#28857;&#30340;
	  &#27979;&#35797;&#32467;&#26524;&#12290;</span></i></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2645"></a>5.2.2.&nbsp;&#20999;&#20837;&#28857;&#30340;&#36816;&#31639;</h3></div></div><div></div></div><p>Spring&#25903;&#25345;&#30340;&#20999;&#20837;&#28857;&#30340;&#36816;&#31639;&#26377;: &#20540;&#24471;&#27880;&#24847;&#30340;&#26159;
      <span class="emphasis"><em>&#24182;</em></span> &#21644; <span class="emphasis"><em>&#20132;</em></span>&#12290;</p><p>&#24182;&#34920;&#31034;&#21482;&#35201;&#20219;&#20309;&#19968;&#20010;&#20999;&#20837;&#28857;&#21305;&#37197;&#30340;&#26041;&#27861;&#12290;</p><p>&#20132;&#34920;&#31034;&#20004;&#20010;&#20999;&#20837;&#28857;&#37117;&#35201;&#21305;&#37197;&#30340;&#26041;&#27861;&#12290;</p><p>&#24182;&#36890;&#24120;&#27604;&#36739;&#26377;&#29992;&#12290;</p><p>&#20999;&#20837;&#28857;&#21487;&#20197;&#29992;<span class="emphasis"><em>org.springframework.aop.support.Pointcuts</em></span>
	  &#31867;&#30340;&#38745;&#24577;&#26041;&#27861;&#26469;&#32452;&#21512;&#65292;&#25110;&#32773;&#20351;&#29992;&#21516;&#19968;&#20010;&#21253;&#20013;&#30340;<span class="emphasis"><em>ComposablePointcut</em></span>&#31867;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2670"></a>5.2.3.&nbsp;&#23454;&#29992;&#20999;&#20837;&#28857;&#23454;&#29616;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20960;&#20010;&#23454;&#29992;&#30340;&#20999;&#20837;&#28857;&#23454;&#29616;&#12290;&#19968;&#20123;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#12290;&#21478;&#19968;&#20123;&#38656;&#35201;&#23376;&#31867;&#21270;&#26469;&#23454;&#29616;&#24212;&#29992;&#30456;
	  &#20851;&#30340;&#20999;&#20837;&#28857;&#12290;</p><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2675"></a>5.2.3.1.&nbsp;&#38745;&#24577;&#20999;&#20837;&#28857;</h4></div></div><div></div></div><p>&#38745;&#24577;&#20999;&#20837;&#28857;&#21482;&#22522;&#20110;&#26041;&#27861;&#21644;&#30446;&#26631;&#31867;&#65292;&#32780;&#19981;&#32771;&#34385;&#26041;&#27861;&#30340;&#21442;&#25968;&#12290;&#38745;&#24577;&#20999;&#20837;&#28857;&#36275;&#22815;&#28385;&#36275;&#22823;&#22810;&#25968;&#24773;&#20917;
		&#30340;&#20351;&#29992;&#12290;Spring&#21487;&#20197;&#21482;&#22312;&#26041;&#27861;&#31532;&#19968;&#27425;&#34987;&#35843;&#29992;&#30340;&#26102;&#20505;&#35745;&#31639;&#38745;&#24577;&#20999;&#20837;&#28857;&#65292;&#19981;&#38656;&#35201;&#22312;&#27599;&#27425;&#26041;&#27861;&#35843;&#29992;
		&#30340;&#26102;&#20505;&#35745;&#31639;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#19979;Spring&#25552;&#20379;&#30340;&#19968;&#20123;&#38745;&#24577;&#20999;&#20837;&#28857;&#30340;&#23454;&#29616;&#12290;</p><div class="sect4" lang="zh_cn"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2682"></a>5.2.3.1.1.&nbsp;&#27491;&#21017;&#34920;&#36798;&#24335;&#20999;&#20837;&#28857;</h5></div></div><div></div></div><p>&#19968;&#20010;&#24456;&#26174;&#28982;&#30340;&#25351;&#23450;&#38745;&#24577;&#20999;&#20837;&#28857;&#30340;&#26041;&#27861;&#26159;&#27491;&#21017;&#34920;&#36798;&#24335;&#12290;&#38500;&#20102;Spring&#20197;&#22806;&#65292;&#20854;&#23427;&#30340;AOP&#26694;&#26550;&#20063;&#23454;
		  &#29616;&#20102;&#36825;&#19968;&#28857;&#12290;<tt class="literal">org.springframework.aop.support.RegexpMethodPointcut</tt>
          &#26159;&#19968;&#20010;&#36890;&#29992;&#30340;&#27491;&#21017;&#34920;&#36798;&#24335;&#20999;&#20837;&#28857;&#65292;&#23427;&#20351;&#29992;Perl 5&#30340;&#27491;&#21017;&#34920;&#36798;&#24335;&#30340;&#35821;&#27861;&#12290;</p><p>&#20351;&#29992;&#36825;&#20010;&#31867;&#20320;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#27169;&#24335;&#30340;&#21015;&#34920;&#12290;&#22914;&#26524;&#20219;&#20309;&#19968;&#20010;&#21305;&#37197;&#65292;&#37027;&#20010;&#20999;&#20837;&#28857;&#23558;&#34987;&#35745;&#31639;&#25104;
		  true&#12290;&#65288;&#25152;&#20197;&#32467;&#26524;&#30456;&#24403;&#20110;&#26159;&#36825;&#20123;&#20999;&#20837;&#28857;&#30340;&#24182;&#38598;&#65289;&#12290;</p><p>&#29992;&#27861;&#22914;&#19979;:</p><pre class="programlisting">&lt;bean id="settersAndAbsquatulatePointcut" 
    class="org.springframework.aop.support.RegexpMethodPointcut"&gt;
    &lt;property name="patterns"&gt;
        &lt;list&gt;
            &lt;value&gt;.*get.*&lt;/value&gt;
            &lt;value&gt;.*absquatulate&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p><tt class="literal">RegexpMethodPointcut</tt>&#19968;&#20010;&#23454;&#29992;&#23376;&#31867;&#65292;
          <tt class="literal">RegexpMethodPointcutAdvisor</tt>&#65292; &#20801;&#35768;&#25105;&#20204;&#21516;&#26102;&#24341;&#29992;&#19968;&#20010;&#36890;&#30693;&#12290;
		  &#65288;&#35760;&#20303;&#36890;&#30693;&#21487;&#20197;&#26159;&#25318;&#25130;&#22120;&#65292;before&#36890;&#30693;&#65292;throws&#36890;&#30693;&#31561;&#31561;&#12290;)&#36825;&#31616;&#21270;&#20102;bean&#30340;&#35013;&#37197;&#65292;&#22240;&#20026;&#19968;&#20010;bean
		  &#21487;&#20197;&#21516;&#26102;&#24403;&#20316;&#20999;&#20837;&#28857;&#21644;&#36890;&#30693;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;bean id="settersAndAbsquatulateAdvisor" 
    class="org.springframework.aop.support.RegexpMethodPointcutAdvisor"&gt;
    &lt;property name="interceptor"&gt;
        &lt;ref local="beanNameOfAopAllianceInterceptor"/&gt;
    &lt;/property&gt;
    &lt;property name="patterns"&gt;
        &lt;list&gt;
            &lt;value&gt;.*get.*&lt;/value&gt;
            &lt;value&gt;.*absquatulate&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p><span class="emphasis"><em>RegexpMethodPointcutAdvisor</em></span>&#21487;&#20197;&#29992;&#20110;&#20219;&#20309;&#36890;&#30693;&#31867;&#22411;&#12290;</p><i><span class="remark">RegexpMethodPointcut&#31867;&#38656;&#35201;Jakarta ORO&#27491;&#21017;&#34920;&#36798;&#24335;&#21253;&#12290;</span></i></div><div class="sect4" lang="zh_cn"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2713"></a>5.2.3.1.2.&nbsp;&#23646;&#24615;&#39537;&#21160;&#30340;&#20999;&#20837;&#28857;</h5></div></div><div></div></div><p>&#19968;&#31867;&#37325;&#35201;&#30340;&#38745;&#24577;&#20999;&#20837;&#28857;&#26159;<span class="emphasis"><em>&#20803;&#25968;&#25454;&#39537;&#21160;</em></span>&#30340;
		  &#20999;&#20837;&#28857;&#12290; &#23427;&#20351;&#29992;&#20803;&#25968;&#25454;&#23646;&#24615;&#30340;&#20540;&#65306;&#20856;&#22411;&#22320;&#65292;&#20351;&#29992;&#28304;&#20195;&#30721;&#32423;&#20803;&#25968;&#25454;&#12290;</p></div></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2721"></a>5.2.3.2.&nbsp;&#21160;&#24577;&#20999;&#20837;&#28857;</h4></div></div><div></div></div><p>&#21160;&#24577;&#20999;&#20837;&#28857;&#30340;&#28436;&#31639;&#20195;&#20215;&#27604;&#38745;&#24577;&#20999;&#20837;&#28857;&#39640;&#30340;&#22810;&#12290;&#23427;&#20204;&#19981;&#20165;&#32771;&#34385;&#38745;&#24577;&#20449;&#24687;&#65292;&#36824;&#35201;&#32771;&#34385;&#26041;&#27861;&#30340;
        <span class="emphasis"><em>&#21442;&#25968;</em></span>&#12290;&#36825;&#24847;&#21619;&#30528;&#23427;&#20204;&#24517;&#39035;&#22312;&#27599;&#27425;&#26041;&#27861;&#35843;&#29992;&#30340;&#26102;&#20505;&#37117;&#34987;&#35745;&#31639;&#65307;&#24182;&#19988;&#19981;&#33021;&#32531;&#23384;&#32467;&#26524;
		&#65292;&#22240;&#20026;&#21442;&#25968;&#26159;&#21464;&#21270;&#30340;&#12290;</p><p>&#36825;&#20010;&#20027;&#35201;&#30340;&#20363;&#23376;&#23601;&#26159;<tt class="literal">&#25511;&#21046;&#27969;</tt>&#20999;&#20837;&#28857;&#12290;</p><div class="sect4" lang="zh_cn"><div class="titlepage"><div><div><h5 class="title"><a name="d0e2734"></a>5.2.3.2.1.&nbsp;&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;</h5></div></div><div></div></div><p>Spring&#30340;&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;&#27010;&#24565;&#19978;&#21644;AspectJ&#30340;<span class="emphasis"><em>cflow</em></span>
		  &#20999;&#20837;&#28857;&#19968;&#33268;&#65292;&#34429;&#28982;&#27809;&#26377;&#20854;&#37027;&#20040;&#24378;&#22823;&#65288;&#24403;&#21069;&#27809;&#26377;&#21150;&#27861;&#25351;&#23450;&#19968;&#20010;&#20999;&#20837;&#28857;&#22312;&#21478;&#19968;&#20010;&#20999;&#20837;&#28857;&#21518;&#25191;&#34892;&#65289;&#12290;
		  &#19968;&#20010;&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;&#21305;&#37197;&#24403;&#21069;&#30340;&#35843;&#29992;&#26632;&#12290;&#20363;&#22914;&#65292;&#36830;&#25509;&#28857;&#34987;
		  <tt class="literal">com.mycompany.web</tt>&#21253;&#25110;&#32773;
		  <tt class="literal">SomeCaller</tt>&#31867;&#20013;&#19968;&#20010;&#26041;&#27861;&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;&#35302;&#21457;&#35813;&#20999;&#20837;&#28857;&#12290;&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;&#30340;&#23454;&#29616;&#31867;&#26159;
		  <tt class="literal">org.springframework.aop.support.ControlFlowPointcut</tt>&#12290;
			</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../images/admons/note.png"></td><th align="left">&#27880;&#24847;</th></tr><tr><td colspan="2" align="left" valign="top"><p>&#25511;&#21046;&#27969;&#20999;&#20837;&#28857;&#26159;&#21160;&#24577;&#20999;&#20837;&#28857;&#20013;&#35745;&#31639;&#20195;&#20215;&#26368;&#39640;&#30340;&#12290;Java
              1.4&#20013;, &#23427;&#30340;&#36816;&#34892;&#24320;&#38144;&#26159;&#20854;&#20182;&#21160;&#24577;&#20999;&#20837;&#28857;&#30340;5&#20493;&#12290;&#22312;Java 1.3&#20013;&#21017;&#36229;&#36807;10&#20493;&#12290;</p></td></tr></table></div></div></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2754"></a>5.2.4.&nbsp;&#20999;&#20837;&#28857;&#36229;&#31867;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#38750;&#24120;&#23454;&#29992;&#30340;&#20999;&#20837;&#28857;&#30340;&#36229;&#31867;&#24110;&#21161;&#20320;&#23454;&#29616;&#20320;&#33258;&#24049;&#30340;&#20999;&#20837;&#28857;&#12290;</p><p>&#22240;&#20026;&#38745;&#24577;&#20999;&#20837;&#28857;&#38750;&#24120;&#23454;&#29992;&#65292;&#20320;&#24456;&#21487;&#33021;&#23376;&#31867;&#21270;StaticMethodMatcherPointcut&#65292;&#22914;&#19979;&#25152;&#31034;&#12290;
	  &#36825;&#21482;&#38656;&#35201;&#23454;&#29616;&#19968;&#20010;&#25277;&#35937;&#26041;&#27861;&#65288;&#34429;&#28982;&#21487;&#20197;&#25913;&#20889;&#20854;&#23427;&#30340;&#26041;&#27861;&#26469;&#33258;&#23450;&#20041;&#34892;&#20026;&#65289;&#12290;</p><pre class="programlisting">class TestStaticPointcut extends StaticMethodMatcherPointcut {

    public boolean matches(Method m, Class targetClass) {
        // return true if custom criteria match
    }
}</pre><p>&#24403;&#28982;&#20063;&#26377;&#21160;&#24577;&#20999;&#20837;&#28857;&#30340;&#36229;&#31867;&#12290;</p><p>Spring 1.0 RC2&#25110;&#20197;&#19978;&#29256;&#26412;&#65292;&#33258;&#23450;&#20041;&#20999;&#20837;&#28857;&#21487;&#20197;&#29992;&#20110;&#20219;&#20309;&#31867;&#22411;&#30340;&#36890;&#30693;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2767"></a>5.2.5.&nbsp;&#33258;&#23450;&#20041;&#20999;&#20837;&#28857;</h3></div></div><div></div></div><p>&#22240;&#20026;Spring&#20013;&#30340;&#20999;&#20837;&#28857;&#26159;Java&#31867;&#65292;&#32780;&#19981;&#26159;&#35821;&#35328;&#29305;&#24615;&#65288;&#22914;AspectJ&#65289;&#65292;&#22240;&#27492;&#21487;&#20197;&#23450;&#20041;&#33258;&#23450;&#20041;&#20999;&#20837;&#28857;&#65292;
	  &#26080;&#35770;&#38745;&#24577;&#36824;&#26159;&#21160;&#24577;&#12290;&#20294;&#26159;&#65292;&#27809;&#26377;&#30452;&#25509;&#25903;&#25345;&#29992;AspectJ&#35821;&#27861;&#20070;&#20889;&#30340;&#22797;&#26434;&#30340;&#20999;&#20837;&#28857;&#34920;&#36798;&#24335;&#12290;&#19981;&#36807;&#65292;
	  Spring&#30340;&#33258;&#23450;&#20041;&#20999;&#20837;&#28857;&#20063;&#21487;&#20197;&#20219;&#24847;&#30340;&#22797;&#26434;&#12290;</p><i><span class="remark">&#21518;&#32493;&#29256;&#26412;&#30340;Spring&#21487;&#33021;&#35937;JA&#19968;&#26679;C&#25552;&#20379;&#8221;&#35821;&#20041;&#20999;&#20837;&#28857;&#8220;&#30340;&#25903;&#25345;&#65306;&#20363;&#22914;&#65292;&#8220;&#25152;&#26377;&#26356;&#25913;&#30446;&#26631;&#23545;&#35937;
	  &#23454;&#20363;&#21464;&#37327;&#30340;&#26041;&#27861;&#8221;&#12290;</span></i></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2774"></a>5.3.&nbsp;Spring&#30340;&#36890;&#30693;&#31867;&#22411;</h2></div></div><div></div></div><p>&#29616;&#22312;&#35753;&#25105;&#20204;&#30475;&#30475;Spring AOP&#26159;&#22914;&#20309;&#22788;&#29702;&#36890;&#30693;&#30340;&#12290;</p><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2779"></a>5.3.1.&nbsp;&#36890;&#30693;&#30340;&#29983;&#21629;&#21608;&#26399;</h3></div></div><div></div></div><p>Spring&#30340;&#36890;&#30693;&#21487;&#20197;&#36328;&#36234;&#22810;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#20849;&#20139;&#65292;&#25110;&#32773;&#27599;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#26377;&#33258;&#24049;&#30340;&#36890;&#30693;&#12290;&#36825;&#20998;&#21035;&#23545;&#24212;
      <span class="emphasis"><em>per-class</em></span>&#25110;<span class="emphasis"><em>per-instance</em></span>
      &#36890;&#30693;&#12290;</p><p>Per-class&#36890;&#30693;&#20351;&#29992;&#26368;&#20026;&#24191;&#27867;&#12290;&#23427;&#36866;&#21512;&#20110;&#36890;&#29992;&#30340;&#36890;&#30693;&#65292;&#22914;&#20107;&#21153;adisor&#12290;&#23427;&#20204;&#19981;&#20381;&#36182;&#34987;&#20195;&#29702;
	  &#30340;&#23545;&#35937;&#30340;&#29366;&#24577;&#65292;&#20063;&#19981;&#28155;&#21152;&#26032;&#30340;&#29366;&#24577;&#12290;&#23427;&#20204;&#20165;&#20165;&#20316;&#29992;&#20110;&#26041;&#27861;&#21644;&#26041;&#27861;&#30340;&#21442;&#25968;&#12290;</p><p>Per-instance&#36890;&#30693;&#36866;&#21512;&#20110;&#23548;&#20837;&#65292;&#26469;&#25903;&#25345;&#28151;&#20837;&#65288;mixin&#65289;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#36890;&#30693;&#28155;&#21152;&#29366;&#24577;&#21040;
	  &#34987;&#20195;&#29702;&#30340;&#23545;&#35937;&#12290;</p><p>&#21487;&#20197;&#22312;&#21516;&#19968;&#20010;AOP&#20195;&#29702;&#20013;&#28151;&#21512;&#20351;&#29992;&#20849;&#20139;&#21644;per-instance&#36890;&#30693;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-introduction-advice-types"></a>5.3.2.&nbsp;Spring&#20013;&#36890;&#30693;&#31867;&#22411;</h3></div></div><div></div></div><p>Spring&#25552;&#20379;&#20960;&#31181;&#29616;&#25104;&#30340;&#36890;&#30693;&#31867;&#22411;&#24182;&#21487;&#25193;&#23637;&#25552;&#20379;&#20219;&#24847;&#30340;&#36890;&#30693;&#31867;&#22411;&#12290;&#35753;&#25105;&#20204;&#30475;&#30475;&#22522;&#26412;&#27010;&#24565;&#21644;
	  &#26631;&#20934;&#30340;&#36890;&#30693;&#31867;&#22411;&#12290;</p><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2801"></a>5.3.2.1.&nbsp;Interception around advice</h4></div></div><div></div></div><p>Spring&#20013;&#26368;&#22522;&#26412;&#30340;&#36890;&#30693;&#31867;&#22411;&#26159;<span class="emphasis"><em>interception around advice
	    </em></span>.</p><p>Spring&#20351;&#29992;&#26041;&#27861;&#25318;&#25130;&#22120;&#30340;around&#36890;&#30693;&#26159;&#21644;AOP&#32852;&#30431;&#25509;&#21475;&#20860;&#23481;&#30340;&#12290;&#23454;&#29616;around&#36890;&#30693;&#30340;
	    &#31867;&#38656;&#35201;&#23454;&#29616;&#25509;&#21475;MethodInterceptor&#65306;</p><pre class="programlisting">public interface MethodInterceptor extends Interceptor {
  
    Object invoke(MethodInvocation invocation) throws Throwable;
}</pre><p><span class="emphasis"><em>invoke()</em></span>&#26041;&#27861;&#30340;<span class="emphasis"><em>MethodInvocation</em></span>
		&#21442;&#25968;&#26292;&#38706;&#23558;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#12289;&#30446;&#26631;&#36830;&#25509;&#28857;&#12289;AOP&#20195;&#29702;&#21644;&#20256;&#36882;&#32473;&#34987;&#35843;&#29992;&#26041;&#27861;&#30340;&#21442;&#25968;&#12290;
        <span class="emphasis"><em>invoke()</em></span>&#26041;&#27861;&#24212;&#35813;&#36820;&#22238;&#35843;&#29992;&#30340;&#32467;&#26524;&#65306;&#36830;&#25509;&#28857;&#30340;&#36820;&#22238;&#20540;&#12290;</p><p>&#19968;&#20010;&#31616;&#21333;&#30340;<span class="emphasis"><em>MethodInterceptor</em></span>&#23454;&#29616;&#30475;&#36215;&#26469;&#22914;&#19979;:</p><pre class="programlisting">public class DebugInterceptor implements MethodInterceptor {

    public Object invoke(MethodInvocation invocation) throws Throwable {
        System.out.println("Before: invocation=[" + invocation + "]");
        Object rval = invocation.proceed();
        System.out.println("Invocation returned");
        return rval;
    }
}</pre><p>&#27880;&#24847;MethodInvocation&#30340;<span class="emphasis"><em>proceed()</em></span>&#26041;&#27861;&#30340;&#35843;&#29992;&#12290;
	    &#36825;&#20010;&#35843;&#29992;&#20250;&#24212;&#29992;&#21040;&#30446;&#26631;&#36830;&#25509;&#28857;&#30340;&#25318;&#25130;&#22120;&#38142;&#20013;&#30340;&#27599;&#19968;&#20010;&#25318;&#25130;&#22120;&#12290;&#22823;&#37096;&#20998;&#25318;&#25130;&#22120;&#20250;&#35843;&#29992;&#36825;&#20010;&#26041;&#27861;&#65292;&#24182;&#36820;&#22238;&#23427;&#30340;&#36820;&#22238;&#20540;&#12290;&#20294;&#26159;&#65292;
		&#19968;&#20010;MethodInterceptor&#65292;&#21644;&#20219;&#20309;around&#36890;&#30693;&#19968;&#26679;&#65292;&#21487;&#20197;&#36820;&#22238;&#19981;&#21516;&#30340;&#20540;&#25110;&#32773;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65292;&#32780;
		&#19981;&#35843;&#29992;proceed&#26041;&#27861;&#12290;&#20294;&#26159;&#65292;&#27809;&#26377;&#22909;&#30340;&#21407;&#22240;&#20320;&#35201;&#36825;&#20040;&#20570;&#12290;</p><i><span class="remark">MethodInterceptor&#25552;&#20379;&#20102;&#21644;&#20854;&#20182;AOP&#32852;&#30431;&#30340;&#20860;&#23481;&#23454;&#29616;&#30340;&#20132;&#20114;&#33021;&#21147;&#12290;&#36825;&#19968;&#33410;&#19979;&#38754;
	    &#35201;&#35752;&#35770;&#30340;&#20854;&#20182;&#30340;&#36890;&#30693;&#31867;&#22411;&#23454;&#29616;&#20102;AOP&#20844;&#20849;&#30340;&#27010;&#24565;&#65292;&#20294;&#26159;&#20197;Spring&#29305;&#23450;&#30340;&#26041;&#24335;&#12290;&#34429;&#28982;&#20351;&#29992;&#29305;&#23450;
		&#36890;&#30693;&#31867;&#22411;&#26377;&#24456;&#22810;&#20248;&#28857;&#65292;&#20294;&#22914;&#26524;&#20320;&#21487;&#33021;&#38656;&#35201;&#22312;&#20854;&#20182;&#30340;AOP&#26694;&#26550;&#20013;&#20351;&#29992;&#65292;&#35831;&#22362;&#25345;&#20351;&#29992;MethodInterceptor 
		around&#36890;&#30693;&#31867;&#22411;&#12290;&#27880;&#24847;&#30446;&#21069;&#20999;&#20837;&#28857;&#19981;&#33021;&#21644;&#20854;&#23427;&#26694;&#26550;&#20132;&#20114;&#25805;&#20316;&#65292;&#24182;&#19988;AOP&#32852;&#30431;&#30446;&#21069;&#20063;&#27809;&#26377;&#23450;&#20041;&#20999;&#20837;
		&#28857;&#25509;&#21475;&#12290;</span></i></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2837"></a>5.3.2.2.&nbsp;Before&#36890;&#30693;</h4></div></div><div></div></div><p><span class="bold"><b>Before&#36890;&#30693;</b></span>&#26159;&#19968;&#31181;&#31616;&#21333;&#30340;&#36890;&#30693;&#31867;&#22411;&#12290;
		&#36825;&#20010;&#36890;&#30693;&#19981;&#38656;&#35201;&#19968;&#20010;<tt class="literal">MethodInvocation</tt>&#23545;&#35937;&#65292;&#22240;&#20026;&#23427;&#21482;&#22312;&#36827;&#20837;&#19968;&#20010;&#26041;&#27861;
		&#21069;&#34987;&#35843;&#29992;&#12290;</p><p>Before&#36890;&#30693;&#30340;&#20027;&#35201;&#20248;&#28857;&#26159;&#23427;&#19981;&#38656;&#35201;&#35843;&#29992;<tt class="literal">proceed() </tt>&#26041;&#27861;&#65292;
	    &#22240;&#27492;&#27809;&#26377;&#26080;&#24847;&#20013;&#24536;&#25481;&#32487;&#32493;&#25191;&#34892;&#25318;&#25130;&#22120;&#38142;&#30340;&#21487;&#33021;&#24615;&#12290;</p><p><tt class="literal">MethodBeforeAdvice</tt>&#25509;&#21475;&#22914;&#19979;&#25152;&#31034;&#12290;
        (Spring&#30340;API&#35774;&#35745;&#20801;&#35768;&#25104;&#21592;&#21464;&#37327;&#30340;before&#36890;&#30693;&#65292;&#34429;&#28982;&#19968;&#33324;&#30340;&#23545;&#35937;&#37117;&#21487;&#20197;&#24212;&#29992;&#25104;&#21592;&#21464;&#37327;&#25318;&#25130;&#65292;&#20294;Spring
		&#26377;&#21487;&#33021;&#27704;&#36828;&#19981;&#20250;&#23454;&#29616;&#23427;&#65289;&#12290;</p><pre class="programlisting">public interface MethodBeforeAdvice extends BeforeAdvice {

    void before(Method m, Object[] args, Object target) throws Throwable;
}</pre><p>&#27880;&#24847;&#36820;&#22238;&#31867;&#22411;&#26159;<tt class="literal">void</tt>&#12290; Before&#36890;&#30693;&#21487;&#20197;&#22312;&#36830;&#25509;&#28857;&#25191;&#34892;&#20043;&#21069;
		&#25554;&#20837;&#33258;&#23450;&#20041;&#30340;&#34892;&#20026;&#65292;&#20294;&#26159;&#19981;&#33021;&#25913;&#21464;&#36820;&#22238;&#20540;&#12290;&#22914;&#26524;&#19968;&#20010;before&#36890;&#30693;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65292;&#36825;&#23558;&#20013;&#26029;&#25318;&#25130;&#22120;
		&#38142;&#30340;&#36827;&#19968;&#27493;&#25191;&#34892;&#12290;&#36825;&#20010;&#24322;&#24120;&#23558;&#27839;&#30528;&#25318;&#25130;&#22120;&#38142;&#21518;&#36864;&#30528;&#21521;&#19978;&#20256;&#25773;&#12290;&#22914;&#26524;&#36825;&#20010;&#24322;&#24120;&#26159;unchecked&#30340;&#65292;&#25110;&#32773;
		&#20986;&#29616;&#22312;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#30340;&#31614;&#21517;&#20013;&#65292;&#23427;&#23558;&#20250;&#34987;&#30452;&#25509;&#20256;&#36882;&#32473;&#23458;&#25143;&#20195;&#30721;&#65307;&#21542;&#21017;&#65292;&#23427;&#23558;&#34987;AOP&#20195;&#29702;&#21253;&#35013;&#21040;&#19968;&#20010;unchecked
		&#30340;&#24322;&#24120;&#37324;&#12290;</p><p>&#19979;&#38754;&#26159;Spring&#20013;&#19968;&#20010;before&#36890;&#30693;&#30340;&#20363;&#23376;&#65292;&#36825;&#20010;&#20363;&#23376;&#35745;&#25968;&#25152;&#26377;&#27491;&#24120;&#36820;&#22238;&#30340;&#26041;&#27861;&#65306;</p><pre class="programlisting">public class CountingBeforeAdvice implements MethodBeforeAdvice {
    private int count;
    public void before(Method m, Object[] args, Object target) throws Throwable {
        ++count;
    }

    public int getCount() { 
        return count; 
    }
}</pre><i><span class="remark">Before&#36890;&#30693;&#21487;&#20197;&#34987;&#29992;&#20110;&#20219;&#20309;&#31867;&#22411;&#30340;&#20999;&#20837;&#28857;&#12290;</span></i></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2869"></a>5.3.2.3.&nbsp;Throws&#36890;&#30693;</h4></div></div><div></div></div><p>&#22914;&#26524;&#36830;&#25509;&#28857;&#25243;&#20986;&#24322;&#24120;&#65292;<span class="bold"><b>Throws&#36890;&#30693;</b></span>		
        &#22312;&#36830;&#25509;&#28857;&#36820;&#22238;&#21518;&#34987;&#35843;&#29992;&#12290;Spring&#25552;&#20379;&#24378;&#31867;&#22411;&#30340;throws&#36890;&#30693;&#12290;&#27880;&#24847;&#36825;&#24847;&#21619;&#30528;
        <tt class="literal">org.springframework.aop.ThrowsAdvice</tt>&#25509;&#21475;&#19981;&#21253;&#21547;&#20219;&#20309;&#26041;&#27861;&#65306;
		&#23427;&#26159;&#19968;&#20010;&#26631;&#35760;&#25509;&#21475;&#65292;&#26631;&#35782;&#32473;&#23450;&#30340;&#23545;&#35937;&#23454;&#29616;&#20102;&#19968;&#20010;&#25110;&#22810;&#20010;&#24378;&#31867;&#22411;&#30340;throws&#36890;&#30693;&#26041;&#27861;&#12290;&#36825;&#20123;&#26041;&#27861;&#24418;&#24335;
		&#22914;&#19979;&#65306;</p><pre class="programlisting">afterThrowing([Method], [args], [target], subclassOfThrowable) </pre><p>&#21482;&#26377;&#26368;&#21518;&#19968;&#20010;&#21442;&#25968;&#26159;&#24517;&#38656;&#30340;&#12290; &#36825;&#26679;&#20174;&#19968;&#20010;&#21442;&#25968;&#21040;&#22235;&#20010;&#21442;&#25968;&#65292;&#20381;&#36182;&#20110;&#36890;&#30693;&#26159;&#21542;&#23545;&#26041;&#27861;&#21644;&#26041;&#27861;
	    &#30340;&#21442;&#25968;&#24863;&#20852;&#36259;&#12290;&#19979;&#38754;&#26159;throws&#36890;&#30693;&#30340;&#20363;&#23376;&#12290;</p><p>&#22914;&#26524;&#25243;&#20986;<tt class="literal">RemoteException</tt>&#24322;&#24120;&#65288;&#21253;&#25324;&#23376;&#31867;&#65289;,
        &#36825;&#20010;&#36890;&#30693;&#20250;&#34987;&#35843;&#29992;</p><pre class="programlisting">public  class RemoteThrowsAdvice implements ThrowsAdvice {

    public void afterThrowing(RemoteException ex) throws Throwable {
        // Do something with remote exception
    }
}</pre><p>&#22914;&#26524;&#25243;&#20986;<span class="emphasis"><em>ServletException</em></span>&#24322;&#24120;&#65292;
        &#19979;&#38754;&#30340;&#36890;&#30693;&#20250;&#34987;&#35843;&#29992;&#12290;&#21644;&#19978;&#38754;&#30340;&#36890;&#30693;&#19981;&#19968;&#26679;&#65292;&#23427;&#22768;&#26126;&#20102;&#22235;&#20010;&#21442;&#25968;&#65292;&#25152;&#20197;&#23427;&#21487;&#20197;&#35775;&#38382;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#65292;&#26041;&#27861;&#30340;&#21442;&#25968;
		&#21644;&#30446;&#26631;&#23545;&#35937;:</p><pre class="programlisting">public static class ServletThrowsAdviceWithArguments implements ThrowsAdvice {

    public void afterThrowing(Method m, Object[] args, Object target, ServletException ex) {
        // Do something will all arguments
    }
}</pre><p>&#26368;&#21518;&#19968;&#20010;&#20363;&#23376;&#28436;&#31034;&#20102;&#22914;&#20309;&#22312;&#19968;&#20010;&#31867;&#20013;&#20351;&#29992;&#20004;&#20010;&#26041;&#27861;&#26469;&#21516;&#26102;&#22788;&#29702;
        <tt class="literal">RemoteException</tt>&#21644;<tt class="literal">ServletException</tt>
		&#24322;&#24120;&#12290;&#20219;&#24847;&#20010;&#25968;&#30340;throws&#26041;&#27861;&#21487;&#20197;&#34987;&#32452;&#21512;&#22312;&#19968;&#20010;&#31867;&#20013;&#12290;</p><pre class="programlisting">public static class CombinedThrowsAdvice implements ThrowsAdvice {

    public void afterThrowing(RemoteException ex) throws Throwable {
        // Do something with remote exception
    }
 
    public void afterThrowing(Method m, Object[] args, Object target, ServletException ex) {
        // Do something will all arguments
    }
}</pre><i><span class="remark">Throws&#36890;&#30693;&#21487;&#34987;&#29992;&#20110;&#20219;&#20309;&#31867;&#22411;&#30340;&#20999;&#20837;&#28857;&#12290;</span></i></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2910"></a>5.3.2.4.&nbsp;After Returning&#36890;&#30693;</h4></div></div><div></div></div><p>Spring&#20013;&#30340;after returning&#36890;&#30693;&#24517;&#39035;&#23454;&#29616;
        <span class="emphasis"><em>org.springframework.aop.AfterReturningAdvice</em></span>
        &#25509;&#21475;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">public interface AfterReturningAdvice extends Advice {

    void afterReturning(Object returnValue, Method m, Object[] args, Object target) 
            throws Throwable;
}</pre><p>After returning&#36890;&#30693;&#21487;&#20197;&#35775;&#38382;&#36820;&#22238;&#20540;&#65288;&#19981;&#33021;&#25913;&#21464;&#65289;&#12289;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#12289;&#26041;&#27861;&#30340;&#21442;&#25968;&#21644;
		&#30446;&#26631;&#23545;&#35937;&#12290;</p><p>&#19979;&#38754;&#30340;after returning&#36890;&#30693;&#32479;&#35745;&#25152;&#26377;&#25104;&#21151;&#30340;&#27809;&#26377;&#25243;&#20986;&#24322;&#24120;&#30340;&#26041;&#27861;&#35843;&#29992;&#65306;</p><pre class="programlisting">public class CountingAfterReturningAdvice implements AfterReturningAdvice {
    private int count;

    public void afterReturning(Object returnValue, Method m, Object[] args, Object target) throws Throwable {
        ++count;
    }

    public int getCount() {
        return count;
    }
}</pre><p>&#36825;&#26041;&#27861;&#19981;&#25913;&#21464;&#25191;&#34892;&#36335;&#24452;&#12290;&#22914;&#26524;&#23427;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65292;&#36825;&#20010;&#24322;&#24120;&#32780;&#19981;&#26159;&#36820;&#22238;&#20540;&#23558;&#34987;&#27839;&#30528;&#25318;&#25130;&#22120;&#38142;
	    &#21521;&#19978;&#25243;&#20986;&#12290;</p><i><span class="remark">After returning&#36890;&#30693;&#21487;&#34987;&#29992;&#20110;&#20219;&#20309;&#31867;&#22411;&#30340;&#20999;&#20837;&#28857;&#12290;</span></i></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e2930"></a>5.3.2.5.&nbsp;Introduction&#36890;&#30693;</h4></div></div><div></div></div><p>Spring&#23558;introduction&#36890;&#30693;&#30475;&#20316;&#19968;&#31181;&#29305;&#27530;&#31867;&#22411;&#30340;&#25318;&#25130;&#36890;&#30693;&#12290;</p><p>Introduction&#38656;&#35201;&#23454;&#29616;<tt class="literal">IntroductionAdvisor</tt>,
        &#21644;<tt class="literal">IntroductionInterceptor</tt>&#25509;&#21475;&#65306;</p><pre class="programlisting">public interface IntroductionInterceptor extends MethodInterceptor {

    boolean implementsInterface(Class intf);
}</pre><p>&#32487;&#25215;&#33258;AOP&#32852;&#30431;<tt class="literal">MethodInterceptor</tt>&#25509;&#21475;&#30340;
		<tt class="literal">invoke()</tt>&#26041;&#27861;&#24517;&#39035;&#23454;&#29616;&#23548;&#20837;&#65306;&#20063;&#23601;&#26159;&#35828;&#65292;&#22914;&#26524;&#34987;&#35843;&#29992;&#30340;&#26041;&#27861;&#26159;&#22312;
		&#23548;&#20837;&#30340;&#25509;&#21475;&#20013;&#65292;&#23548;&#20837;&#25318;&#25130;&#22120;&#36127;&#36131;&#22788;&#29702;&#36825;&#20010;&#26041;&#27861;&#35843;&#29992;&#65292;&#23427;&#19981;&#33021;&#35843;&#29992;<tt class="literal">proceed()</tt>
		&#26041;&#27861;&#12290;</p><p>Introduction&#36890;&#30693;&#19981;&#33021;&#34987;&#29992;&#20110;&#20219;&#20309;&#20999;&#20837;&#28857;&#65292;&#22240;&#20026;&#23427;&#21482;&#33021;&#20316;&#29992;&#20110;&#31867;&#23618;&#27425;&#19978;&#65292;&#32780;&#19981;&#26159;&#26041;&#27861;&#12290;
		&#20320;&#21487;&#20197;&#21482;&#29992;InterceptionIntroductionAdvisor&#26469;&#23454;&#29616;&#23548;&#20837;&#36890;&#30693;&#65292;&#23427;&#26377;&#19979;&#38754;&#30340;&#26041;&#27861;&#65306;</p><pre class="programlisting">public interface InterceptionIntroductionAdvisor extends InterceptionAdvisor {

    ClassFilter getClassFilter();

    IntroductionInterceptor getIntroductionInterceptor();

    Class[] getInterfaces();
}</pre><p>&#36825;&#37324;&#27809;&#26377;<tt class="literal">MethodMatcher</tt>&#65292;&#22240;&#27492;&#20063;&#27809;&#26377;&#21644;&#23548;&#20837;&#36890;&#30693;&#20851;&#32852;&#30340;
		<tt class="literal">&#20999;&#20837;&#28857;</tt>&#12290;&#21482;&#26377;&#31867;&#36807;&#28388;&#26159;&#21512;&#20046;&#36923;&#36753;&#30340;&#12290;</p><p><tt class="literal">getInterfaces()</tt>&#26041;&#27861;&#36820;&#22238;advisor&#23548;&#20837;&#30340;&#25509;&#21475;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#30475;&#19968;&#20010;&#26469;&#33258;Spring&#27979;&#35797;&#22871;&#20214;&#20013;&#30340;&#31616;&#21333;&#20363;&#23376;&#12290;&#25105;&#20204;&#20551;&#35774;&#24819;&#35201;&#23548;&#20837;&#19979;&#38754;&#30340;&#25509;&#21475;&#21040;&#19968;&#20010;
		&#25110;&#32773;&#22810;&#20010;&#23545;&#35937;&#20013;:</p><pre class="programlisting">public interface Lockable {
    void lock();
    void unlock();
    boolean locked();
}</pre><p>&#36825;&#20010;&#20363;&#23376;&#28436;&#31034;&#20102;&#19968;&#20010;<span class="bold"><b>mixin</b></span>&#12290;&#25105;&#20204;&#24819;&#35201;&#33021;&#22815;
		&#23558;&#34987;&#36890;&#30693;&#23545;&#35937;&#31867;&#22411;&#36716;&#25442;&#20026;Lockable&#65292;&#19981;&#31649;&#23427;&#20204;&#30340;&#31867;&#22411;&#65292;&#24182;&#19988;&#35843;&#29992;lock&#21644;unlock&#26041;&#27861;&#12290;&#22914;&#26524;&#25105;&#20204;&#35843;&#29992;
		lock()&#26041;&#27861;&#65292;&#25105;&#20204;&#24076;&#26395;&#25152;&#26377;setter&#26041;&#27861;&#25243;&#20986;<tt class="literal">LockedException</tt>&#24322;&#24120;&#12290;
		&#36825;&#26679;&#25105;&#20204;&#33021;&#28155;&#21152;&#19968;&#20010;&#26041;&#38754;&#20351;&#30340;&#23545;&#35937;&#19981;&#21487;&#21464;&#65292;&#32780;&#23427;&#20204;&#19981;&#38656;&#35201;&#30693;&#36947;&#36825;&#19968;&#28857;&#65306;&#36825;&#26159;&#19968;&#20010;&#24456;&#22909;&#30340;AOP&#20363;
		&#23376;&#12290;</p><p>&#39318;&#20808;&#65292;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#20570;&#22823;&#37327;&#36716;&#21270;&#30340;<tt class="literal">IntroductionInterceptor</tt>&#12290;
		&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#32487;&#25215;
		<tt class="literal">org.springframework.aop.support.DelegatingIntroductionInterceptor</tt>
		&#23454;&#29992;&#31867;&#12290;&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#23454;&#29616;IntroductionInterceptor&#25509;&#21475;&#65292;&#20294;&#26159;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;
		<tt class="literal">DelegatingIntroductionInterceptor</tt>&#26159;&#26368;&#21512;&#36866;&#30340;&#12290;</p><p><tt class="literal">DelegatingIntroductionInterceptor</tt>&#30340;&#35774;&#35745;&#26159;&#23558;&#23548;&#20837;
		&#22996;&#25176;&#21040;&#30495;&#27491;&#23454;&#29616;&#23548;&#20837;&#25509;&#21475;&#30340;&#25509;&#21475;&#65292;&#38544;&#34255;&#23436;&#25104;&#36825;&#20123;&#24037;&#20316;&#30340;&#25318;&#25130;&#22120;&#12290;&#22996;&#25176;&#21487;&#20197;&#20351;&#29992;&#26500;&#36896;&#26041;&#27861;&#21442;&#25968;
		&#35774;&#32622;&#21040;&#20219;&#20309;&#23545;&#35937;&#20013;&#65307;&#40664;&#35748;&#30340;&#22996;&#25176;&#23601;&#26159;&#33258;&#24049;&#65288;&#24403;&#26080;&#21442;&#25968;&#30340;&#26500;&#36896;&#26041;&#27861;&#34987;&#20351;&#29992;&#26102;&#65289;&#12290;&#36825;&#26679;&#22312;&#19979;&#38754;&#30340;
		&#20363;&#23376;&#37324;&#65292;&#22996;&#25176;&#26159;<tt class="literal">DelegatingIntroductionInterceptor</tt>&#30340;&#23376;&#31867;
		<tt class="literal">LockMixin</tt>&#12290;&#32473;&#23450;&#19968;&#20010;&#22996;&#25176;&#65288;&#40664;&#35748;&#26159;&#33258;&#36523;&#65289;&#30340;
		<tt class="literal">DelegatingIntroductionInterceptor</tt>&#23454;&#20363;&#23547;&#25214;&#34987;&#36825;&#20010;&#22996;&#25176;&#65288;&#32780;&#19981;
		&#26159;IntroductionInterceptor&#65289;&#23454;&#29616;&#30340;&#25152;&#26377;&#25509;&#21475;&#65292;&#24182;&#25903;&#25345;&#23427;&#20204;&#20013;&#20219;&#20309;&#19968;&#20010;&#23548;&#20837;&#12290;&#23376;&#31867;&#22914;
		<tt class="literal">LockMixin</tt>&#20063;&#21487;&#33021;&#35843;&#29992;<tt class="literal">suppressInterflace(Class intf) </tt>
		&#26041;&#27861;&#38544;&#34255;&#19981;&#24212;&#26292;&#38706;&#30340;&#25509;&#21475;&#12290;&#28982;&#32780;&#65292;&#19981;&#31649;<tt class="literal">IntroductionInterceptor</tt>
		&#20934;&#22791;&#25903;&#25345;&#22810;&#23569;&#25509;&#21475;&#65292;<tt class="literal">IntroductionAdvisor</tt>&#23558;&#25511;&#21046;&#21738;&#20010;&#25509;&#21475;&#23558;&#34987;&#23454;&#38469;
		&#26292;&#38706;&#12290;&#19968;&#20010;&#23548;&#20837;&#30340;&#25509;&#21475;&#23558;&#38544;&#34255;&#30446;&#26631;&#30340;&#21516;&#19968;&#20010;&#25509;&#21475;&#30340;&#25152;&#26377;&#23454;&#29616;&#12290;</p><p>&#36825;&#26679;&#65292;LockMixin&#32487;&#25215;<tt class="literal">DelegatingIntroductionInterceptor</tt> 
		&#24182;&#33258;&#24049;&#23454;&#29616;Lockable&#12290;&#29238;&#31867;&#33258;&#21160;&#36873;&#25321;&#25903;&#25345;&#23548;&#20837;&#30340;Lockable&#65292;&#25152;&#20197;&#25105;&#20204;&#19981;&#38656;&#35201;&#25351;&#23450;&#23427;&#12290;
		&#29992;&#36825;&#31181;&#26041;&#27861;&#25105;&#20204;&#21487;&#20197;&#23548;&#20837;&#20219;&#24847;&#25968;&#37327;&#30340;&#25509;&#21475;&#12290;</p><p>&#27880;&#24847;<tt class="literal">locked</tt>&#23454;&#20363;&#21464;&#37327;&#30340;&#20351;&#29992;&#12290;&#36825;&#26377;&#25928;&#22320;&#28155;&#21152;&#39069;&#22806;&#30340;&#29366;&#24577;&#21040;&#30446;&#26631;
		&#23545;&#35937;&#12290;</p><pre class="programlisting">public class LockMixin extends DelegatingIntroductionInterceptor 
    implements Lockable {

    private boolean locked;

    public void lock() {
        this.locked = true;
    }

    public void unlock() {
        this.locked = false;
    }

    public boolean locked() {
        return this.locked;
    }

    public Object invoke(MethodInvocation invocation) throws Throwable {
        if (locked() &amp;&amp; invocation.getMethod().getName().indexOf("set") == 0)
            throw new LockedException();
        return super.invoke(invocation);
    }

}</pre><p>&#36890;&#24120;&#19981;&#35201;&#38656;&#35201;&#25913;&#20889;<tt class="literal">invoke()</tt>&#26041;&#27861;&#65306;&#23454;&#29616;
        <tt class="literal">DelegatingIntroductionInterceptor</tt>&#23601;&#36275;&#22815;&#20102;&#65292;&#22914;&#26524;&#26159;&#23548;&#20837;&#30340;&#26041;&#27861;&#65292;
        <tt class="literal">DelegatingIntroductionInterceptor</tt>&#23454;&#29616;&#20250;&#35843;&#29992;&#22996;&#25176;&#26041;&#27861;&#65292;
		&#21542;&#21017;&#32487;&#32493;&#27839;&#30528;&#36830;&#25509;&#28857;&#22788;&#29702;&#12290;&#22312;&#29616;&#22312;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#38656;&#35201;&#28155;&#21152;&#19968;&#20010;&#26816;&#26597;&#65306;&#22312;&#19978;&#38145;
		&#29366;&#24577;&#19979;&#19981;&#33021;&#35843;&#29992;setter&#26041;&#27861;&#12290;</p><p>&#25152;&#38656;&#30340;&#23548;&#20837;advisor&#26159;&#24456;&#31616;&#21333;&#30340;&#12290;&#21482;&#26377;&#20445;&#23384;&#19968;&#20010;&#29420;&#31435;&#30340;
		<tt class="literal">LockMixin</tt>&#23454;&#20363;&#65292;&#24182;&#25351;&#23450;&#23548;&#20837;&#30340;&#25509;&#21475;&#65292;&#22312;&#36825;&#37324;&#23601;&#26159;
		<tt class="literal">Lockable</tt>&#12290;&#19968;&#20010;&#31245;&#24494;&#22797;&#26434;&#19968;&#28857;&#20363;&#23376;&#21487;&#33021;&#38656;&#35201;&#19968;&#20010;&#23548;&#20837;&#25318;&#25130;&#22120;&#65288;&#21487;&#20197;
		&#23450;&#20041;&#25104;prototype&#65289;&#30340;&#24341;&#29992;&#65306;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;<tt class="literal">LockMixin</tt>&#27809;&#26377;&#30456;&#20851;&#37197;&#32622;&#65292;&#25152;&#20197;&#25105;&#20204;&#31616;&#21333;&#22320;
		&#20351;&#29992;<tt class="literal">new</tt>&#26469;&#21019;&#24314;&#23427;&#12290;</p><pre class="programlisting">public class LockMixinAdvisor extends DefaultIntroductionAdvisor {

    public LockMixinAdvisor() {
        super(new LockMixin(), Lockable.class);
    }
}</pre><p>&#25105;&#20204;&#21487;&#20197;&#38750;&#24120;&#31616;&#21333;&#22320;&#20351;&#29992;&#36825;&#20010;advisor&#65306;&#23427;&#19981;&#38656;&#35201;&#20219;&#20309;&#37197;&#32622;&#12290;&#65288;&#20294;&#26159;&#65292;&#26377;&#19968;&#28857;
	    <span class="emphasis"><em>&#26159;</em></span>&#24517;&#35201;&#30340;&#65306;&#23601;&#26159;&#19981;&#21487;&#33021;&#22312;&#27809;&#26377;<span class="emphasis"><em>IntroductionAdvisor</em></span>
		&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;<tt class="literal">IntroductionInterceptor</tt>&#12290;&#65289; &#21644;&#23548;&#20837;&#19968;&#26679;&#65292;&#36890;&#24120;
		advisor&#24517;&#39035;&#26159;&#38024;&#23545;&#27599;&#20010;&#23454;&#20363;&#30340;&#65292;&#24182;&#19988;&#26159;&#26377;&#29366;&#24577;&#30340;&#12290;&#25105;&#20204;&#20250;&#26377;&#19981;&#21516;&#30340;&#30340;<tt class="literal">LockMixinAdvisor</tt>
		&#27599;&#20010;&#34987;&#36890;&#30693;&#23545;&#35937;&#65292;&#20250;&#26377;&#19981;&#21516;&#30340;<tt class="literal">LockMixin</tt>&#12290;
        advisor&#32452;&#25104;&#20102;&#34987;&#36890;&#30693;&#23545;&#35937;&#30340;&#29366;&#24577;&#30340;&#19968;&#37096;&#20998;&#12290;</p><p>&#21644;&#20854;&#20182;advisor&#19968;&#26679;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;
		<tt class="literal">Advised.addAdvisor() </tt>&#26041;&#27861;&#20197;&#32534;&#31243;&#22320;&#26041;&#24335;&#20351;&#29992;&#36825;&#31181;advisor&#65292;&#25110;&#32773;&#22312;XML&#20013;&#37197;&#32622;&#65288;&#25512;&#33616;&#36825;&#31181;&#26041;&#24335;&#65289;&#12290;
		&#19979;&#38754;&#23558;&#35752;&#35770;&#25152;&#26377;&#20195;&#29702;&#21019;&#24314;&#65292;&#21253;&#25324;&#8220;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#32773;&#8221;&#65292;&#36873;&#25321;&#20195;&#29702;&#21019;&#24314;&#20197;&#27491;&#30830;&#22320;&#22788;&#29702;&#23548;&#20837;&#21644;&#26377;&#29366;&#24577;&#30340;&#28151;&#20837;&#12290;</p></div></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3084"></a>5.4.&nbsp;Spring&#20013;&#30340;advisor </h2></div></div><div></div></div><p>
    &#22312;Spring&#20013;&#65292;&#19968;&#20010;advisor&#23601;&#26159;&#19968;&#20010;aspect&#30340;&#23436;&#25972;&#30340;&#27169;&#22359;&#21270;&#34920;&#31034;&#12290;
    &#19968;&#33324;&#22320;&#65292;&#19968;&#20010;advisor&#21253;&#25324;&#36890;&#30693;&#21644;&#20999;&#20837;&#28857;&#12290; 
    </p><p>&#25735;&#24320;&#23548;&#20837;&#36825;&#31181;&#29305;&#27530;&#24773;&#20917;&#65292;&#20219;&#20309;advisor&#21487;&#34987;&#29992;&#20110;&#20219;&#20309;&#36890;&#30693;&#12290;
    <tt class="literal">org.springframework.aop.support.DefaultPointcutAdvisor</tt>
    &#26159;&#26368;&#36890;&#29992;&#30340;advisor&#31867;&#12290;&#20363;&#22914;&#65292;&#23427;&#21487;&#20197;&#21644;<tt class="literal">MethodInterceptor</tt>&#12289;
	<tt class="literal">BeforeAdvice</tt>&#25110;&#32773;<tt class="literal">ThrowsAdvice</tt>&#19968;&#36215;&#20351;
	&#29992;&#12290;</p><p>Spring&#20013;&#21487;&#20197;&#23558;advisor&#21644;&#36890;&#30693;&#28151;&#21512;&#22312;&#19968;&#20010;AOP&#20195;&#29702;&#20013;&#12290;&#20363;&#22914;&#65292;&#20320;&#21487;&#20197;&#22312;&#19968;&#20010;&#20195;&#29702;&#37197;&#32622;&#20013;
	&#20351;&#29992;&#19968;&#20010;&#23545;around&#36890;&#30693;&#12289;throws&#36890;&#30693;&#21644;before&#36890;&#30693;&#30340;&#25318;&#25130;&#65306;Spring&#23558;&#33258;&#21160;&#21019;&#24314;&#24517;&#35201;&#30340;&#25318;&#25130;&#22120;&#38142;&#12290;</p></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-pfb"></a>5.5.&nbsp;&#29992;ProxyFactoryBean&#21019;&#24314;AOP&#20195;&#29702;</h2></div></div><div></div></div><p>
    &#22914;&#26524;&#20320;&#22312;&#20026;&#20320;&#30340;&#19994;&#21153;&#23545;&#35937;&#20351;&#29992;Spring&#30340;IoC&#23481;&#22120;(&#20363;&#22914;ApplicationContext&#25110;&#32773;BeanFactory)&#65292;
    &#20320;&#24212;&#35813;&#20250;&#25110;&#32773;&#20320;&#24895;&#24847;&#20250;&#20351;&#29992;Spring&#30340;aop FactoryBean(&#35760;&#20303;&#65292;factory bean&#24341;&#20837;&#20102;&#19968;&#20010;&#38388;&#25509;&#23618;&#65292;
	&#23427;&#33021;&#21019;&#24314;&#19981;&#21516;&#31867;&#22411;&#30340;&#23545;&#35937;).
    </p><p>
    &#22312;spring&#20013;&#21019;&#24314;AOP proxy&#30340;&#22522;&#26412;&#36884;&#24452;&#26159;&#20351;&#29992;org.springframework.aop.framework.ProxyFactoryBean.
    &#36825;&#26679;&#21487;&#20197;&#23545;pointcut&#21644;advice&#20316;&#31934;&#30830;&#25511;&#21046;&#12290;&#20294;&#26159;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#36825;&#31181;&#25511;&#21046;&#65292;&#37027;&#20123;&#31616;&#21333;&#30340;&#36873;&#25321;&#21487;&#33021;&#26356;&#36866;&#21512;&#20320;&#12290;
    </p><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-pfb-1"></a>5.5.1.&nbsp;&#22522;&#26412;&#27010;&#35201;</h3></div></div><div></div></div><p><tt class="literal">ProxyFactoryBean</tt>&#65292;&#21644;&#20854;&#20182;Spring&#30340;
      <tt class="literal">FactoryBean</tt>&#23454;&#29616;&#19968;&#26679;&#65292;&#24341;&#20837;&#19968;&#20010;&#38388;&#25509;&#30340;&#23618;&#27425;&#12290;&#22914;&#26524;&#20320;
	  &#23450;&#20041;&#19968;&#20010;&#21517;&#23383;&#20026;<tt class="literal">foo</tt>&#30340;<tt class="literal">ProxyFactoryBean</tt>&#65292;
	  &#24341;&#29992;<tt class="literal">foo</tt>&#30340;&#23545;&#35937;&#25152;&#30475;&#21040;&#30340;&#19981;&#26159;<tt class="literal">ProxyFactoryBean</tt>
	  &#23454;&#20363;&#26412;&#36523;&#65292;&#32780;&#26159;&#30001;&#23454;&#29616;<tt class="literal">ProxyFactoryBean</tt>&#30340;&#31867;&#30340;
	  <tt class="literal">getObject()</tt>&#26041;&#27861;&#25152;&#21019;&#24314;&#30340;&#23545;&#35937;&#12290;&#36825;&#20010;&#26041;&#27861;&#23558;&#21019;&#24314;&#19968;&#20010;&#21253;&#35013;&#20102;&#30446;&#26631;&#23545;&#35937;
	  &#30340;AOP&#20195;&#29702;&#12290;</p><p>&#20351;&#29992;<tt class="literal">ProxyFactoryBean</tt>&#25110;&#32773;&#20854;&#20182;IoC&#21487;&#30693;&#30340;&#31867;&#26469;&#21019;&#24314;AOP&#20195;&#29702;
	  &#30340;&#26368;&#37325;&#35201;&#30340;&#20248;&#28857;&#20043;&#19968;&#26159;IoC&#21487;&#20197;&#31649;&#29702;&#36890;&#30693;&#21644;&#20999;&#20837;&#28857;&#12290;&#36825;&#26159;&#19968;&#20010;&#38750;&#24120;&#30340;&#24378;&#22823;&#30340;&#21151;&#33021;&#65292;&#33021;&#22815;&#23454;
	  &#29616;&#20854;&#20182;AOP&#26694;&#26550;&#24456;&#38590;&#23454;&#29616;&#30340;&#29305;&#23450;&#30340;&#26041;&#27861;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#36890;&#30693;&#26412;&#36523;&#21487;&#20197;&#24341;&#29992;&#24212;&#29992;&#23545;&#35937;&#65288;&#38500;&#20102;&#30446;&#26631;&#23545;&#35937;&#65292;
	  &#23427;&#22312;&#20219;&#20309;AOP&#26694;&#26550;&#20013;&#37117;&#21487;&#20197;&#24341;&#29992;&#24212;&#29992;&#23545;&#35937;&#65289;&#65292;&#36825;&#23436;&#20840;&#24471;&#30410;&#20110;&#20381;&#36182;&#27880;&#20837;&#25152;&#25552;&#20379;&#30340;&#21487;&#25554;&#20837;&#24615;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-pfb-2"></a>5.5.2.&nbsp;JavaBean&#30340;&#23646;&#24615;</h3></div></div><div></div></div><p>
      &#31867;&#20284;&#20110;Spring&#25552;&#20379;&#30340;&#32477;&#22823;&#37096;&#20998;FactoryBean&#23454;&#29616;&#19968;&#26679;&#65292;
      <tt class="literal">ProxyFactoryBean</tt>&#20063;&#26159;&#19968;&#20010;javabean&#65292;&#25105;&#20204;&#21487;&#20197;&#21033;&#29992;&#23427;&#30340;&#23646;&#24615;&#26469;: 
      </p><div class="itemizedlist"><ul type="disc"><li><p>&#25351;&#23450;&#20320;&#23558;&#35201;&#20195;&#29702;&#30340;&#30446;&#26631; </p></li><li><p>&#25351;&#23450;&#26159;&#21542;&#20351;&#29992;CGLIB </p></li></ul></div><p>&#19968;&#20123;&#20851;&#38190;&#23646;&#24615;&#26469;&#33258;<tt class="literal">org.springframework.aop.framework.ProxyConfig</tt>
	  &#65306;&#23427;&#26159;&#25152;&#26377;AOP&#20195;&#29702;&#24037;&#21378;&#30340;&#29238;&#31867;&#12290;&#36825;&#20123;&#20851;&#38190;&#23646;&#24615;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">proxyTargetClass</tt>&#65306; &#22914;&#26524;&#25105;&#20204;&#24212;&#35813;&#20195;&#29702;&#30446;&#26631;&#31867;&#65292;
		  &#32780;&#19981;&#26159;&#25509;&#21475;&#65292;&#36825;&#20010;&#23646;&#24615;&#30340;&#20540;&#20026;true&#12290;&#22914;&#26524;&#36825;&#26159;true&#65292;&#25105;&#20204;&#38656;&#35201;&#20351;&#29992;CGLIB&#12290;</p></li><li><p><tt class="literal">optimize</tt>&#65306; &#26159;&#21542;&#20351;&#29992;&#24378;&#20248;&#21270;&#26469;&#21019;&#24314;&#20195;&#29702;&#12290;&#19981;&#35201;&#20351;&#29992;
		  &#36825;&#20010;&#35774;&#32622;&#65292;&#38500;&#38750;&#20320;&#20102;&#35299;&#30456;&#20851;&#30340;AOP&#20195;&#29702;&#26159;&#22914;&#20309;&#22788;&#29702;&#20248;&#21270;&#30340;&#12290;&#30446;&#21069;&#36825;&#21482;&#23545;CGLIB&#20195;&#29702;&#26377;&#25928;&#65307;&#23545;JDK
		  &#21160;&#24577;&#20195;&#29702;&#26080;&#25928;&#65288;&#40664;&#35748;&#65289;&#12290;</p></li><li><p><tt class="literal">frozen</tt>&#65306; &#26159;&#21542;&#31105;&#27490;&#36890;&#30693;&#30340;&#25913;&#21464;&#65292;&#19968;&#26086;&#20195;&#29702;&#24037;&#21378;&#24050;&#32463;&#37197;&#32622;&#12290;
		  &#40664;&#35748;&#26159;false&#12290;</p></li><li><p><tt class="literal">exposeProxy</tt>: &#24403;&#21069;&#20195;&#29702;&#26159;&#21542;&#35201;&#26292;&#38706;&#22312;ThreadLocal&#20013;&#65292;
		  &#20197;&#20415;&#23427;&#21487;&#20197;&#34987;&#30446;&#26631;&#23545;&#35937;&#35775;&#38382;&#12290;(&#23427;&#21487;&#20197;&#36890;&#36807;MethodInvocation&#24471;&#21040;&#65292;&#19981;&#38656;&#35201;ThreadLocal&#65289;&#12290;
		  &#22914;&#26524;&#19968;&#20010;&#30446;&#26631;&#38656;&#35201;&#33719;&#24471;&#23427;&#30340;&#20195;&#29702;&#24182;&#19988;exposeProxy&#30340;&#20540;&#26159;ture&#65292;&#21487;&#20197;&#20351;&#29992;
		  <tt class="literal">AopContext.currentProxy()</tt>&#26041;&#27861;&#12290;</p></li><li><p><tt class="literal">aopProxyFactory</tt>: &#25152;&#20351;&#29992;&#30340;AopProxyFactory&#20855;&#20307;&#23454;&#29616;&#12290;
		  &#36825;&#20010;&#21442;&#25968;&#25552;&#20379;&#20102;&#19968;&#26465;&#36884;&#24452;&#26469;&#23450;&#20041;&#26159;&#21542;&#20351;&#29992;&#21160;&#24577;&#20195;&#29702;&#12289;CGLIB&#36824;&#26159;&#20854;&#20182;&#20195;&#29702;&#31574;&#30053;&#12290;&#40664;&#35748;&#23454;&#29616;&#23558;&#36866;&#24403;&#22320;&#36873;&#25321;&#21160;&#24577;
		  &#20195;&#29702;&#25110;CGLIB&#12290;&#19968;&#33324;&#19981;&#38656;&#35201;&#20351;&#29992;&#36825;&#20010;&#23646;&#24615;&#65307;&#23427;&#30340;&#24847;&#22270;&#26159;&#20801;&#35768;Spring 1.1&#20351;&#29992;&#21478;&#22806;&#26032;&#30340;&#20195;&#29702;&#31867;&#22411;&#12290;
          </p></li></ul></div><p>&#20854;&#20182;<tt class="literal">ProxyFactoryBean</tt>&#29305;&#23450;&#30340;&#23646;&#24615;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">proxyInterfaces</tt>: &#25509;&#21475;&#21517;&#31216;&#30340;&#23383;&#31526;&#20018;&#25968;&#32452;&#12290;&#22914;&#26524;&#36825;&#20010;
		  &#27809;&#26377;&#25552;&#20379;&#65292;CGLIB&#20195;&#29702;&#23558;&#34987;&#29992;&#20110;&#30446;&#26631;&#31867;&#12290;</p></li><li><p><tt class="literal">interceptorNames</tt>: Advisor&#12289;interceptor&#25110;&#20854;&#20182;
		  &#34987;&#24212;&#29992;&#30340;&#36890;&#30693;&#21517;&#31216;&#30340;&#23383;&#31526;&#20018;&#25968;&#32452;&#12290;&#39034;&#24207;&#26159;&#24456;&#37325;&#35201;&#30340;&#12290;&#36825;&#37324;&#30340;&#21517;&#31216;&#26159;&#24403;&#21069;&#24037;&#21378;&#20013;bean&#30340;&#21517;&#31216;&#65292;&#21253;
		  &#25324;&#26469;&#33258;&#31062;&#20808;&#24037;&#21378;&#30340;bean&#30340;&#21517;&#31216;&#12290;</p></li><li><p><tt class="literal">singleton</tt>: &#24037;&#21378;&#26159;&#21542;&#36820;&#22238;&#19968;&#20010;&#21333;&#29420;&#30340;&#23545;&#35937;&#65292;&#26080;&#35770;
		  <tt class="literal">getObject()</tt>&#34987;&#35843;&#29992;&#22810;&#23569;&#27425;&#12290;&#35768;&#22810;<tt class="literal">FactoryBean</tt>
		  &#30340;&#23454;&#29616;&#25552;&#20379;&#36825;&#20010;&#26041;&#27861;&#12290;&#40664;&#35748;&#20540;&#26159;true&#12290;&#22914;&#26524;&#20320;&#24819;&#35201;&#20351;&#29992;&#26377;&#29366;&#24577;&#30340;&#36890;&#30693;&#65293;&#65293;&#20363;&#22914;&#65292;&#29992;&#20110;&#26377;&#29366;&#24577;&#30340;
		  mixin&#65293;&#65293;&#23558;&#36825;&#20010;&#20540;&#35774;&#20026;false&#65292;&#20351;&#29992;prototype&#36890;&#30693;&#12290;</p></li></ul></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3221"></a>5.5.3.&nbsp;&#20195;&#29702;&#25509;&#21475;</h3></div></div><div></div></div><p>&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#31616;&#21333;&#30340;ProxyFactoryBean&#30340;&#23454;&#38469;&#20363;&#23376;&#12290;&#36825;&#20010;&#20363;&#23376;&#28041;&#21450;&#21040; :</p><div class="itemizedlist"><ul type="disc"><li><p>
          &#19968;&#20010;&#23558;&#34987;&#20195;&#29702;&#30340;&#30446;&#26631;bean,&#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;&#36825;&#20010;bean&#30340;&#34987;&#23450;&#20041;&#20026;"personTarget". 
          </p></li><li><p>&#19968;&#20010;advisor&#21644;&#19968;&#20010;interceptor&#26469;&#25552;&#20379;advice. </p></li><li><p>&#19968;&#20010;AOP&#20195;&#29702;bean&#23450;&#20041;&#65292;&#35813;bean&#25351;&#23450;&#30446;&#26631;&#23545;&#35937;(&#36825;&#37324;&#26159;personTarget bean),
		  &#20195;&#29702;&#25509;&#21475;&#65292;&#21644;&#20351;&#29992;&#30340;advice.</p></li></ul></div><pre class="programlisting">&lt;bean id="personTarget" class="com.mycompany.PersonImpl"&gt;
    &lt;property name="name"&gt;&lt;value&gt;Tony&lt;/value&gt;&lt;/property&gt;
    &lt;property name="age"&gt;&lt;value&gt;51&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="myAdvisor" class="com.mycompany.MyAdvisor"&gt;
    &lt;property name="someProperty"&gt;&lt;value&gt;Custom string property value&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="debugInterceptor" class="org.springframework.aop.interceptor.NopInterceptor"&gt;
&lt;/bean&gt;

&lt;bean id="person" 
    class="org.springframework.aop.framework.ProxyFactoryBean"&gt;
    &lt;property name="proxyInterfaces"&gt;&lt;value&gt;com.mycompany.Person&lt;/value&gt;&lt;/property&gt;

    &lt;property name="target"&gt;&lt;ref local="personTarget"/&gt;&lt;/property&gt;
    &lt;property name="interceptorNames"&gt;
        &lt;list&gt;
            &lt;value&gt;myAdvisor&lt;/value&gt;
            &lt;value&gt;debugInterceptor&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>
      &#35831;&#27880;&#24847;:person bean&#30340;<tt class="literal">interceptorNames</tt>&#23646;&#24615;&#25552;&#20379;&#19968;&#20010;String&#21015;&#34920;&#65292;
      &#21015;&#20986;&#30340;&#26159;&#35813;ProxyFactoryBean&#20351;&#29992;&#30340;,&#22312;&#24403;&#21069;bean&#24037;&#21378;&#23450;&#20041;&#30340;interceptor&#25110;&#32773;advisor&#30340;
	  &#21517;&#23383;(advisor,interceptor,before,after returning,&#21644;throws advice &#23545;&#35937;&#30342;&#21487;)&#12290;
	  Advisor&#22312;&#35813;&#21015;&#34920;&#20013;&#30340;&#27425;&#24207;&#24456;&#37325;&#35201;&#12290;
      </p><i><span class="remark">
      &#20320;&#20063;&#35768;&#20250;&#23545;&#35813;&#21015;&#34920;&#20026;&#20160;&#20040;&#19981;&#37319;&#29992;bean&#30340;&#24341;&#29992;&#23384;&#26377;&#30097;&#38382;&#12290;
      &#21407;&#22240;&#23601;&#22312;&#20110;&#22914;&#26524;ProxyFactoryBean&#30340;singleton&#23646;&#24615;&#34987;&#35774;&#32622;&#20026;false,
      &#37027;&#20040;bean&#24037;&#21378;&#24517;&#39035;&#33021;&#36820;&#22238;&#22810;&#20010;&#29420;&#31435;&#30340;&#20195;&#29702;&#23454;&#20363;&#12290;
      &#22914;&#26524;&#26377;&#20219;&#20309;&#19968;&#20010;advisor&#26412;&#36523;&#26159;prototype&#30340;&#65292;&#37027;&#20040;&#23427;&#23601;&#38656;&#35201;&#36820;&#22238;&#29420;&#31435;&#30340;&#23454;&#20363;&#65292;
      &#20063;&#23601;&#26159;&#26377;&#24517;&#35201;&#20174;bean&#24037;&#21378;&#33719;&#21462;advisor&#30340;&#19981;&#21516;&#23454;&#20363;&#65292;bean&#30340;&#24341;&#29992;&#22312;&#36825;&#37324;&#26174;&#28982;&#26159;&#19981;&#22815;&#30340;&#12290;
      </span></i><p>
      &#19978;&#38754;&#23450;&#20041;&#30340;&#8220;person&#8221;bean&#23450;&#20041;&#21487;&#20197;&#20316;&#20026;Person&#25509;&#21475;&#30340;&#23454;&#29616;&#26469;&#20351;&#29992;&#65292;&#22914;&#19979;&#25152;&#31034;: 
      </p><pre class="programlisting">Person person = (Person) factory.getBean("person");</pre><p>
      &#22312;&#21516;&#19968;&#20010;IoC&#30340;&#19978;&#19979;&#25991;&#20013;&#65292;&#20854;&#20182;&#30340;bean&#21487;&#20197;&#20381;&#36182;&#20110;Person&#25509;&#21475;&#65292;&#23601;&#35937;&#20381;&#36182;&#20110;&#19968;&#20010;&#26222;&#36890;&#30340;java&#23545;&#35937;&#19968;&#26679;&#12290;
      </p><pre class="programlisting">&lt;bean id="personUser" class="com.mycompany.PersonUser"&gt;
    &lt;property name="person"&gt;&lt;ref local="person" /&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>
      &#22312;&#36825;&#20010;&#20363;&#23376;&#37324;&#65292;<tt class="literal">PersonUser</tt>&#31867;&#26292;&#38706;&#20102;&#19968;&#20010;&#31867;&#22411;&#20026;Person&#30340;&#23646;&#24615;&#12290;
      &#21482;&#35201;&#26159;&#22312;&#29992;&#21040;&#35813;&#23646;&#24615;&#30340;&#22320;&#26041;&#65292;AOP&#20195;&#29702;&#37117;&#33021;&#36879;&#26126;&#30340;&#26367;&#20195;&#19968;&#20010;&#30495;&#23454;&#30340;Person&#23454;&#29616;&#12290;
      &#20294;&#26159;&#65292;&#36825;&#20010;&#31867;&#21487;&#33021;&#26159;&#19968;&#20010;&#21160;&#24577;&#20195;&#29702;&#31867;&#12290;&#20063;&#23601;&#26159;&#26377;&#21487;&#33021;&#25226;&#23427;&#31867;&#22411;&#36716;&#25442;&#20026;&#19968;&#20010;<tt class="literal">Advised</tt>&#25509;&#21475;
      (&#35813;&#25509;&#21475;&#22312;&#19979;&#38754;&#30340;&#31456;&#33410;&#20013;&#35770;&#36848;) &#12290;
      </p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3263"></a>5.5.4.&nbsp;&#20195;&#29702;&#31867;</h3></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#38656;&#35201;&#20195;&#29702;&#30340;&#26159;&#31867;&#65292;&#32780;&#19981;&#26159;&#19968;&#20010;&#25110;&#22810;&#20010;&#25509;&#21475;&#65292;&#21448;&#35813;&#24590;&#20040;&#21150;&#21602;? </p><p>
      &#24819;&#35937;&#19968;&#19979;&#25105;&#20204;&#19978;&#38754;&#30340;&#20363;&#23376;&#65292;&#22914;&#26524;&#27809;&#26377;<tt class="literal">Person</tt>&#25509;&#21475;&#65292;
      &#25105;&#20204;&#38656;&#35201;&#36890;&#30693;&#19968;&#20010;&#21483;<tt class="literal">Person</tt>&#30340;&#31867;&#65292;
      &#32780;&#19988;&#35813;&#31867;&#27809;&#26377;&#23454;&#29616;&#20219;&#20309;&#19994;&#21153;&#25509;&#21475;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;Spring&#20351;&#29992;CGLIB&#20195;&#29702;&#65292;
      &#32780;&#19981;&#26159;&#21160;&#24577;&#20195;&#29702;&#12290;&#20320;&#21482;&#35201;&#22312;&#19978;&#38754;&#30340;<tt class="literal">ProxyFactoryBean</tt>&#23450;&#20041;&#20013;&#25226;
      &#23427;&#30340;<tt class="literal">proxyTargetClass</tt>&#23646;&#24615;&#25913;&#25104;true&#23601;&#34892;&#20102;&#12290;
      </p><p>&#21482;&#35201;&#20320;&#24895;&#24847;&#65292;&#21363;&#20351;&#22312;&#26377;&#25509;&#21475;&#30340;&#24773;&#20917;&#19979;&#65292;&#20320;&#20063;&#21487;&#20197;&#24378;&#36843;Spring&#20351;&#29992;CGLIB&#20195;&#29702;&#12290;</p><p>CGLIB&#20195;&#29702;&#26159;&#36890;&#36807;&#22312;&#36816;&#34892;&#26399;&#20135;&#29983;&#30446;&#26631;&#31867;&#30340;&#23376;&#31867;&#26469;&#36827;&#34892;&#24037;&#20316;&#30340;&#12290;
      Spring&#21487;&#20197;&#37197;&#32622;&#36825;&#20010;&#29983;&#25104;&#30340;&#23376;&#31867;&#65292;&#26469;&#20195;&#29702;&#21407;&#22987;&#30446;&#26631;&#31867;&#30340;&#26041;&#27861;&#35843;&#29992;&#12290;&#36825;&#20010;&#23376;&#31867;&#26159;&#29992;
      <span class="emphasis"><em>Decorator</em></span>&#35774;&#35745;&#27169;&#24335;&#32622;&#20837;&#21040;advice&#20013;&#30340;&#12290; 
      </p><p>CGLIB&#20195;&#29702;&#23545;&#20110;&#29992;&#25143;&#26469;&#35828;&#24212;&#35813;&#26159;&#36879;&#26126;&#30340;&#12290;&#28982;&#32780;&#65292;&#36824;&#26377;&#20197;&#19979;&#19968;&#20123;&#22240;&#32032;&#38656;&#35201;&#32771;&#34385;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">Final</tt>&#26041;&#27861;&#19981;&#33021;&#34987;&#36890;&#30693;&#65292;&#22240;&#20026;&#19981;&#33021;&#34987;&#37325;&#20889;&#12290;
          </p></li><li><p>&#20320;&#38656;&#35201;&#22312;&#20320;&#30340;classpath&#20013;&#21253;&#25324;CGLIB&#30340;&#20108;&#36827;&#21046;&#20195;&#30721;&#65292;&#32780;&#21160;&#24577;&#20195;&#29702;&#23545;&#20219;&#20309;JDK&#37117;&#26159;&#21487;&#29992;&#30340;. </p></li></ul></div><p>CGLIB&#21644;&#21160;&#24577;&#20195;&#29702;&#22312;&#24615;&#33021;&#19978;&#26377;&#24494;&#23567;&#30340;&#21306;&#21035;&#65292;&#23545;Spring 1.0&#26469;&#35828;&#65292;&#21518;&#32773;&#31245;&#24555;&#12290;
      &#21478;&#22806;,&#20197;&#21518;&#21487;&#33021;&#20250;&#26377;&#21464;&#21270;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#24615;&#33021;&#19981;&#26159;&#20915;&#23450;&#24615;&#22240;&#32032;</p></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-tfb"></a>5.6.&nbsp;&#20415;&#21033;&#30340;&#20195;&#29702;&#21019;&#24314;&#26041;&#24335;</h2></div></div><div></div></div><p>
    &#36890;&#24120;&#65292;&#25105;&#20204;&#19981;&#38656;&#35201;<tt class="literal">ProxyFactoryBean</tt>&#30340;&#20840;&#37096;&#21151;&#33021;&#65292;&#22240;&#20026;&#25105;&#20204;&#24120;&#24120;&#21482;&#23545;&#19968;&#20010;&#26041;&#38754;&#24863;&#20852;&#36259;&#65306;
    &#20363;&#22914;&#65292;&#20107;&#21153;&#31649;&#29702;&#12290;
    </p><p>&#24403;&#25105;&#20204;&#20165;&#20165;&#23545;&#19968;&#20010;&#29305;&#23450;&#30340;&#26041;&#38754;&#24178;&#20852;&#36259;&#26102;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#35768;&#22810;&#20415;&#21033;&#30340;&#24037;&#21378;&#26469;&#21019;&#24314;AOP&#20195;&#29702;&#12290;&#36825;&#20123;&#22312;&#20854;&#20182;
	&#31456;&#33410;&#35752;&#35770;&#65292;&#25152;&#20197;&#36825;&#37324;&#25105;&#20204;&#24555;&#36895;&#27983;&#35272;&#19968;&#19979;&#23427;&#20204;&#12290;</p><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3312"></a>5.6.1.&nbsp;TransactionProxyFactoryBean</h3></div></div><div></div></div><p>
      &#29992;Spring&#25552;&#20379;&#30340;<span class="bold"><b>jPetStore</b></span>&#30340;&#31034;&#20363;&#24212;&#29992;
      &#28436;&#31034;&#20102;TransactionProxyFactoryBean&#30340;&#20351;&#29992;&#26041;&#24335;&#12290; 
      </p><p>
      <tt class="literal">TransactionProxyFactoryBean</tt>&#26159;<tt class="literal">ProxyConfig</tt>&#30340;&#23376;&#31867;&#65292;
      &#22240;&#27492;&#22522;&#26412;&#37197;&#32622;&#20449;&#24687;&#26159;&#21644;<tt class="literal">ProxyFactoryBean</tt>&#20849;&#20139;&#30340;&#12290; 
      (&#35265;&#19978;&#38754;<tt class="literal">ProxyConfig</tt>&#30340;&#23646;&#24615;&#21015;&#34920;&#12290;)
      </p><p>
      &#19979;&#38754;&#30340;&#20195;&#30721;&#26469;&#33258;&#20110;JPetStore application&#65292;&#28436;&#31034;&#20102;<tt class="literal">ProxyFactoryBean</tt>&#26159;&#22914;&#20309;&#24037;&#20316;&#30340;&#12290;
      &#36319;ProxyFactoryBean&#19968;&#26679;&#65292;&#23384;&#22312;&#19968;&#20010;&#30446;&#26631;bean&#30340;&#23450;&#20041;&#12290;
      &#31867;&#30340;&#20381;&#36182;&#20851;&#31995;&#23450;&#20041;&#22312;&#20195;&#29702;&#24037;&#21378;bean&#23450;&#20041;&#20013;&#65288;petStore&#65289;&#65292;&#32780;&#19981;&#26159;&#26222;&#36890;Java&#23545;&#35937;&#65288;petStoreTarget&#65289;&#12290;       
      </p><p>
      <tt class="literal">TransactionProxyFactoryBean</tt>&#38656;&#35201;&#35774;&#32622;&#19968;&#20010;<tt class="literal">target</tt>&#23646;&#24615;&#65292;
      &#36824;&#38656;&#35201;&#35774;&#32622;&#8220;<tt class="literal">transactionAttributes</tt>&#8221;&#65292;
      &#8220;<tt class="literal">transactionAttributes</tt>&#8221;&#29992;&#26469;&#25351;&#23450;&#38656;&#35201;&#20107;&#21153;&#21270;
      &#22788;&#29702;&#30340;&#26041;&#27861;&#65292;&#36824;&#26377;&#35201;&#27714;&#30340;&#20256;&#25773;&#26041;&#24335;&#21644;&#20854;&#20182;&#35774;&#32622;:
      </p><pre class="programlisting">&lt;bean id="petStoreTarget" class="org.springframework.samples.jpetstore.domain.logic.PetStoreImpl"&gt;
    &lt;property name="accountDao"&gt;&lt;ref bean="accountDao"/&gt;&lt;/property&gt;
    &lt;!-- Other dependencies omitted --&gt;
&lt;/bean&gt;

&lt;bean id="petStore" 
    class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"&gt;
    &lt;property name="transactionManager"&gt;&lt;ref bean="transactionManager"/&gt;&lt;/property&gt;
    &lt;property name="target"&gt;&lt;ref local="petStoreTarget"/&gt;&lt;/property&gt;
    &lt;property name="transactionAttributes"&gt;
        &lt;props&gt;
            &lt;prop key="insert*"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;
            &lt;prop key="update*"&gt;PROPAGATION_REQUIRED&lt;/prop&gt;
            &lt;prop key="*"&gt;PROPAGATION_REQUIRED,readOnly&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>
      <tt class="literal">TransactionProxyFactoryBean</tt>&#33258;&#21160;&#21019;&#24314;&#19968;&#20010;&#20107;&#21153;advisor&#65292;
      &#35813;advisor&#21253;&#25324;&#19968;&#20010;&#22522;&#20110;&#20107;&#21153;&#23646;&#24615;&#30340;&#20999;&#20837;&#28857;&#12290;&#22240;&#27492;&#21482;&#26377;&#20107;&#21153;&#24615;&#30340;&#26041;&#27861;&#34987;&#36890;&#30693;&#12290;
      </p><p><tt class="literal">TransactionProxyFactoryBean</tt>&#20351;&#29992;preInterceptors&#21644;
	  postInterceptors&#23646;&#24615;&#25351;&#23450;&#8220;pre&#8221;&#21644;&#8220;post&#8221;&#36890;&#30693;&#12290;&#23427;&#20204;&#23558;&#25318;&#25130;&#22120;&#65292;&#36890;&#30693;&#21644;Advisor&#25968;&#32452;&#25918;&#32622;
	  &#22312;&#20107;&#21153;&#25318;&#25130;&#22120;&#21069;&#21518;&#30340;&#25318;&#25130;&#22120;&#38142;&#20013;&#12290;&#20351;&#29992;XML&#26684;&#24335;&#30340;bean&#23450;&#20041;&#20013;&#30340;&lt;list&gt;&#20803;&#32032;&#23450;&#20041;&#65292;&#23601;
	  &#35937;&#19979;&#38754;&#19968;&#26679;&#65306;
	  </p><pre class="programlisting">&lt;property name="preInterceptors"&gt;
    &lt;list&gt;
        &lt;ref local="authorizationInterceptor"/&gt;
        &lt;ref local="notificationBeforeAdvice"/&gt;
    &lt;/list&gt;
&lt;/property&gt;
&lt;property name="postInterceptors"&gt;
    &lt;list&gt;
        &lt;ref local="myAdvisor"/&gt;
    &lt;/list&gt;
&lt;/property&gt;</pre><p>&#36825;&#20123;&#23646;&#24615;&#21487;&#20197;&#21152;&#21040;&#19978;&#38754;&#30340;&#8220;petStore&#8221;&#30340;bean&#23450;&#20041;&#37324;&#12290;&#19968;&#20010;&#36890;&#29992;&#29992;&#27861;&#26159;&#23558;&#20107;&#21153;&#21644;&#22768;&#26126;&#24335;
	  &#23433;&#20840;&#32452;&#21512;&#22312;&#19968;&#36215;&#20351;&#29992;&#65306;&#19968;&#20010;&#21644;EJB&#25552;&#20379;&#30340;&#31867;&#20284;&#30340;&#26041;&#27861;&#12290;</p><p>&#22240;&#20026;&#20351;&#29992;&#21069;&#25318;&#25130;&#22120;&#21644;&#21518;&#25318;&#25130;&#22120;&#26102;&#65292;&#29992;&#30340;&#26159;&#30495;&#27491;&#30340;&#23454;&#20363;&#24341;&#29992;&#65292;&#32780;&#19981;&#35937;&#22312;
      <tt class="literal">ProxyFactoryBean</tt>&#20013;&#29992;&#30340;bean&#30340;&#21517;&#23383;&#65292;&#22240;&#27492;&#23427;&#20204;&#21482;&#33021;&#29992;&#20110;&#20849;&#20139;&#23454;&#20363;&#30340;&#36890;&#30693;&#12290;
      &#22240;&#27492;&#23427;&#20204;&#19981;&#33021;&#29992;&#22312;&#26377;&#29366;&#24577;&#30340;&#36890;&#30693;&#20013;&#65306;&#20363;&#22914;&#65292;&#22312;mixin&#20013;&#12290;&#36825;&#21644;TransactionProxyFactoryBean&#30340;&#35201;&#27714;&#26159;
      &#19968;&#33268;&#30340;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#26356;&#22797;&#26434;&#30340;&#65292;&#21487;&#20197;&#23450;&#21046;&#30340;AOP&#65292;&#20320;&#21487;&#20197;&#32771;&#34385;&#20351;&#29992;&#26222;&#36890;&#30340;<tt class="literal">ProxyFactoryBean</tt>&#65292;
      &#25110;&#32773;&#26159;&#33258;&#21160;&#20195;&#29702;&#29983;&#25104;&#22120;&#65288;&#21442;&#32771;&#19979;&#38754;&#65289;&#12290;
      </p><i><span class="remark">&#23588;&#20854;&#26159;&#22914;&#26524;&#25105;&#20204;&#23558;Spring&#30340;AOP&#22312;&#35768;&#22810;&#24773;&#20917;&#19979;&#30475;&#25104;&#26159;EJB&#30340;&#26367;&#20195;&#21697;&#65292;&#25105;&#20204;&#20250;&#21457;&#29616;&#22823;&#22810;&#25968;&#36890;&#30693;&#26159;&#24456;&#26222;&#36890;&#30340;&#65292;
      &#21487;&#20197;&#20351;&#29992;&#20849;&#20139;&#23454;&#20363;&#12290;&#22768;&#26126;&#24335;&#30340;&#20107;&#21153;&#31649;&#29702;&#21644;&#23433;&#20840;&#26816;&#26597;&#26159;&#19968;&#20010;&#20856;&#22411;&#30340;&#20363;&#23376;&#12290;
      </span></i><p>
      <tt class="literal">TransactionProxyFactoryBean</tt>&#20381;&#36182;&#20110;&#30001;&#23427;&#30340;<tt class="literal">transactionManager</tt>
	  &#23646;&#24615;&#25351;&#23450;&#30340;<tt class="literal">TransactionManager</tt>&#12290;
      &#36825;&#31181;&#20107;&#21153;&#31649;&#29702;&#26041;&#24335;&#26159;&#21487;&#25554;&#25300;&#30340;&#65292;&#22522;&#20110;JTA&#65292;JDBC&#25110;&#32773;&#20854;&#20182;&#20107;&#21153;&#31649;&#29702;&#31574;&#30053;&#30342;&#21487;&#12290;
      &#36825;&#19982;Spring&#30340;&#20107;&#21153;&#25277;&#35937;&#23618;&#26377;&#20851;&#65292;&#32780;&#19981;&#22312;&#20110;AOP&#26412;&#36523;&#12290;&#25105;&#20204;&#23558;&#22312;&#19979;&#19968;&#31456;&#20013;&#35752;&#35770;&#20107;&#21153;&#26426;&#21046;&#12290;
	  </p><i><span class="remark">&#22914;&#26524;&#20320;&#21482;&#23545;&#22768;&#26126;&#24615;&#20107;&#21153;&#31649;&#29702;&#24863;&#20852;&#36259;&#65292;TransactionProxyFactoryBean&#26159;&#19968;&#20010;&#19981;&#38169;&#30340;&#35299;&#20915;&#21150;&#27861;&#65292;
      &#24182;&#19988;&#27604;&#30452;&#25509;&#20351;&#29992;ProxyFactoryBean&#26469;&#24471;&#31616;&#21333;. </span></i></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3393"></a>5.6.2.&nbsp;EJB &#20195;&#29702;</h3></div></div><div></div></div><p>&#20854;&#23427;&#26377;&#19968;&#20123;&#19987;&#38376;&#30340;&#20195;&#29702;&#29992;&#20110;&#21019;&#24314;EJB&#20195;&#29702;&#65292;&#20351;&#24471;EJB&#30340;&#8220;&#19994;&#21153;&#26041;&#27861;&#8221;&#30340;&#25509;&#21475;&#21487;&#20197;&#34987;&#35843;&#29992;&#20195;&#30721;&#30452;&#25509;&#20351;&#29992;&#12290;
      &#35843;&#29992;&#20195;&#30721;&#24182;&#19981;&#38656;&#35201;&#36827;&#34892;JNDI&#26597;&#25214;&#25110;&#20351;&#29992;EJB&#30340;&#21019;&#24314;&#26041;&#27861;&#65306;&#36825;&#26159;&#22312;&#21487;&#35835;&#24615;&#21644;&#26550;&#26500;&#28789;&#27963;&#24615;&#26041;&#38754;&#30340;&#37325;&#22823;&#25552;&#39640;&#12290;
      </p><p>&#36827;&#19968;&#27493;&#35831;&#21442;&#32771;&#26412;&#25163;&#20876;&#20869;&#30340;Spring&#30340;EJB&#19994;&#21153;&#12290;</p></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-prog"></a>5.7.&nbsp;&#20351;&#29992;ProxyFactory&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#21019;&#24314;AOP&#20195;&#29702;</h2></div></div><div></div></div><p>&#20351;&#29992;Spring&#20197;&#32534;&#31243;&#30340;&#26041;&#24335;&#21019;&#24314;AOP&#20195;&#29702;&#20063;&#24456;&#31616;&#21333;&#12290;
    &#36825;&#20351;&#24471;&#20320;&#19981;&#38656;&#35201;Spring&#30340;IoC&#23601;&#33021;&#22815;&#20351;&#29992;Spring&#30340;AOP&#12290;</p><p>&#19979;&#38754;&#30340;&#20195;&#30721;&#26174;&#31034;&#30340;&#29992;&#25318;&#25130;&#22120;&#21644;advisor&#20026;&#30446;&#26631;&#23545;&#35937;&#21019;&#24314;&#20195;&#29702;&#12290;&#30446;&#26631;&#23545;&#35937;&#23454;&#29616;&#30340;&#25509;&#21475;&#23558;&#33258;&#21160;&#34987;&#20195;&#29702;&#65306;</p><pre class="programlisting">ProxyFactory factory = new ProxyFactory(myBusinessInterfaceImpl);
factory.addInterceptor(myMethodInterceptor);
factory.addAdvisor(myAdvisor);
MyBusinessInterface tb = (MyBusinessInterface) factory.getProxy();</pre><p>&#31532;&#19968;&#27493;&#26159;&#21019;&#24314;&#31867;&#22411;&#20026;<tt class="literal">org.springframework.aop.framework.ProxyFactory</tt>
    &#30340;&#23545;&#35937;&#12290;&#20320;&#21487;&#20197;&#21644;&#19978;&#38754;&#30340;&#20363;&#23376;&#19968;&#26679;&#29992;&#30446;&#26631;&#23545;&#35937;&#21019;&#24314;&#65292;&#25110;&#32773;&#22312;&#21478;&#19968;&#20010;&#26500;&#36896;&#20989;&#25968;&#20013;&#25351;&#23450;&#35201;&#34987;&#20195;&#29702;&#30340;&#25509;&#21475;&#12290;</p><p>&#20320;&#21487;&#20197;&#28155;&#21152;&#25318;&#25130;&#22120;&#25110;advisor&#65292;&#22312;&#25972;&#20010;ProxyFactory&#30340;&#29983;&#21629;&#21608;&#26399;&#20869;&#25805;&#20316;&#23427;&#20204;&#12290;&#22914;&#26524;&#20320;&#28155;&#21152;
    IntroductionInterceptionAroundAdvisor&#65292;&#20320;&#21487;&#20197;&#20351;&#20195;&#29702;&#23454;&#29616;&#38468;&#21152;&#25509;&#21475;&#12290;</p><p>ProxyFactory&#65288;&#23427;&#26159;&#20174;AdvisedSupport&#32487;&#25215;&#32780;&#26469;&#65289;&#20063;&#25552;&#20379;&#20102;&#19968;&#20123;&#23454;&#29992;&#26041;&#27861;&#65292;&#20351;&#20320;&#21487;&#20197;&#28155;&#21152;
    &#20854;&#23427;&#36890;&#30693;&#31867;&#22411;&#65292;&#27604;&#22914;before&#36890;&#30693;&#21644;throws&#36890;&#30693;&#12290;AdvisedSupport&#26159;ProxyFactory&#21644;ProxyFactoryBean
    &#30340;&#29238;&#31867;&#12290;</p><i><span class="remark">&#23558;AOP&#20195;&#29702;&#30340;&#21019;&#24314;&#21644;IoC&#26694;&#26550;&#32467;&#21512;&#36215;&#26469;&#22312;&#22823;&#22810;&#25968;&#24212;&#29992;&#20013;&#37117;&#26159;&#26368;&#22909;&#30340;&#23454;&#29616;&#26041;&#24335;&#12290;&#25105;&#20204;&#25512;&#33616;&#20320;&#21644;&#19968;&#33324;&#24773;&#20917;&#19968;&#26679;&#65292;
    &#19981;&#35201;&#23558;AOP&#37197;&#32622;&#20449;&#24687;&#25918;&#22312;Java&#20195;&#30721;&#37324;&#12290;</span></i></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3421"></a>5.8.&nbsp;&#25805;&#20316;&#34987;&#36890;&#30693;&#23545;&#35937;</h2></div></div><div></div></div><p>&#26080;&#35770;&#20320;&#24590;&#20040;&#21019;&#24314;AOP&#20195;&#29702;&#65292;&#20320;&#37117;&#21487;&#20197;&#20351;&#29992;<tt class="literal">org.springframework.aop.framework.Advised</tt>
    &#25509;&#21475;&#26469;&#25805;&#20316;&#23427;&#20204;&#12290;&#20219;&#20309;AOP&#20195;&#29702;&#26080;&#35770;&#23454;&#29616;&#20854;&#23427;&#20160;&#20040;&#25509;&#21475;&#65292;&#37117;&#21487;&#20197;&#31867;&#22411;&#36716;&#25442;&#20026;&#36825;&#20010;&#25509;&#21475;&#12290;&#36825;&#20010;&#25509;&#21475;&#21253;&#25324;&#19979;&#21015;&#26041;&#27861;&#65306;</p><pre class="programlisting">void addInterceptor(Interceptor interceptor) throws AopConfigException;

void addInterceptor(int pos, Interceptor interceptor) 
        throws AopConfigException;

void addAdvisor(Advisor advisor) throws AopConfigException;

void addAdvisor(int pos, Advisor advisor) throws AopConfigException;

int indexOf(Advisor advisor);

boolean removeAdvisor(Advisor advisor) throws AopConfigException;

void removeAdvisor(int index) throws AopConfigException;

boolean replaceAdvisor(Advisor a, Advisor b) throws AopConfigException;

boolean isFrozen();</pre><p><tt class="literal">getAdvisors()</tt>&#26041;&#27861;&#20026;&#24037;&#21378;&#20013;&#30340;&#27599;&#20010;advisor&#65292;&#25318;&#25130;&#22120;&#25110;&#32773;&#20854;&#23427;&#36890;&#30693;&#31867;&#22411;&#36820;&#22238;&#19968;&#20010;Advisor&#12290;
    &#22914;&#26524;&#20320;&#28155;&#21152;&#19968;&#20010;Advisor&#65292;&#20351;&#29992;&#24403;&#21069;&#32034;&#24341;&#36820;&#22238;&#30340;advisor&#23601;&#26159;&#20320;&#28155;&#21152;&#30340;&#23545;&#35937;&#12290;&#22914;&#26524;&#20320;&#28155;&#21152;&#25318;&#25130;&#22120;&#25110;&#20854;&#23427;&#36890;&#30693;&#31867;&#22411;&#65292;
    Spring&#23558;&#24403;&#21069;&#23545;&#35937;&#21644;&#19968;&#20010;&#28385;&#36275;&#35201;&#27714;&#30340;&#20999;&#20837;&#28857;&#23553;&#35013;&#22312;&#19968;&#20010;advisor&#37324;&#12290;&#22240;&#27492;&#65292;&#22914;&#26524;&#20320;&#28155;&#21152;
    <tt class="literal">MethodInterceptor</tt>&#65292;
    &#20351;&#29992;&#24403;&#21069;&#32034;&#24341;&#36820;&#22238;&#30340;advisor&#26159;&#19968;&#20010;<tt class="literal">DefaultPointcutAdvisor</tt>&#65292;&#36825;&#20010;advisor&#36820;&#22238;
    <tt class="literal">MethodInterceptor</tt>&#21644;&#28385;&#36275;&#25152;&#26377;&#31867;&#21644;&#26041;&#27861;&#30340;&#20999;&#20837;&#28857;&#12290;
    </p><p><tt class="literal">addAdvisor()</tt>&#34987;&#29992;&#26469;&#28155;&#21152;Advisor&#12290;&#36890;&#24120;&#20250;&#26159;&#19968;&#20010;&#26222;&#36890;&#30340;
    <tt class="literal">DefaultPointcutAdvisor</tt>&#65292;&#23427;&#21487;&#20197;&#21644;&#20219;&#20309;&#36890;&#30693;&#25110;&#20999;&#20837;&#28857;&#65288;&#38500;&#20102;&#24341;&#29992;&#65289;&#19968;&#36215;&#20351;&#29992;&#12290;
    </p><p>&#32570;&#30465;&#24773;&#20917;&#19979;&#65292;&#22312;&#27599;&#27425;&#20195;&#29702;&#34987;&#21019;&#24314;&#30340;&#26102;&#20505;&#28155;&#21152;&#25110;&#21024;&#38500;advisor&#25110;&#25318;&#25130;&#22120;&#12290;&#21807;&#19968;&#30340;&#38480;&#21046;&#26159;&#19981;&#33021;&#28155;&#21152;&#25110;&#21024;&#38500;
    &#24341;&#20837;advisor&#65292;&#22240;&#20026;&#24037;&#21378;&#25552;&#20379;&#30340;&#24050;&#23384;&#22312;&#30340;&#20195;&#29702;&#19981;&#21453;&#26144;&#25509;&#21475;&#30340;&#21464;&#21270;&#12290;&#65288;&#20320;&#21487;&#20197;&#20174;&#24037;&#21378;&#24471;&#21040;&#19968;&#20010;&#26032;&#30340;&#20195;&#29702;&#26469;&#36991;&#20813;&#36825;&#20010;&#38382;&#39064;&#65289;</p><i><span class="remark">&#26159;&#21542;&#24314;&#35758;&#22312;&#20135;&#21697;&#20013;&#20462;&#25913;&#19994;&#21153;&#23545;&#35937;&#30340;&#36890;&#30693;&#36824;&#20540;&#24471;&#24576;&#30097;&#65292;&#34429;&#28982;&#27627;&#26080;&#30097;&#38382;&#23384;&#22312;&#21512;&#29702;&#30340;&#20351;&#29992;&#24773;&#20917;&#12290;&#20294;&#26159;&#65292;
    &#22312;&#24320;&#21457;&#20013;&#36825;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#65306;&#20363;&#22914;&#65292;&#22312;&#27979;&#35797;&#20013;&#12290;&#25105;&#26377;&#26102;&#20505;&#21457;&#29616;&#20197;&#25318;&#25130;&#22120;&#25110;&#20854;&#23427;&#36890;&#30693;&#30340;&#24418;&#24335;&#26469;&#28155;&#21152;&#27979;&#35797;&#20195;&#30721;&#38750;&#24120;&#26377;&#29992;&#65292;
    &#36825;&#26679;&#23601;&#21487;&#20197;&#36827;&#20837;&#25105;&#24819;&#35201;&#27979;&#35797;&#30340;&#26041;&#27861;&#35843;&#29992;&#12290;&#65288;&#20363;&#22914;&#65292;&#36890;&#30693;&#21487;&#20197;&#36827;&#20837;&#20026;&#36825;&#20010;&#26041;&#27861;&#21019;&#24314;&#30340;&#20107;&#21153;&#20013;&#65306;
    &#22312;&#20026;&#22238;&#28378;&#20107;&#21153;&#20316;&#26631;&#35760;&#21069;&#65292;&#36816;&#34892;SQL&#26816;&#26597;&#25968;&#25454;&#24211;&#26159;&#21542;&#34987;&#27491;&#30830;&#26356;&#26032;&#12290;&#65289;</span></i><p>&#26681;&#25454;&#20320;&#21019;&#24314;&#20195;&#29702;&#30340;&#26041;&#24335;&#65292;&#20320;&#36890;&#24120;&#21487;&#20197;&#35774;&#32622;<tt class="literal">frozen</tt>&#26631;&#35760;&#65292;&#36825;&#26679;<tt class="literal">Advised</tt>
    &#30340;<tt class="literal">isFrozen()</tt>&#23601;&#36820;&#22238;true&#65292;&#20219;&#20309;&#28155;&#21152;&#25110;&#21024;&#38500;&#36890;&#30693;&#37117;&#23558;&#23548;&#33268;
    <tt class="literal">AopConfigException</tt>&#12290;&#36825;&#31181;&#20923;&#32467;&#34987;&#36890;&#30693;&#23545;&#35937;&#29366;&#24577;&#30340;&#26041;&#27861;&#22312;&#19968;&#20123;&#24773;&#20917;&#19979;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#65306;
    &#20363;&#22914;&#65292;&#20026;&#20102;&#38459;&#27490;&#35843;&#29992;&#20195;&#30721;&#21024;&#38500;&#19968;&#20010;&#23433;&#20840;&#25318;&#25130;&#22120;&#12290;&#22914;&#26524;&#24050;&#30693;&#36816;&#34892;&#26102;&#20462;&#25913;&#36890;&#30693;&#19981;&#34987;&#20801;&#35768;&#65292;&#36825;&#36824;&#21487;&#20197;&#34987;Spring 1.1&#29992;&#26469;
    &#20316;&#20248;&#21270;&#12290;</p></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-autoproxy"></a>5.9.&nbsp;&#20351;&#29992;&#8220;autoproxy&#8221;&#21151;&#33021;</h2></div></div><div></div></div><p>&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#24050;&#32463;&#35752;&#35770;&#20102;&#20351;&#29992;<tt class="literal">ProxyFactoryBean</tt>&#25110;&#31867;&#20284;&#30340;&#24037;&#21378;bean&#26469;&#26174;&#24335;&#21019;&#24314;AOP&#20195;&#29702;&#12290;
    </p><p>Spring&#20063;&#20801;&#35768;&#25105;&#20204;&#20351;&#29992;&#8220;autoproxy&#8221;&#30340;bean&#23450;&#20041;&#65292;&#23427;&#21487;&#20197;&#33258;&#21160;&#20195;&#29702;&#25152;&#36873;&#25321;&#30340;bean&#23450;&#20041;&#12290;&#36825;&#26159;&#24314;&#31435;&#22312;Spring&#30340;
    &#8220;bean&#21518;&#22788;&#29702;&#22120;&#8221;&#26426;&#21046;&#19978;&#30340;&#65292;&#23427;&#33021;&#22815;&#22312;&#23481;&#22120;&#36733;&#20837;bean&#23450;&#20041;&#30340;&#26102;&#20505;&#20462;&#25913;&#20219;&#20309;bean&#23450;&#20041;&#12290;</p><p>&#22312;&#36825;&#20010;&#27169;&#22411;&#20013;&#65292;&#20320;&#21487;&#20197;&#22312;&#20320;&#30340;XML bean&#23450;&#20041;&#25991;&#20214;&#20013;&#24314;&#31435;&#29305;&#27530;&#30340;bean&#23450;&#20041;&#65292;&#26469;&#37197;&#32622;&#33258;&#21160;&#20195;&#29702;&#26426;&#21046;&#12290;&#36825;&#20801;&#35768;&#20320;&#22768;&#26126;&#30446;&#26631;&#23545;&#35937;&#20197;&#20351;&#29992;&#33258;&#21160;&#20195;&#29702;&#21151;&#33021;&#65306;
    &#20320;&#23601;&#21487;&#20197;&#19981;&#38656;&#35201;&#20351;&#29992;<tt class="literal">ProxyFactoryBean</tt>&#12290;</p><p>&#26377;&#20004;&#31181;&#26041;&#27861;&#26469;&#23454;&#29616;&#33258;&#21160;&#20195;&#29702;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992;&#19968;&#20010;&#33258;&#21160;&#20195;&#29702;&#29983;&#25104;&#22120;&#65292;&#23427;&#24341;&#29992;&#24403;&#21069;&#19978;&#19979;&#25991;&#20013;&#30340;&#37027;&#20123;&#29305;&#27530;bean</p></li><li><p>&#26377;&#19968;&#20010;&#29305;&#27530;&#30340;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#30340;&#24773;&#20917;&#20540;&#24471;&#21333;&#29420;&#32771;&#34385;&#65306;&#30001;&#28304;&#20195;&#30721;&#32423;&#20803;&#25968;&#25454;&#39537;&#21160;&#30340;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;</p></li></ul></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-autoproxy-choices"></a>5.9.1.&nbsp;&#33258;&#21160;&#20195;&#29702;&#30340;bean&#23450;&#20041;</h3></div></div><div></div></div><p><tt class="literal">org.springframework.aop.framework.autoproxy</tt>&#21253;&#25552;&#20379;&#20102;&#19979;&#21015;&#26631;&#20934;&#33258;&#21160;&#20195;&#29702;&#29983;&#25104;&#22120;&#12290;</p><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3500"></a>5.9.1.1.&nbsp;BeanNameAutoProxyCreator</h4></div></div><div></div></div><p>BeanNameAutoProxyCreator&#20026;&#21517;&#23383;&#31526;&#21512;&#26576;&#20010;&#20540;&#25110;&#32479;&#37197;&#31526;&#30340;bean&#33258;&#21160;&#21019;&#24314;AOP&#20195;&#29702;&#12290;</p><pre class="programlisting">&lt;bean id="jdkBeanNameProxyCreator" 
    class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator"&gt;
    &lt;property name="beanNames"&gt;&lt;value&gt;jdk*,onlyJdk&lt;/value&gt;&lt;/property&gt;
    &lt;property name="interceptorNames"&gt;
        &lt;list&gt;
            &lt;value&gt;myInterceptor&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#23601;&#21644;<tt class="literal">ProxyFactoryBean</tt>&#19968;&#26679;&#65292;&#26377;&#19968;&#20010;<tt class="literal">interceptorNames</tt>
        &#23646;&#24615;&#65292;&#32780;&#19981;&#26159;&#19968;&#20010;&#25318;&#25130;&#22120;&#21015;&#34920;&#65292;&#36825;&#20010;&#23646;&#24615;&#20801;&#35768;&#20026;prototype&#30340;advisor&#25552;&#20379;&#27491;&#30830;&#30340;&#34892;&#20026;&#12290;&#34429;&#28982;&#21517;&#23383;&#21483;
        &#8220;&#25318;&#25130;&#22120;&#8221;&#65292;&#20294;&#26159;&#20063;&#21487;&#20197;&#26159;advisor&#25110;&#20219;&#20309;&#36890;&#30693;&#31867;&#22411;&#12290;</p><p>&#23601;&#35937;&#19968;&#33324;&#30340;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#19968;&#26679;&#65292;&#20351;&#29992;<tt class="literal">BeanNameAutoProxyCreator</tt>&#30340;&#20027;&#35201;&#30446;&#30340;
        &#26159;&#23545;&#22810;&#20010;&#23545;&#35937;&#20351;&#29992;&#30456;&#21516;&#30340;&#37197;&#32622;&#20449;&#24687;&#65292;&#24182;&#19988;&#20943;&#23569;&#37197;&#32622;&#30340;&#24037;&#20316;&#37327;&#12290;&#36825;&#22312;&#20026;&#22810;&#20010;&#23545;&#35937;&#20351;&#29992;&#22768;&#26126;&#24335;&#20107;&#21153;&#26102;&#26159;&#19968;&#20010;&#24456;&#27969;&#34892;&#30340;&#36873;&#25321;&#12290;
        </p><p>&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#21517;&#23383;&#21305;&#37197;&#30340;bean&#23450;&#20041;&#65292;&#22914;&#8220;jdkMyBean&#8221;&#21644;&#8220;onlyJdk&#8221;&#65292;&#26159;&#21253;&#21547;&#30446;&#26631;&#31867;&#30340;&#26222;&#36890;bean&#23450;&#20041;&#12290;
        <tt class="literal">BeanNameAutoProxyCreator</tt>&#23558;&#33258;&#21160;&#21019;&#24314;AOP&#20195;&#29702;&#12290;&#30456;&#21516;&#30340;&#36890;&#30693;&#20250;&#34987;&#22240;&#29992;&#21040;&#25152;&#26377;&#21305;&#37197;&#30340;bean&#12290;
        &#27880;&#24847;&#65292;&#22914;&#26524;&#20351;&#29992;&#20102;advisor&#65288;&#32780;&#19981;&#26159;&#19978;&#38754;&#20363;&#23376;&#20013;&#30340;&#25318;&#25130;&#22120;&#65289;&#65292;&#20999;&#20837;&#28857;&#21487;&#33021;&#23545;&#19981;&#21516;&#30340;bean&#20250;&#19981;&#21516;&#12290;</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3526"></a>5.9.1.2.&nbsp;DefaultAdvisorAutoProxyCreator</h4></div></div><div></div></div><p><tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#26159;&#19968;&#20010;&#26356;&#36890;&#29992;&#65292;&#26356;&#24378;&#22823;&#30340;&#33258;&#21160;&#20195;&#29702;&#29983;&#25104;&#22120;&#12290;&#23427;&#23558;
        &#33258;&#21160;&#24212;&#29992;&#20110;&#24403;&#21069;&#19978;&#19979;&#25991;&#30340;&#31526;&#21512;&#26465;&#20214;&#30340;advisor&#65292;&#32780;&#19981;&#38656;&#35201;&#22312;&#33258;&#21160;&#20195;&#29702;advisor&#30340;bean&#23450;&#20041;&#20013;&#21253;&#21547;&#29305;&#23450;&#30340;bean&#21517;&#23383;&#12290;
        &#23427;&#26377;&#21161;&#20110;&#37197;&#32622;&#30340;&#19968;&#33268;&#24615;&#65292;&#24182;&#36991;&#20813;&#35937;<tt class="literal">BeanNameAutoProxyCreator</tt>&#19968;&#26679;&#37325;&#22797;&#37197;&#32622;&#12290;</p><p>&#20351;&#29992;&#36825;&#20010;&#26426;&#21046;&#21253;&#25324;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#25351;&#23450;&#19968;&#20010;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#30340;bean&#23450;&#20041;</p></li><li><p>&#22312;&#30456;&#21516;&#25110;&#30456;&#20851;&#19978;&#19979;&#25991;&#20013;&#25351;&#23450;&#20219;&#20309;&#25968;&#30446;&#30340;Advisor&#12290;&#27880;&#24847;&#36825;&#20123;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#26159;Advisor&#65292;
            &#32780;&#19981;&#20165;&#20165;&#26159;&#25318;&#25130;&#22120;&#25110;&#20854;&#23427;&#36890;&#30693;&#12290;&#36825;&#26159;&#24456;&#24517;&#35201;&#30340;&#65292;&#22240;&#20026;&#24517;&#39035;&#26377;&#19968;&#20010;&#20999;&#20837;&#28857;&#26469;&#26816;&#26597;&#27599;&#20010;&#36890;&#30693;&#26159;&#21542;&#31526;&#21512;&#20505;&#36873;bean&#23450;&#20041;&#12290;
			</p></li></ul></div><p><tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#20250;&#33258;&#21160;&#35745;&#31639;&#27599;&#20010;advisor&#21253;&#21547;&#30340;&#30340;&#20999;&#20837;&#28857;&#65292;&#30475;&#30475;
        &#26159;&#21542;&#26377;&#20160;&#20040;&#36890;&#30693;&#24212;&#35813;&#34987;&#24341;&#29992;&#21040;&#27599;&#20010;&#19994;&#21153;&#23545;&#35937;&#65288;&#27604;&#22914;&#20363;&#23376;&#20013;&#30340;&#8220;businessObject1&#8221;&#21644;&#8220;businessObject2&#8221;&#65289;&#12290;</p><p>&#36825;&#24847;&#21619;&#30528;&#20219;&#20309;&#25968;&#30446;&#30340;advisor&#37117;&#21487;&#20197;&#33258;&#21160;&#24212;&#29992;&#21040;&#27599;&#20010;&#19994;&#21153;&#23545;&#35937;&#12290;&#22914;&#26524;advisor&#20013;&#27809;&#26377;&#20219;&#20309;&#20999;&#20837;&#28857;&#31526;&#21512;&#19994;&#21153;&#23545;&#35937;&#30340;
        &#26041;&#27861;&#65292;&#36825;&#20010;&#23545;&#35937;&#23601;&#19981;&#20250;&#34987;&#20195;&#29702;&#12290;&#22240;&#20026;&#20250;&#20026;&#26032;&#30340;&#19994;&#21153;&#23545;&#35937;&#28155;&#21152;bean&#23450;&#20041;&#65292;&#22914;&#26524;&#24517;&#35201;&#65292;&#23427;&#20204;&#20250;&#33258;&#21160;&#34987;&#20195;&#29702;&#12290;</p><p>&#19968;&#33324;&#26469;&#35828;&#65292;&#33258;&#21160;&#20195;&#29702;&#21487;&#20197;&#20445;&#35777;&#35843;&#29992;&#32773;&#25110;&#20381;&#36182;&#26080;&#27861;&#25509;&#35302;&#26410;&#34987;&#36890;&#30693;&#30340;&#23545;&#35937;&#12290;&#22312;&#36825;&#20010;ApplicationContext&#19978;
        &#35843;&#29992;getBean("businessObject1")&#36820;&#22238;&#19968;&#20010;AOP&#20195;&#29702;&#65292;&#32780;&#19981;&#26159;&#30446;&#26631;&#19994;&#21153;&#23545;&#35937;&#12290;</p><pre class="programlisting">&lt;bean id="autoProxyCreator"
    class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"&gt;
&lt;/bean&gt;

&lt;bean id="txAdvisor"
    autowire="constructor"
    class="org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor"&gt;
    &lt;property name="order"&gt;&lt;value&gt;1&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="customAdvisor"
    class="com.mycompany.MyAdvisor"&gt;
&lt;/bean&gt;

&lt;bean id="businessObject1"
    class="com.mycompany.BusinessObject1"&gt;
    &lt;!-- Properties omitted --&gt;
&lt;/bean&gt;

&lt;bean id="businessObject2"
    class="com.mycompany.BusinessObject2"&gt;
&lt;/bean&gt;</pre><p>&#22914;&#26524;&#20320;&#24819;&#22312;&#20960;&#20010;&#19994;&#21153;&#23545;&#35937;&#19978;&#24212;&#29992;&#30456;&#21516;&#30340;&#36890;&#30693;&#65292;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>
        &#23601;&#38750;&#24120;&#26377;&#29992;&#12290;&#19968;&#26086;&#23450;&#20041;&#24688;&#24403;&#65292;&#20320;&#21487;&#20197;&#31616;&#21333;&#22320;&#28155;&#21152;&#19994;&#21153;&#23545;&#35937;&#32780;&#19981;&#38656;&#35201;&#21253;&#25324;&#29305;&#23450;&#30340;&#20195;&#29702;&#37197;&#32622;&#12290;&#20320;&#20063;&#21487;&#20197;&#38750;&#24120;&#23481;&#26131;&#22320;
        &#21024;&#38500;&#25152;&#38468;&#21152;&#30340;&#26041;&#38754;&#65293;&#65293;&#20363;&#22914;&#65292;&#36319;&#36394;&#25110;&#24615;&#33021;&#30417;&#25511;&#30340;&#26041;&#38754;&#65293;&#65293;&#21487;&#20197;&#23613;&#21487;&#33021;&#20943;&#23569;&#37197;&#32622;&#20462;&#25913;&#12290;</p><p><tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#25903;&#25345;&#36807;&#28388;&#65288;&#20351;&#29992;&#21629;&#21517;&#35268;&#21017;&#20197;&#20415;&#21482;&#35745;&#31639;&#26576;&#19968;&#20123;
        advisor&#65292;&#20801;&#35768;&#22312;&#19968;&#20010;&#24037;&#21378;&#20013;&#20351;&#29992;&#22810;&#20010;&#65292;&#34987;&#19981;&#21516;&#37197;&#32622;&#30340;AdvisorAutoProxyCreator&#65289;&#21644;&#25490;&#24207;&#12290;Advisor&#21487;&#20197;&#23454;&#29616;
        <tt class="literal">org.springframework.core.Ordered</tt>&#25509;&#21475;&#20197;&#20445;&#35777;&#27491;&#30830;&#30340;&#25490;&#24207;&#65292;&#22914;&#26524;&#25490;&#24207;&#30830;&#23454;&#38656;&#35201;&#12290;&#22312;
        &#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;TransactionAttributeSourceAdvisor&#26377;&#19968;&#20010;&#21487;&#37197;&#32622;&#30340;&#39034;&#24207;&#20540;&#65292;&#32570;&#25439;&#26159;&#19981;&#25490;&#24207;&#12290;</p></div><div class="sect3" lang="zh_cn"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3574"></a>5.9.1.3.&nbsp;AbstractAdvisorAutoProxyCreator</h4></div></div><div></div></div><p>&#36825;&#26159;DefaultAdvisorAutoProxyCreator&#30340;&#29238;&#31867;&#12290;&#20320;&#21487;&#20197;&#32487;&#25215;&#23427;&#23454;&#29616;&#20320;&#33258;&#24049;&#30340;&#33258;&#21160;&#20195;&#29702;&#29983;&#25104;&#22120;&#65292;&#36825;&#31181;&#24773;&#20917;&#19981;&#22826;&#24120;&#35265;&#65292;
        &#19968;&#33324;&#26159;advisor&#23450;&#20041;&#19981;&#33021;&#32473;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#26694;&#26550;&#30340;&#34892;&#20026;&#25552;&#20379;&#36275;&#22815;&#30340;&#23450;&#21046;&#12290;</p></div></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-autoproxy-metadata"></a>5.9.2.&nbsp;&#20351;&#29992;&#20803;&#25968;&#25454;&#39537;&#21160;&#30340;&#33258;&#21160;&#20195;&#29702;</h3></div></div><div></div></div><p>&#19968;&#31181;&#29305;&#21035;&#37325;&#35201;&#30340;&#33258;&#21160;&#20195;&#29702;&#31867;&#22411;&#26159;&#30001;&#20803;&#25968;&#25454;&#39537;&#21160;&#30340;&#12290;&#36825;&#21644;.NET&#30340;<tt class="literal">ServicedComponents</tt>&#32534;&#31243;&#26694;&#26550;
      &#38750;&#24120;&#31867;&#20284;&#12290;&#23427;&#27809;&#26377;&#35937;EJB&#37027;&#26679;&#20351;&#29992;XML&#37096;&#32626;&#25551;&#36848;&#65292;&#20107;&#21153;&#31649;&#29702;&#21644;&#20854;&#23427;&#20225;&#19994;&#32423;&#19994;&#21153;&#30340;&#37197;&#32622;&#37117;&#26159;&#23450;&#20041;&#22312;&#28304;&#20195;&#30721;&#32423;&#30340;&#23646;&#24615;&#19978;&#12290;</p><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#65292;&#20197;&#21450;&#21487;&#20197;&#35835;&#21462;&#20803;&#25968;&#25454;&#23646;&#24615;&#30340;
      Advisor&#12290;&#20803;&#25968;&#25454;&#32454;&#33410;&#23450;&#20041;&#22312;&#20505;&#36873;advisor&#30340;&#20999;&#20837;&#28857;&#37096;&#20998;&#65292;&#32780;&#19981;&#26159;&#33258;&#21160;&#20195;&#29702;&#21019;&#24314;&#31867;&#26412;&#36523;&#12290;</p><p>&#36825;&#26159;<tt class="literal">DefaultAdvisorAutoProxyCreator</tt>&#30340;&#19968;&#31181;&#29305;&#27530;&#24773;&#20917;&#65292;&#20294;&#26159;&#23427;&#26412;&#36523;&#32780;&#35328;&#26159;&#20540;&#24471;&#32771;&#34385;&#30340;&#12290;
      &#65288;&#21487;&#20197;&#35835;&#21462;&#20803;&#25968;&#25454;&#30340;&#20195;&#30721;&#22788;&#20110;advisor&#30340;&#20999;&#20837;&#28857;&#20013;&#65292;&#32780;&#19981;&#26159;AOP&#26694;&#26550;&#26412;&#36523;&#12290;&#65289;</p><p>jPetStore&#31034;&#20363;&#24212;&#29992;&#30340;<tt class="literal">/attributes</tt>&#30446;&#24405;&#28436;&#31034;&#20102;&#23646;&#24615;&#39537;&#21160;&#30340;&#33258;&#21160;&#20195;&#29702;&#30340;&#20351;&#29992;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;
      &#27809;&#26377;&#24517;&#35201;&#20351;&#29992;<tt class="literal">TransactionProxyFactoryBean</tt>&#12290;&#20165;&#20165;&#22312;&#19994;&#21153;&#23545;&#35937;&#19978;&#23450;&#20041;&#19994;&#21153;&#23646;&#24615;&#23601;&#36275;&#22815;&#20102;&#65292;&#22240;&#20026;
      &#20351;&#29992;&#20102;&#21487;&#30693;&#20803;&#25968;&#25454;&#30340;&#20999;&#20837;&#28857;&#12290;bean&#23450;&#20041;&#22312;<tt class="literal">/WEB-INF/declarativeServices.xml</tt>&#20013;&#65292;&#21253;&#25324;&#19979;
      &#38754;&#30340;&#20195;&#30721;&#12290;&#27880;&#24847;&#36825;&#26159;&#36890;&#29992;&#30340;&#65292;&#21487;&#20197;&#22312;jPetStore&#20197;&#22806;&#30340;&#22320;&#26041;&#20351;&#29992;&#65306;</p><pre class="programlisting">&lt;bean id="autoproxy" 
    class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator"&gt;
&lt;/bean&gt;

&lt;bean id="transactionAttributeSource"
    class="org.springframework.transaction.interceptor.AttributesTransactionAttributeSource"
    autowire="constructor"&gt;
&lt;/bean&gt;

&lt;bean id="transactionInterceptor"
    class="org.springframework.transaction.interceptor.TransactionInterceptor"
    autowire="byType"&gt;
&lt;/bean&gt;

&lt;bean id="transactionAdvisor"
    class="org.springframework.transaction.interceptor.TransactionAttributeSourceAdvisor"
    autowire="constructor" &gt;
&lt;/bean&gt;

&lt;bean id="attributes"
    class="org.springframework.metadata.commons.CommonsAttributes"
/&gt;</pre><p><tt class="literal">DefaultAdvisorAutoProxyCreator</tt> bean&#23450;&#20041;&#65293;&#65293;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#31216;&#20316;&#8220;advisor&#8221;&#65292;&#20294;&#26159;&#21517;&#23383;
      &#26080;&#20851;&#32039;&#35201;&#65293;&#65293;&#20250;&#22312;&#24403;&#21069;&#30340;&#24212;&#29992;&#19978;&#21320;&#20013;&#36873;&#25321;&#25152;&#26377;&#31526;&#21512;&#30340;&#20999;&#20837;&#28857;&#12290;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#31867;&#22411;&#20026;
      <tt class="literal">TransactionAttributeSourceAdvisor</tt>&#30340;&#8220;transactionAdvisor&#8221;bean&#23450;&#20041;&#23558;&#20250;&#24212;&#29992;&#20110;&#21253;&#21547;&#20107;&#21153;&#23646;&#24615;
      &#30340;&#31867;&#25110;&#26041;&#27861;&#12290;TransactionAttributeSourceAdvisor&#36890;&#36807;&#26500;&#36896;&#20989;&#25968;&#20381;&#36182;&#20110;TransactionInterceptor&#12290;&#36825;&#20010;&#20363;&#23376;&#36890;&#36807;&#33258;&#21160;
      &#35013;&#37197;&#26469;&#35299;&#26512;&#23427;&#12290;<tt class="literal">AttributesTransactionAttributeSource</tt>&#20381;&#36182;&#20110;
      <tt class="literal">org.springframework.metadata.Attributes</tt>&#25509;&#21475;&#30340;&#19968;&#20010;&#23454;&#29616;&#12290;&#22312;&#36825;&#27573;&#20195;&#30721;&#20013;&#65292;&#8220;attributes&#8221;
      bean&#20351;&#29992;Jakarta Commons Attributes API&#26469;&#33719;&#21462;&#23646;&#24615;&#20449;&#24687;&#12290;&#65288;&#24212;&#29992;&#20195;&#30721;&#24517;&#39035;&#20351;&#29992;Commons Attributes&#32534;&#35793;&#20219;&#21153;&#32534;&#35793;&#12290;&#65289;
      </p><p>&#36825;&#37324;&#23450;&#20041;&#30340;<tt class="literal">TransactionInterceptor</tt>&#20381;&#36182;&#20110;&#19968;&#20010;
      <tt class="literal">PlatformTransactionManager</tt>&#23450;&#20041;&#65292;&#23427;&#24182;&#27809;&#26377;&#34987;&#21253;&#25324;&#22312;&#36825;&#20010;&#36890;&#29992;&#30340;&#25991;&#20214;&#20013;&#65288;&#34429;&#28982;&#24212;&#35813;&#26159;&#36825;&#26679;&#65289;&#65292;
      &#36825;&#26159;&#22240;&#20026;&#23427;&#26159;&#21644;&#24212;&#29992;&#30340;&#20107;&#21153;&#38656;&#27714;&#30456;&#20851;&#30340;&#65288;&#19968;&#33324;&#22320;&#65292;&#26159;&#24819;&#36825;&#20010;&#20363;&#23376;&#20013;&#30340;JTA&#65292;&#25110;&#32773;Hibernate&#65292;JDO &#25110;JDBC&#65289;&#65306;</p><pre class="programlisting">&lt;bean id="transactionManager" 
    class="org.springframework.transaction.jta.JtaTransactionManager"/&gt;</pre><i><span class="remark">&#22914;&#26524;&#20320;&#21482;&#35201;&#27714;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#65292;&#20351;&#29992;&#36825;&#20123;&#36890;&#29992;&#30340;XML&#23450;&#20041;&#23601;&#21487;&#20197;&#20351;&#24471;Spring&#33258;&#21160;&#20195;&#29702;&#21547;&#26377;&#20107;&#21153;&#23646;&#24615;&#30340;&#25152;&#26377;&#31867;&#21644;&#26041;&#27861;&#12290;
      &#20320;&#19981;&#38656;&#35201;&#30452;&#25509;&#21644;AOP&#25171;&#20132;&#36947;&#65292;&#24182;&#19988;&#32534;&#31243;&#27169;&#22411;&#21644;.NET&#30340;ServicedComponents&#38750;&#24120;&#30456;&#20284;&#12290;</span></i><p>&#36825;&#20010;&#26426;&#21046;&#20855;&#26377;&#21487;&#25193;&#23637;&#24615;&#12290;&#23427;&#21487;&#20197;&#22522;&#20110;&#23450;&#21046;&#30340;&#23646;&#24615;&#26469;&#20351;&#29992;&#33258;&#21160;&#20195;&#29702;&#12290;&#20320;&#38656;&#35201;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#23450;&#20041;&#20320;&#30340;&#23450;&#21046;&#23646;&#24615;&#12290;</p></li><li><p>&#25351;&#23450;&#30340;Advisor&#21253;&#21547;&#24517;&#35201;&#30340;&#36890;&#30693;&#21644;&#30001;&#26041;&#27861;&#25110;&#31867;&#30340;&#23450;&#21046;&#23646;&#24615;&#25152;&#35302;&#21457;&#30340;&#20999;&#20837;&#28857;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;&#24050;&#32463;&#23384;&#22312;&#30340;&#36890;&#30693;&#65292;&#20165;&#20165;&#23454;
          &#29616;&#29992;&#26469;&#36873;&#25321;&#23450;&#21046;&#23646;&#24615;&#30340;&#20999;&#20837;&#28857;&#12290;</p></li></ul></div><p>&#36825;&#20123;advisor&#21487;&#33021;&#23545;&#27599;&#20010;&#34987;&#36890;&#30693;&#31867;&#37117;&#26159;&#21807;&#19968;&#30340;&#65288;&#20363;&#22914;&#65292;maxin&#65289;&#12290;&#23427;&#20204;&#20165;&#20165;&#38656;&#35201;&#34987;&#23450;&#20041;&#25104;
      prototype bean&#65292;&#32780;&#19981;&#26159;singleton bean&#12290;&#20363;&#22914;&#65292;Spring&#30340;&#27979;&#35797;&#22871;&#20214;&#20013;&#30340;<tt class="literal">LockMixin</tt>
      &#24341;&#20837;&#25318;&#25130;&#22120;&#21487;&#20197;&#21644;&#19968;&#20010;&#23646;&#24615;&#39537;&#21160;&#20999;&#20837;&#28857;&#19968;&#36215;&#26469;&#23450;&#20301;&#19968;&#20010;maxin&#65292;&#23601;&#35937;&#36825;&#37324;&#28436;&#31034;&#30340;&#12290;&#25105;&#20204;&#20351;&#29992;JavaBean&#37197;&#32622;&#30340;
      &#26222;&#36890;&#30340;<tt class="literal">DefaultPointcutAdvisor</tt>&#65306;
      </p><pre class="programlisting">&lt;bean id="lockMixin"
    class="org.springframework.aop.LockMixin"
    singleton="false"
/&gt;

&lt;bean id="lockableAdvisor"
    class="org.springframework.aop.support.DefaultPointcutAdvisor"
    singleton="false"
&gt;
    &lt;property name="pointcut"&gt;
        &lt;ref local="myAttributeAwarePointcut"/&gt;
    &lt;/property&gt;
    &lt;property name="advice"&gt;
        &lt;ref local="lockMixin"/&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="anyBean" class="anyclass" ...</pre><p>&#22914;&#26524;&#30693;&#36947;&#23646;&#24615;&#30340;&#20999;&#20837;&#28857;&#31526;&#21512;<tt class="literal">anyBean</tt>&#25110;&#32773;&#20854;&#23427;bean&#23450;&#20041;&#20013;&#30340;&#20219;&#20309;&#26041;&#27861;&#65292;&#36825;&#20010;maxin
      &#23558;&#34987;&#24212;&#29992;&#12290;&#27880;&#24847;&#65292;<tt class="literal">lockMixin</tt>&#21644;<tt class="literal">lockableAdvisor</tt>&#23450;&#20041;&#37117;&#26159;
      prototype&#30340;&#12290;<tt class="literal">myAttributeAwarePointcut</tt>&#20999;&#20837;&#28857;&#21487;&#20197;&#34987;&#23450;&#20041;&#25104;singleton&#65292;&#22240;&#20026;&#23427;&#19981;&#20026;
      &#19981;&#21516;&#30340;&#34987;&#36890;&#30693;&#23545;&#35937;&#20445;&#23384;&#29366;&#24577;&#12290;</p></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-targetsource"></a>5.10.&nbsp;&#20351;&#29992;TargetSources</h2></div></div><div></div></div><p>Spring&#25552;&#20379;&#20102;<span class="emphasis"><em>TargetSource</em></span>&#30340;&#27010;&#24565;&#65292;&#30001;
    <tt class="literal">org.springframework.aop.TargetSource</tt>&#25509;&#21475;&#23450;&#20041;&#12290;&#36825;&#20010;&#25509;&#21475;&#36127;&#36131;&#36820;&#22238;&#23454;&#29616;&#20999;&#20837;&#28857;&#30340;
    &#8220;&#30446;&#26631;&#23545;&#35937;&#8221;&#12290;&#27599;&#27425;AOP&#20195;&#29702;&#22788;&#29702;&#26041;&#27861;&#35843;&#29992;&#26102;&#65292;&#30446;&#26631;&#23454;&#20363;&#37117;&#20250;&#29992;&#21040;<tt class="literal">TargetSource</tt>&#23454;&#29616;&#12290;</p><p>&#20351;&#29992;Spring AOP&#30340;&#24320;&#21457;&#32773;&#19968;&#33324;&#19981;&#38656;&#35201;&#30452;&#25509;&#20351;&#29992;TargetSources&#65292;&#20294;&#26159;&#36825;&#25552;&#20379;&#20102;&#19968;&#31181;&#24378;&#22823;&#30340;&#26041;&#27861;&#26469;&#25903;&#25345;&#27744;&#65292;&#28909;&#20132;&#25442;&#65292;
    &#21644;&#20854;&#23427;&#22797;&#26434;&#30446;&#26631;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#25903;&#25345;&#27744;&#30340;TargetSource&#21487;&#20197;&#22312;&#27599;&#27425;&#35843;&#29992;&#26102;&#36820;&#22238;&#19981;&#21516;&#30340;&#30446;&#26631;&#23545;&#35937;&#23454;&#20363;&#65292;&#20351;&#29992;&#27744;&#26469;&#31649;&#29702;&#23454;&#20363;&#12290;</p><p>&#22914;&#26524;&#20320;&#27809;&#26377;&#25351;&#23450;TargetSource&#65292;&#23601;&#20351;&#29992;&#32570;&#30465;&#30340;&#23454;&#29616;&#65292;&#23427;&#23553;&#35013;&#20102;&#19968;&#20010;&#26412;&#22320;&#23545;&#35937;&#12290;&#27599;&#27425;&#35843;&#29992;&#20250;&#36820;&#22238;&#30456;&#21516;&#30340;&#30446;&#26631;&#23545;&#35937;
    &#65288;&#21644;&#20320;&#26399;&#26395;&#30340;&#19968;&#26679;&#65289;&#12290;</p><p>&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#19979;Spring&#25552;&#20379;&#30340;&#26631;&#20934;&#30446;&#26631;&#28304;&#65292;&#20197;&#21450;&#22914;&#20309;&#20351;&#29992;&#23427;&#20204;&#12290;</p><i><span class="remark">&#24403;&#20351;&#29992;&#23450;&#21046;&#30446;&#26631;&#28304;&#26102;&#65292;&#20320;&#30340;&#30446;&#26631;&#36890;&#24120;&#38656;&#35201;&#23450;&#20041;&#20026;prototype bean&#65292;&#32780;&#19981;&#26159;singleton bean&#12290;&#36825;&#20351;&#24471;
    Spring&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#30446;&#26631;&#23454;&#20363;&#12290;</span></i><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ts-swap"></a>5.10.1.&nbsp;&#21487;&#28909;&#20132;&#25442;&#30340;&#30446;&#26631;&#28304;</h3></div></div><div></div></div><p>
      <tt class="literal">org.springframework.aop.target.HotSwappableTargetSource</tt>
      &#20801;&#35768;&#20999;&#25442;&#19968;&#20010;AOP&#20195;&#29702;&#30340;&#30446;&#26631;&#65292;&#32780;&#35843;&#29992;&#32773;&#32500;&#25345;&#23545;&#23427;&#30340;&#24341;&#29992;&#12290;</p><p>&#20462;&#25913;&#30446;&#26631;&#28304;&#30340;&#30446;&#26631;&#20250;&#31435;&#21363;&#36215;&#20316;&#29992;&#12290;&#24182;&#19988;<tt class="literal">HotSwappableTargetSource</tt>&#26159;&#32447;&#31243;&#23433;&#20840;&#30340;&#12290;</p><p>&#20320;&#21487;&#20197;&#36890;&#36807;<tt class="literal">HotSwappableTargetSource</tt>&#30340;<tt class="literal">swap()</tt>&#26041;&#27861;
      &#26469;&#25913;&#21464;&#30446;&#26631;&#65292;&#23601;&#35937;&#19979;&#38754;&#19968;&#26679;&#65306;</p><pre class="programlisting">HotSwappableTargetSource swapper = 
    (HotSwappableTargetSource) beanFactory.getBean("swapper");
Object oldTarget = swapper.swap(newTarget);</pre><p>&#25152;&#38656;&#30340;XML&#23450;&#20041;&#22914;&#19979;&#65306;</p><pre class="programlisting">&lt;bean id="initialTarget" class="mycompany.OldTarget"&gt;
&lt;/bean&gt;

&lt;bean id="swapper" 
    class="org.springframework.aop.target.HotSwappableTargetSource"&gt;
    &lt;constructor-arg&gt;&lt;ref local="initialTarget"/&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;

&lt;bean id="swappable" 
    class="org.springframework.aop.framework.ProxyFactoryBean"
&gt;
    &lt;property name="targetSource"&gt;
        &lt;ref local="swapper"/&gt;
    &lt;/property&gt;
&lt;/bean&gt;</pre><p>&#19978;&#38754;&#30340;<tt class="literal">swap()</tt>&#35843;&#29992;&#20250;&#20462;&#25913;swappable&#36825;&#20010;bean&#30340;&#30446;&#26631;&#12290;&#25345;&#26377;&#23545;&#36825;&#20010;bean&#24212;&#29992;&#30340;&#23458;&#25143;&#31471;
      &#23558;&#19981;&#20250;&#30693;&#36947;&#36825;&#20010;&#21464;&#21270;&#65292;&#20294;&#20250;&#31435;&#21051;&#36716;&#20026;&#20351;&#29992;&#26032;&#30340;&#30446;&#26631;&#23545;&#35937;&#12290;</p><p>&#34429;&#28982;&#36825;&#20010;&#20363;&#23376;&#27809;&#26377;&#28155;&#21152;&#20219;&#20309;&#36890;&#30693;&#65293;&#65293;&#20351;&#29992;<tt class="literal">TargetSource</tt>&#20063;&#27809;&#24517;&#35201;&#28155;&#21152;&#36890;&#30693;&#65293;&#65293;
      &#24403;&#28982;&#20219;&#20309;<tt class="literal">TargetSource</tt>&#37117;&#21487;&#20197;&#21644;&#20219;&#20309;&#19968;&#31181;&#36890;&#30693;&#19968;&#36215;&#20351;&#29992;&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ts-pool"></a>5.10.2.&nbsp;&#25903;&#25345;&#27744;&#30340;&#30446;&#26631;&#28304;</h3></div></div><div></div></div><p>&#20351;&#29992;&#25903;&#25345;&#27744;&#30340;&#30446;&#26631;&#28304;&#25552;&#20379;&#20102;&#19968;&#31181;&#21644;&#26080;&#29366;&#24577;&#30340;session EJB&#31867;&#20284;&#30340;&#32534;&#31243;&#27169;&#24335;&#65292;&#22312;&#26080;&#29366;&#24577;&#30340;session EJB&#20013;&#65292;&#32500;&#25252;&#20102;
      &#19968;&#20010;&#30456;&#21516;&#23454;&#20363;&#30340;&#27744;&#65292;&#25552;&#20379;&#20174;&#27744;&#20013;&#33719;&#21462;&#21487;&#29992;&#23545;&#35937;&#30340;&#26041;&#27861;&#12290;</p><p>Spring&#30340;&#27744;&#21644;SLSB&#30340;&#27744;&#20043;&#38388;&#30340;&#37325;&#35201;&#21306;&#21035;&#22312;&#20110;Spring&#30340;&#27744;&#21487;&#20197;&#34987;&#24212;&#29992;&#21040;&#20219;&#20309;&#26222;&#36890;Java&#23545;&#35937;&#12290;&#23601;&#35937;Spring&#30340;&#36890;&#29992;
      &#30340;&#20570;&#27861;&#65292;&#36825;&#20010;&#19994;&#21153;&#20063;&#21487;&#20197;&#20197;&#38750;&#20405;&#20837;&#30340;&#26041;&#24335;&#34987;&#24212;&#29992;&#12290;</p><p>Spring&#30452;&#25509;&#25903;&#25345;Jakarta Commons Pool 1.1&#65292;&#23427;&#26159;&#19968;&#31181;&#38750;&#24120;&#39640;&#25928;&#30340;&#27744;&#23454;&#29616;&#12290;&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#65292;&#20320;&#38656;&#35201;&#22312;&#20320;&#30340;&#24212;&#29992;&#30340;
      classpath&#20013;&#28155;&#21152;commons-pool&#30340;Jar&#25991;&#20214;&#12290;&#20063;&#21487;&#20197;&#30452;&#25509;&#32487;&#25215;
      <tt class="literal">org.springframework.aop.target.AbstractPoolingTargetSource</tt>&#26469;&#25903;&#25345;&#20854;&#23427;&#27744;API&#12290;</p><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#37197;&#32622;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;bean id="businessObjectTarget" class="com.mycompany.MyBusinessObject" 
    singleton="false"&gt;
    ... properties omitted
&lt;/bean&gt;

&lt;bean id="poolTargetSource" 
    class="org.springframework.aop.target.CommonsPoolTargetSource"&gt;
    &lt;property name="targetBeanName"&gt;&lt;value&gt;businessObject&lt;/value&gt;&lt;/property&gt;
    &lt;property name="maxSize"&gt;&lt;value&gt;25&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;

&lt;bean id="businessObject" 
    class="org.springframework.aop.framework.ProxyFactoryBean"
&gt;
    &lt;property name="targetSource"&gt;&lt;ref local="poolTargetSource"/&gt;&lt;/property&gt;
    &lt;property name="interceptorNames"&gt;&lt;value&gt;myInterceptor&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>&#27880;&#24847;&#20363;&#23376;&#20013;&#30340;&#30446;&#26631;&#23545;&#35937;&#8220;businessObjectTarget&#8221;<span class="emphasis"><em>&#24517;&#39035;</em></span>&#26159;prototype&#12290;&#36825;&#26679;&#22312;
      <tt class="literal">PoolingTargetSource</tt>&#30340;&#23454;&#29616;&#22312;&#25193;&#22823;&#27744;&#23481;&#37327;&#30340;&#26102;&#20505;&#21487;&#20197;&#21019;&#24314;&#30446;&#26631;&#30340;&#26032;&#23454;&#20363;&#12290;&#20851;&#20110;&#36825;&#20123;&#23646;&#24615;&#30340;
      &#20449;&#24687;&#21487;&#20197;&#21442;&#32771;<tt class="literal">AbstractPoolingTargetSource</tt>&#21644;&#23376;&#31867;&#30340;Javadoc&#12290;maxSize&#26159;&#26368;&#22522;&#26412;&#30340;&#23646;&#24615;&#65292;
      &#34987;&#20445;&#35777;&#24635;&#26159;&#23384;&#22312;&#12290;</p><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21517;&#23383;&#20026;&#8220;myInterceptor&#8221;&#30340;&#25318;&#25130;&#22120;&#38656;&#35201;&#23450;&#20041;&#22312;&#21516;&#19968;&#20010;IoC&#19978;&#19979;&#25991;&#20013;&#12290;&#20294;&#26159;&#65292;&#24182;&#19981;&#19968;&#23450;&#38656;&#35201;
      &#25351;&#23450;&#25318;&#25130;&#22120;&#20063;&#29992;&#27744;&#12290;&#22914;&#26524;&#20320;&#20165;&#38656;&#35201;&#27744;&#65292;&#24182;&#19988;&#27809;&#26377;&#20854;&#23427;&#36890;&#30693;&#65292;&#21487;&#20197;&#26681;&#26412;&#19981;&#35774;&#32622;&#23646;&#24615;interceptorNames&#12290;</p><p>&#20063;&#21487;&#20197;&#37197;&#32622;Spring&#20197;&#20415;&#21487;&#20197;&#23558;&#20219;&#20309;&#27744;&#21270;&#30340;&#23545;&#35937;&#36716;&#25442;&#31867;&#22411;&#20026;
      <tt class="literal">org.springframework.aop.target.PoolingConfig</tt>&#25509;&#21475;&#12290;&#36890;&#36807;&#36825;&#20010;&#25509;&#21475;&#30340;&#19968;&#20010;&#24341;&#20837;&#65292;&#21487;&#20197;&#24471;&#21040;
      &#37197;&#32622;&#20449;&#24687;&#21644;&#27744;&#30340;&#24403;&#21069;&#22823;&#23567;&#12290;&#20320;&#38656;&#35201;&#36825;&#26679;&#23450;&#20041;&#19968;&#20010;advisor&#65306;</p><pre class="programlisting">&lt;bean id="poolConfigAdvisor" 
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"&gt;
    &lt;property name="target"&gt;&lt;ref local="poolTargetSource" /&gt;&lt;/property&gt;
    &lt;property name="targetMethod"&gt;&lt;value&gt;getPoolingConfigMixin&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>&#36890;&#36807;&#35843;&#29992;<tt class="literal">AbstractPoolingTargetSource</tt>&#31867;&#19978;&#30340;&#26041;&#27861;&#65292;&#21487;&#20197;&#24471;&#21040;&#36825;&#20010;advisor&#65292;
      &#22240;&#27492;&#20351;&#29992;MethodInvokingFactoryBean&#12290;&#36825;&#20010;advisor&#30340;&#21517;&#23383;&#65288;&#8220;poolConfigAdvisor&#8221;&#65289;&#24517;&#39035;&#22312;&#26292;&#38706;&#27744;&#21270;&#23545;&#35937;&#30340;
      This advisor is obtained by calling a convenience method on the
      ProxyFactoryBean&#20013;&#30340;&#25318;&#25130;&#22120;&#21517;&#23383;&#21015;&#34920;&#20013;&#12290;</p><p>&#36825;&#20010;&#31867;&#22411;&#36716;&#25442;&#23601;&#35937;&#19979;&#38754;&#65306;</p><pre class="programlisting">PoolingConfig conf = (PoolingConfig) beanFactory.getBean("businessObject");
System.out.println("Max pool size is " + conf.getMaxSize());</pre><i><span class="remark">&#27744;&#21270;&#26080;&#29366;&#24577;&#19994;&#21153;&#23545;&#35937;&#24182;&#19981;&#26159;&#24635;&#26159;&#24517;&#35201;&#30340;&#12290;&#25105;&#20204;&#19981;&#35748;&#20026;&#36825;&#26159;&#32570;&#30465;&#36873;&#25321;&#65292;&#22240;&#20026;&#22823;&#22810;&#25968;&#26080;&#29366;&#24577;&#23545;&#35937;&#33258;&#28982;&#23601;&#26159;&#32447;&#31243;
      &#23433;&#20840;&#30340;&#65292;&#22914;&#26524;&#36164;&#28304;&#34987;&#32531;&#23384;&#65292;&#23454;&#20363;&#27744;&#21270;&#20250;&#26377;&#38382;&#39064;&#12290;</span></i><p>&#31616;&#21333;&#30340;&#27744;&#20063;&#21487;&#20197;&#20351;&#29992;&#33258;&#21160;&#20195;&#29702;&#12290;&#20219;&#20309;&#33258;&#21160;&#20195;&#29702;&#29983;&#25104;&#22120;&#37117;&#21487;&#20197;&#35774;&#32622;TargetSources&#12290;</p></div><div class="sect2" lang="zh_cn"><div class="titlepage"><div><div><h3 class="title"><a name="aop-ts-prototype"></a>5.10.3.&nbsp;Prototype&#30446;&#26631;&#28304;</h3></div></div><div></div></div><p>&#35774;&#32622;&#8220;prototype&#8221;&#30446;&#26631;&#28304;&#21644;&#25903;&#25345;&#27744;&#30340;&#30446;&#26631;&#28304;&#31867;&#20284;&#12290;&#22312;&#27599;&#27425;&#26041;&#27861;&#35843;&#29992;&#30340;&#26102;&#20505;&#37117;&#20250;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#30446;&#26631;&#23454;&#20363;&#12290;
      &#34429;&#28982;&#22312;&#29616;&#20195;JVM&#20013;&#21019;&#24314;&#23545;&#35937;&#30340;&#20195;&#20215;&#19981;&#26159;&#24456;&#39640;&#65292;&#20294;&#26159;&#35013;&#37197;&#26032;&#23545;&#35937;&#30340;&#20195;&#20215;&#21487;&#33021;&#26356;&#39640;&#65288;&#20026;&#20102;maz&#28385;&#36275;&#23427;&#30340;IoC&#20381;&#36182;&#20851;&#31995;&#65289;&#12290;
      &#22240;&#27492;&#27809;&#26377;&#22909;&#30340;&#29702;&#30001;&#19981;&#24212;&#35813;&#20351;&#29992;&#36825;&#20010;&#26041;&#27861;&#12290;</p><p>&#20026;&#20102;&#36825;&#20040;&#20570;&#65292;&#20320;&#21487;&#20197;&#20462;&#25913;&#19978;&#38754;&#30340;&#30340;<tt class="literal">poolTargetSource</tt>&#23450;&#20041;&#65292;&#23601;&#21521;&#19979;&#38754;&#19968;&#26679;&#12290;
      &#65288;&#20026;&#20102;&#28165;&#26224;&#36215;&#35265;&#65292;&#25105;&#20462;&#25913;&#20102;&#21517;&#23383;&#12290;&#65289;</p><pre class="programlisting">&lt;bean id="prototypeTargetSource" 
    class="org.springframework.aop.target.PrototypeTargetSource"&gt;
    &lt;property name="targetBeanName"&gt;&lt;value&gt;businessObject&lt;/value&gt;&lt;/property&gt;
&lt;/bean&gt;</pre><p>&#21482;&#26377;&#19968;&#20010;&#23646;&#24615;&#65306;&#30446;&#26631;bean&#30340;&#21517;&#23383;&#12290;&#22312;TargetSource&#23454;&#29616;&#20013;&#20351;&#29992;&#32487;&#25215;&#26159;&#20026;&#20102;&#20445;&#35777;&#21629;&#21517;&#30340;&#19968;&#33268;&#24615;&#12290;&#23601;&#35937;&#25903;&#25345;&#27744;&#30340;
      &#30446;&#26631;&#28304;&#19968;&#26679;&#65292;&#30446;&#26631;bean&#24517;&#39035;&#26159;&#19968;&#20010;prototype&#30340;bean&#23450;&#20041;&#12290;</p></div></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="aop-extensibility"></a>5.11.&nbsp;&#23450;&#20041;&#26032;&#30340;&#36890;&#30693;&#31867;&#22411;</h2></div></div><div></div></div><p>Spring AOP&#35774;&#35745;&#33021;&#22815;&#24456;&#23481;&#26131;&#22320;&#25193;&#23637;&#12290;&#34429;&#28982;&#25318;&#25130;&#23454;&#29616;&#30340;&#31574;&#30053;&#30446;&#21069;&#21482;&#22312;&#20869;&#37096;&#20351;&#29992;&#65292;&#20294;&#36824;&#26159;&#26377;&#21487;&#33021;&#25903;&#25345;&#25318;&#25130;around&#36890;&#30693;&#65292;
    before&#36890;&#30693;&#65292;throws&#36890;&#30693;&#21644;after returning&#36890;&#30693;&#20197;&#22806;&#30340;&#20219;&#20309;&#36890;&#30693;&#31867;&#22411;&#12290;</p><p><tt class="literal">org.springframework.aop.framework.adapter</tt>
    &#21253;&#26159;&#19968;&#20010;&#25903;&#25345;&#28155;&#21152;&#26032;&#30340;&#23450;&#21046;&#36890;&#30693;&#31867;&#22411;&#32780;&#19981;&#20462;&#25913;&#26680;&#24515;&#26694;&#26550;&#30340;SPI&#65288;&#35793;&#65306;&#21487;&#33021;&#26159;API&#65289;&#21253;&#12290;&#23450;&#21046;&#36890;&#30693;&#31867;&#22411;&#30340;&#21807;&#19968;&#38480;&#21046;&#26159;&#23427;&#24517;&#39035;&#23454;&#29616;
    <tt class="literal">org.aopalliance.aop.Advice</tt>&#26631;&#35760;&#25509;&#21475;&#12290;</p><p>&#26356;&#22810;&#20449;&#24687;&#35831;&#21442;&#32771;<tt class="literal">org.springframework.aop.framework.adapter</tt>&#21253;&#30340;Javadoc&#12290;</p></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3821"></a>5.12.&nbsp;&#36827;&#19968;&#27493;&#30340;&#36164;&#26009;&#21644;&#36164;&#28304;</h2></div></div><div></div></div><p>&#23545;&#20110;AOP&#30340;&#20171;&#32461;&#65292;&#25105;&#25512;&#33616;Ramnivas Laddad (Manning, 2003)&#20889;&#30340;<span class="emphasis"><em>AspectJ in Action</em></span>&#12290;
    </p><p>&#36827;&#19968;&#27493;&#30340;Spring AOP&#30340;&#20363;&#23376;&#35831;&#21442;&#32771;Spring&#30340;&#31034;&#20363;&#24212;&#29992;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>JPetStore&#30340;&#32570;&#30465;&#37197;&#32622;&#28436;&#31034;&#20102;&#20351;&#29992;TransactionProxyFactoryBean&#26469;&#23450;&#20041;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;</p></li><li><p>JPetStore&#30340;<tt class="literal">/attributes</tt>&#30446;&#24405;&#28436;&#31034;&#20102;&#23646;&#24615;&#39537;&#21160;&#30340;&#22768;&#26126;&#24335;&#20107;&#21153;&#31649;&#29702;&#12290;</p></li></ul></div><p>&#22914;&#26524;&#20320;&#23545;Spring AOP&#26356;&#22810;&#39640;&#32423;&#21151;&#33021;&#24863;&#20852;&#36259;&#65292;&#21487;&#20197;&#30475;&#19968;&#19979;&#27979;&#35797;&#22871;&#20214;&#12290;&#27979;&#35797;&#35206;&#30422;&#29575;&#36229;&#36807;90%&#65292;&#24182;&#19988;&#28436;&#31034;&#20102;&#26412;&#25991;&#26723;&#27809;&#26377;&#25552;&#21040;
    &#30340;&#35768;&#22810;&#39640;&#32423;&#21151;&#33021;&#12290;</p></div><div class="sect1" lang="zh_cn"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3843"></a>5.13.&nbsp;&#36335;&#26631;</h2></div></div><div></div></div><p>Spring AOP&#65292;&#23601;&#35937;Spring&#30340;&#20854;&#23427;&#37096;&#20998;&#65292;&#26159;&#24320;&#21457;&#38750;&#24120;&#27963;&#36291;&#30340;&#37096;&#20998;&#12290;&#26680;&#24515;API&#24050;&#32463;&#31283;&#23450;&#20102;&#12290;&#35937;Spring&#30340;&#20854;&#23427;&#37096;&#20998;&#19968;&#26679;&#65292;
    AOP&#26694;&#26550;&#26159;&#38750;&#24120;&#27169;&#22359;&#21270;&#30340;&#65292;&#22312;&#20445;&#30041;&#22522;&#30784;&#35774;&#35745;&#30340;&#21516;&#26102;&#25552;&#20379;&#25193;&#23637;&#12290;&#22312;Spring 1.1&#21040;1.2&#38454;&#27573;&#26377;&#24456;&#22810;&#22320;&#26041;&#21487;&#33021;&#20250;&#26377;&#25152;&#25552;&#39640;&#65292;&#20294;&#26159;&#36825;
    &#20123;&#22320;&#26041;&#20063;&#20445;&#30041;&#20102;&#21521;&#21518;&#20860;&#23481;&#24615;&#12290;&#23427;&#20204;&#26159;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#24615;&#33021;&#30340;&#25552;&#39640;</em></span>&#65306;AOP&#20195;&#29702;&#30340;&#21019;&#24314;&#30001;&#24037;&#21378;&#36890;&#36807;&#31574;&#30053;&#25509;&#21475;&#22788;&#29702;&#12290;&#22240;&#27492;&#25105;&#20204;&#33021;&#22815;&#25903;&#25345;&#39069;&#22806;&#30340;AOP
        &#20195;&#29702;&#31867;&#22411;&#32780;&#19981;&#24433;&#21709;&#29992;&#25143;&#20195;&#30721;&#25110;&#26680;&#24515;&#23454;&#29616;&#12290;&#23545;&#20110;Spring 1.1&#65292;&#25105;&#20204;&#27491;&#22312;&#26816;&#26597;AOP&#20195;&#29702;&#23454;&#29616;&#30340;&#25152;&#26377;&#23383;&#33410;&#30721;&#65292;&#19975;&#19968;&#19981;&#38656;&#35201;
        &#36816;&#34892;&#26102;&#36890;&#30693;&#25913;&#21464;&#12290;&#36825;&#24212;&#35813;&#22823;&#22823;&#20943;&#23569;AOP&#26694;&#26550;&#30340;&#39069;&#22806;&#25805;&#20316;&#12290;&#20294;&#26159;&#27880;&#24847;&#65292;AOP&#26694;&#26550;&#30340;&#39069;&#22806;&#25805;&#20316;&#19981;&#26159;&#22312;&#26222;&#36890;&#20351;&#29992;&#20013;&#38656;&#35201;&#32771;&#34385;
        &#30340;&#20869;&#23481;&#12290;</p></li><li><p><span class="emphasis"><em>&#26356;&#20855;&#34920;&#36798;&#21147;&#30340;&#20999;&#20837;&#28857;</em></span>&#65306;Spring&#30446;&#21069;&#25552;&#20379;&#20102;&#19968;&#20010;&#20855;&#26377;&#34920;&#36798;&#21147;&#30340;&#20999;&#20837;&#28857;&#25509;&#21475;&#65292;&#20294;&#26159;&#25105;&#20204;
        &#28155;&#21152;&#26356;&#22810;&#30340;&#20999;&#20837;&#28857;&#23454;&#29616;&#12290;&#25105;&#20204;&#27491;&#22312;&#32771;&#34385;&#25552;&#20379;&#19968;&#20010;&#31616;&#21333;&#20294;&#20855;&#26377;&#24378;&#22823;&#34920;&#36798;&#24335;&#35821;&#35328;&#30340;&#23454;&#29616;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#36129;&#29486;&#19968;&#20010;&#26377;&#29992;&#30340;
        &#20999;&#20837;&#28857;&#23454;&#29616;&#65292;&#25105;&#20204;&#23558;&#38750;&#24120;&#27426;&#36814;&#12290;</p></li><li><p>&#24341;&#20837;<tt class="literal">&#26041;&#38754;</tt>&#36825;&#20010;&#39640;&#23618;&#27010;&#24565;&#65292;&#23427;&#21253;&#21547;&#22810;&#20010;advisor&#12290;</p></li></ul></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="validation.html">&#19978;&#19968;&#39029;</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">&#19978;&#19968;&#32423;</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="aspectj.html">&#19979;&#19968;&#39029;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;&nbsp;4&nbsp;&#31456;&nbsp;&#23646;&#24615;&#32534;&#36753;&#22120;&#65292;&#25968;&#25454;&#32465;&#23450;&#65292;&#26657;&#39564;&#19982;BeanWeapper(Bean&#23553;&#35013;)&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">&#36215;&#22987;&#39029;</a></td><td width="40%" align="right" valign="top">&nbsp;&#31532;&nbsp;6&nbsp;&#31456;&nbsp;&#38598;&#25104;AspectJ </td></tr></table></div></body></html>